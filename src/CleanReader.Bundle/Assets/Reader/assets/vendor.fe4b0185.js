function Nn(i,e){const t=Object.create(null),r=i.split(",");for(let n=0;n<r.length;n++)t[r[n]]=!0;return e?n=>!!t[n.toLowerCase()]:n=>!!t[n]}const wh="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",xh=Nn(wh);function fa(i){return!!i||i===""}function On(i){if(De(i)){const e={};for(let t=0;t<i.length;t++){const r=i[t],n=_t(r)?Sh(r):On(r);if(n)for(const s in n)e[s]=n[s]}return e}else{if(_t(i))return i;if(Et(i))return i}}const Eh=/;(?![^(]*\))/g,Th=/:(.+)/;function Sh(i){const e={};return i.split(Eh).forEach(t=>{if(t){const r=t.split(Th);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Rn(i){let e="";if(_t(i))e=i;else if(De(i))for(let t=0;t<i.length;t++){const r=Rn(i[t]);r&&(e+=r+" ")}else if(Et(i))for(const t in i)i[t]&&(e+=t+" ");return e.trim()}const Je={},Di=[],Ut=()=>{},Ch=()=>!1,kh=/^on[^a-z]/,zr=i=>kh.test(i),Ln=i=>i.startsWith("onUpdate:"),yt=Object.assign,Dn=(i,e)=>{const t=i.indexOf(e);t>-1&&i.splice(t,1)},Ah=Object.prototype.hasOwnProperty,Ze=(i,e)=>Ah.call(i,e),De=Array.isArray,nr=i=>Mr(i)==="[object Map]",Ih=i=>Mr(i)==="[object Set]",ze=i=>typeof i=="function",_t=i=>typeof i=="string",Pn=i=>typeof i=="symbol",Et=i=>i!==null&&typeof i=="object",ua=i=>Et(i)&&ze(i.then)&&ze(i.catch),Nh=Object.prototype.toString,Mr=i=>Nh.call(i),Oh=i=>Mr(i).slice(8,-1),Rh=i=>Mr(i)==="[object Object]",zn=i=>_t(i)&&i!=="NaN"&&i[0]!=="-"&&""+parseInt(i,10)===i,Br=Nn(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Fr=i=>{const e=Object.create(null);return t=>e[t]||(e[t]=i(t))},Lh=/-(\w)/g,Pi=Fr(i=>i.replace(Lh,(e,t)=>t?t.toUpperCase():"")),Dh=/\B([A-Z])/g,zi=Fr(i=>i.replace(Dh,"-$1").toLowerCase()),ca=Fr(i=>i.charAt(0).toUpperCase()+i.slice(1)),Mn=Fr(i=>i?`on${ca(i)}`:""),sr=(i,e)=>!Object.is(i,e),Bn=(i,e)=>{for(let t=0;t<i.length;t++)i[t](e)},Ur=(i,e,t)=>{Object.defineProperty(i,e,{configurable:!0,enumerable:!1,value:t})},Ph=i=>{const e=parseFloat(i);return isNaN(e)?i:e};let da;const zh=()=>da||(da=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});let yi;const Wr=[];class Mh{constructor(e=!1){this.active=!0,this.effects=[],this.cleanups=[],!e&&yi&&(this.parent=yi,this.index=(yi.scopes||(yi.scopes=[])).push(this)-1)}run(e){if(this.active)try{return this.on(),e()}finally{this.off()}}on(){this.active&&(Wr.push(this),yi=this)}off(){this.active&&(Wr.pop(),yi=Wr[Wr.length-1])}stop(e){if(this.active){if(this.effects.forEach(t=>t.stop()),this.cleanups.forEach(t=>t()),this.scopes&&this.scopes.forEach(t=>t.stop(!0)),this.parent&&!e){const t=this.parent.scopes.pop();t&&t!==this&&(this.parent.scopes[this.index]=t,t.index=this.index)}this.active=!1}}}function Bh(i,e){e=e||yi,e&&e.active&&e.effects.push(i)}const Fn=i=>{const e=new Set(i);return e.w=0,e.n=0,e},pa=i=>(i.w&li)>0,va=i=>(i.n&li)>0,Fh=({deps:i})=>{if(i.length)for(let e=0;e<i.length;e++)i[e].w|=li},Uh=i=>{const{deps:e}=i;if(e.length){let t=0;for(let r=0;r<e.length;r++){const n=e[r];pa(n)&&!va(n)?n.delete(i):e[t++]=n,n.w&=~li,n.n&=~li}e.length=t}},Un=new WeakMap;let ar=0,li=1;const Wn=30,or=[];let _i;const bi=Symbol(""),jn=Symbol("");class Hn{constructor(e,t=null,r){this.fn=e,this.scheduler=t,this.active=!0,this.deps=[],Bh(this,r)}run(){if(!this.active)return this.fn();if(!or.includes(this))try{return or.push(_i=this),Wh(),li=1<<++ar,ar<=Wn?Fh(this):ga(this),this.fn()}finally{ar<=Wn&&Uh(this),li=1<<--ar,wi(),or.pop();const e=or.length;_i=e>0?or[e-1]:void 0}}stop(){this.active&&(ga(this),this.onStop&&this.onStop(),this.active=!1)}}function ga(i){const{deps:e}=i;if(e.length){for(let t=0;t<e.length;t++)e[t].delete(i);e.length=0}}let Mi=!0;const $n=[];function Bi(){$n.push(Mi),Mi=!1}function Wh(){$n.push(Mi),Mi=!0}function wi(){const i=$n.pop();Mi=i===void 0?!0:i}function Nt(i,e,t){if(!ma())return;let r=Un.get(i);r||Un.set(i,r=new Map);let n=r.get(t);n||r.set(t,n=Fn()),ya(n)}function ma(){return Mi&&_i!==void 0}function ya(i,e){let t=!1;ar<=Wn?va(i)||(i.n|=li,t=!pa(i)):t=!i.has(_i),t&&(i.add(_i),_i.deps.push(i))}function Qt(i,e,t,r,n,s){const a=Un.get(i);if(!a)return;let o=[];if(e==="clear")o=[...a.values()];else if(t==="length"&&De(i))a.forEach((l,h)=>{(h==="length"||h>=r)&&o.push(l)});else switch(t!==void 0&&o.push(a.get(t)),e){case"add":De(i)?zn(t)&&o.push(a.get("length")):(o.push(a.get(bi)),nr(i)&&o.push(a.get(jn)));break;case"delete":De(i)||(o.push(a.get(bi)),nr(i)&&o.push(a.get(jn)));break;case"set":nr(i)&&o.push(a.get(bi));break}if(o.length===1)o[0]&&Zn(o[0]);else{const l=[];for(const h of o)h&&l.push(...h);Zn(Fn(l))}}function Zn(i,e){for(const t of De(i)?i:[...i])(t!==_i||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const jh=Nn("__proto__,__v_isRef,__isVue"),_a=new Set(Object.getOwnPropertyNames(Symbol).map(i=>Symbol[i]).filter(Pn)),Hh=Vn(),$h=Vn(!1,!0),Zh=Vn(!0),ba=Vh();function Vh(){const i={};return["includes","indexOf","lastIndexOf"].forEach(e=>{i[e]=function(...t){const r=Ve(this);for(let s=0,a=this.length;s<a;s++)Nt(r,"get",s+"");const n=r[e](...t);return n===-1||n===!1?r[e](...t.map(Ve)):n}}),["push","pop","shift","unshift","splice"].forEach(e=>{i[e]=function(...t){Bi();const r=Ve(this)[e].apply(this,t);return wi(),r}}),i}function Vn(i=!1,e=!1){return function(r,n,s){if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_raw"&&s===(i?e?hf:Ia:e?Aa:ka).get(r))return r;const a=De(r);if(!i&&a&&Ze(ba,n))return Reflect.get(ba,n,s);const o=Reflect.get(r,n,s);return(Pn(n)?_a.has(n):jh(n))||(i||Nt(r,"get",n),e)?o:Tt(o)?!a||!zn(n)?o.value:o:Et(o)?i?Na(o):qn(o):o}}const Yh=wa(),Xh=wa(!0);function wa(i=!1){return function(t,r,n,s){let a=t[r];if(!i&&!Gn(n)&&(n=Ve(n),a=Ve(a),!De(t)&&Tt(a)&&!Tt(n)))return a.value=n,!0;const o=De(t)&&zn(r)?Number(r)<t.length:Ze(t,r),l=Reflect.set(t,r,n,s);return t===Ve(s)&&(o?sr(n,a)&&Qt(t,"set",r,n):Qt(t,"add",r,n)),l}}function qh(i,e){const t=Ze(i,e);i[e];const r=Reflect.deleteProperty(i,e);return r&&t&&Qt(i,"delete",e,void 0),r}function Kh(i,e){const t=Reflect.has(i,e);return(!Pn(e)||!_a.has(e))&&Nt(i,"has",e),t}function Gh(i){return Nt(i,"iterate",De(i)?"length":bi),Reflect.ownKeys(i)}const xa={get:Hh,set:Yh,deleteProperty:qh,has:Kh,ownKeys:Gh},Jh={get:Zh,set(i,e){return!0},deleteProperty(i,e){return!0}},Qh=yt({},xa,{get:$h,set:Xh}),Yn=i=>i,jr=i=>Reflect.getPrototypeOf(i);function Hr(i,e,t=!1,r=!1){i=i.__v_raw;const n=Ve(i),s=Ve(e);e!==s&&!t&&Nt(n,"get",e),!t&&Nt(n,"get",s);const{has:a}=jr(n),o=r?Yn:t?Jn:lr;if(a.call(n,e))return o(i.get(e));if(a.call(n,s))return o(i.get(s));i!==n&&i.get(e)}function $r(i,e=!1){const t=this.__v_raw,r=Ve(t),n=Ve(i);return i!==n&&!e&&Nt(r,"has",i),!e&&Nt(r,"has",n),i===n?t.has(i):t.has(i)||t.has(n)}function Zr(i,e=!1){return i=i.__v_raw,!e&&Nt(Ve(i),"iterate",bi),Reflect.get(i,"size",i)}function Ea(i){i=Ve(i);const e=Ve(this);return jr(e).has.call(e,i)||(e.add(i),Qt(e,"add",i,i)),this}function Ta(i,e){e=Ve(e);const t=Ve(this),{has:r,get:n}=jr(t);let s=r.call(t,i);s||(i=Ve(i),s=r.call(t,i));const a=n.call(t,i);return t.set(i,e),s?sr(e,a)&&Qt(t,"set",i,e):Qt(t,"add",i,e),this}function Sa(i){const e=Ve(this),{has:t,get:r}=jr(e);let n=t.call(e,i);n||(i=Ve(i),n=t.call(e,i)),r&&r.call(e,i);const s=e.delete(i);return n&&Qt(e,"delete",i,void 0),s}function Ca(){const i=Ve(this),e=i.size!==0,t=i.clear();return e&&Qt(i,"clear",void 0,void 0),t}function Vr(i,e){return function(r,n){const s=this,a=s.__v_raw,o=Ve(a),l=e?Yn:i?Jn:lr;return!i&&Nt(o,"iterate",bi),a.forEach((h,u)=>r.call(n,l(h),l(u),s))}}function Yr(i,e,t){return function(...r){const n=this.__v_raw,s=Ve(n),a=nr(s),o=i==="entries"||i===Symbol.iterator&&a,l=i==="keys"&&a,h=n[i](...r),u=t?Yn:e?Jn:lr;return!e&&Nt(s,"iterate",l?jn:bi),{next(){const{value:c,done:v}=h.next();return v?{value:c,done:v}:{value:o?[u(c[0]),u(c[1])]:u(c),done:v}},[Symbol.iterator](){return this}}}}function hi(i){return function(...e){return i==="delete"?!1:this}}function ef(){const i={get(s){return Hr(this,s)},get size(){return Zr(this)},has:$r,add:Ea,set:Ta,delete:Sa,clear:Ca,forEach:Vr(!1,!1)},e={get(s){return Hr(this,s,!1,!0)},get size(){return Zr(this)},has:$r,add:Ea,set:Ta,delete:Sa,clear:Ca,forEach:Vr(!1,!0)},t={get(s){return Hr(this,s,!0)},get size(){return Zr(this,!0)},has(s){return $r.call(this,s,!0)},add:hi("add"),set:hi("set"),delete:hi("delete"),clear:hi("clear"),forEach:Vr(!0,!1)},r={get(s){return Hr(this,s,!0,!0)},get size(){return Zr(this,!0)},has(s){return $r.call(this,s,!0)},add:hi("add"),set:hi("set"),delete:hi("delete"),clear:hi("clear"),forEach:Vr(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{i[s]=Yr(s,!1,!1),t[s]=Yr(s,!0,!1),e[s]=Yr(s,!1,!0),r[s]=Yr(s,!0,!0)}),[i,t,e,r]}const[tf,rf,nf,sf]=ef();function Xn(i,e){const t=e?i?sf:nf:i?rf:tf;return(r,n,s)=>n==="__v_isReactive"?!i:n==="__v_isReadonly"?i:n==="__v_raw"?r:Reflect.get(Ze(t,n)&&n in r?t:r,n,s)}const af={get:Xn(!1,!1)},of={get:Xn(!1,!0)},lf={get:Xn(!0,!1)},ka=new WeakMap,Aa=new WeakMap,Ia=new WeakMap,hf=new WeakMap;function ff(i){switch(i){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function uf(i){return i.__v_skip||!Object.isExtensible(i)?0:ff(Oh(i))}function qn(i){return i&&i.__v_isReadonly?i:Kn(i,!1,xa,af,ka)}function cf(i){return Kn(i,!1,Qh,of,Aa)}function Na(i){return Kn(i,!0,Jh,lf,Ia)}function Kn(i,e,t,r,n){if(!Et(i)||i.__v_raw&&!(e&&i.__v_isReactive))return i;const s=n.get(i);if(s)return s;const a=uf(i);if(a===0)return i;const o=new Proxy(i,a===2?r:t);return n.set(i,o),o}function Fi(i){return Gn(i)?Fi(i.__v_raw):!!(i&&i.__v_isReactive)}function Gn(i){return!!(i&&i.__v_isReadonly)}function Oa(i){return Fi(i)||Gn(i)}function Ve(i){const e=i&&i.__v_raw;return e?Ve(e):i}function Ra(i){return Ur(i,"__v_skip",!0),i}const lr=i=>Et(i)?qn(i):i,Jn=i=>Et(i)?Na(i):i;function La(i){ma()&&(i=Ve(i),i.dep||(i.dep=Fn()),ya(i.dep))}function Da(i,e){i=Ve(i),i.dep&&Zn(i.dep)}function Tt(i){return Boolean(i&&i.__v_isRef===!0)}function sv(i){return df(i,!1)}function df(i,e){return Tt(i)?i:new pf(i,e)}class pf{constructor(e,t){this._shallow=t,this.dep=void 0,this.__v_isRef=!0,this._rawValue=t?e:Ve(e),this._value=t?e:lr(e)}get value(){return La(this),this._value}set value(e){e=this._shallow?e:Ve(e),sr(e,this._rawValue)&&(this._rawValue=e,this._value=this._shallow?e:lr(e),Da(this))}}function vf(i){return Tt(i)?i.value:i}const gf={get:(i,e,t)=>vf(Reflect.get(i,e,t)),set:(i,e,t,r)=>{const n=i[e];return Tt(n)&&!Tt(t)?(n.value=t,!0):Reflect.set(i,e,t,r)}};function Pa(i){return Fi(i)?i:new Proxy(i,gf)}class mf{constructor(e,t,r){this._setter=t,this.dep=void 0,this._dirty=!0,this.__v_isRef=!0,this.effect=new Hn(e,()=>{this._dirty||(this._dirty=!0,Da(this))}),this.__v_isReadonly=r}get value(){const e=Ve(this);return La(e),e._dirty&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function yf(i,e){let t,r;const n=ze(i);return n?(t=i,r=Ut):(t=i.get,r=i.set),new mf(t,r,n||!r)}Promise.resolve();function _f(i,e,...t){const r=i.vnode.props||Je;let n=t;const s=e.startsWith("update:"),a=s&&e.slice(7);if(a&&a in r){const u=`${a==="modelValue"?"model":a}Modifiers`,{number:c,trim:v}=r[u]||Je;v?n=t.map(g=>g.trim()):c&&(n=t.map(Ph))}let o,l=r[o=Mn(e)]||r[o=Mn(Pi(e))];!l&&s&&(l=r[o=Mn(zi(e))]),l&&Pt(l,i,6,n);const h=r[o+"Once"];if(h){if(!i.emitted)i.emitted={};else if(i.emitted[o])return;i.emitted[o]=!0,Pt(h,i,6,n)}}function za(i,e,t=!1){const r=e.emitsCache,n=r.get(i);if(n!==void 0)return n;const s=i.emits;let a={},o=!1;if(!ze(i)){const l=h=>{const u=za(h,e,!0);u&&(o=!0,yt(a,u))};!t&&e.mixins.length&&e.mixins.forEach(l),i.extends&&l(i.extends),i.mixins&&i.mixins.forEach(l)}return!s&&!o?(r.set(i,null),null):(De(s)?s.forEach(l=>a[l]=null):yt(a,s),r.set(i,a),a)}function Qn(i,e){return!i||!zr(e)?!1:(e=e.slice(2).replace(/Once$/,""),Ze(i,e[0].toLowerCase()+e.slice(1))||Ze(i,zi(e))||Ze(i,e))}let Vt=null,Ma=null;function Xr(i){const e=Vt;return Vt=i,Ma=i&&i.type.__scopeId||null,e}function bf(i,e=Vt,t){if(!e||i._n)return i;const r=(...n)=>{r._d&&so(-1);const s=Xr(e),a=i(...n);return Xr(s),r._d&&so(1),a};return r._n=!0,r._c=!0,r._d=!0,r}function es(i){const{type:e,vnode:t,proxy:r,withProxy:n,props:s,propsOptions:[a],slots:o,attrs:l,emit:h,render:u,renderCache:c,data:v,setupState:g,ctx:I,inheritAttrs:w}=i;let p,d;const _=Xr(i);try{if(t.shapeFlag&4){const N=n||r;p=Xt(u.call(N,N,c,s,g,v,I)),d=l}else{const N=e;p=Xt(N.length>1?N(s,{attrs:l,slots:o,emit:h}):N(s,null)),d=e.props?l:wf(l)}}catch(N){hr.length=0,sn(N,i,1),p=ti(Yt)}let T=p;if(d&&w!==!1){const N=Object.keys(d),{shapeFlag:y}=T;N.length&&y&(1|6)&&(a&&N.some(Ln)&&(d=xf(d,a)),T=Ui(T,d))}return t.dirs&&(T.dirs=T.dirs?T.dirs.concat(t.dirs):t.dirs),t.transition&&(T.transition=t.transition),p=T,Xr(_),p}const wf=i=>{let e;for(const t in i)(t==="class"||t==="style"||zr(t))&&((e||(e={}))[t]=i[t]);return e},xf=(i,e)=>{const t={};for(const r in i)(!Ln(r)||!(r.slice(9)in e))&&(t[r]=i[r]);return t};function Ef(i,e,t){const{props:r,children:n,component:s}=i,{props:a,children:o,patchFlag:l}=e,h=s.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&l>=0){if(l&1024)return!0;if(l&16)return r?Ba(r,a,h):!!a;if(l&8){const u=e.dynamicProps;for(let c=0;c<u.length;c++){const v=u[c];if(a[v]!==r[v]&&!Qn(h,v))return!0}}}else return(n||o)&&(!o||!o.$stable)?!0:r===a?!1:r?a?Ba(r,a,h):!0:!!a;return!1}function Ba(i,e,t){const r=Object.keys(e);if(r.length!==Object.keys(i).length)return!0;for(let n=0;n<r.length;n++){const s=r[n];if(e[s]!==i[s]&&!Qn(t,s))return!0}return!1}function Tf({vnode:i,parent:e},t){for(;e&&e.subTree===i;)(i=e.vnode).el=t,e=e.parent}const Sf=i=>i.__isSuspense;function Cf(i,e){e&&e.pendingBranch?De(i)?e.effects.push(...i):e.effects.push(i):Cu(i)}function kf(i,e){if(gt){let t=gt.provides;const r=gt.parent&&gt.parent.provides;r===t&&(t=gt.provides=Object.create(r)),t[i]=e}}function ts(i,e,t=!1){const r=gt||Vt;if(r){const n=r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides;if(n&&i in n)return n[i];if(arguments.length>1)return t&&ze(e)?e.call(r.proxy):e}}function Af(){const i={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return as(()=>{i.isMounted=!0}),Ha(()=>{i.isUnmounting=!0}),i}const Dt=[Function,Array],If={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Dt,onEnter:Dt,onAfterEnter:Dt,onEnterCancelled:Dt,onBeforeLeave:Dt,onLeave:Dt,onAfterLeave:Dt,onLeaveCancelled:Dt,onBeforeAppear:Dt,onAppear:Dt,onAfterAppear:Dt,onAppearCancelled:Dt},setup(i,{slots:e}){const t=ho(),r=Af();let n;return()=>{const s=e.default&&Wa(e.default(),!0);if(!s||!s.length)return;const a=Ve(i),{mode:o}=a,l=s[0];if(r.isLeaving)return rs(l);const h=Ua(l);if(!h)return rs(l);const u=is(h,a,r,t);ns(h,u);const c=t.subTree,v=c&&Ua(c);let g=!1;const{getTransitionKey:I}=h.type;if(I){const w=I();n===void 0?n=w:w!==n&&(n=w,g=!0)}if(v&&v.type!==Yt&&(!Ci(h,v)||g)){const w=is(v,a,r,t);if(ns(v,w),o==="out-in")return r.isLeaving=!0,w.afterLeave=()=>{r.isLeaving=!1,t.update()},rs(l);o==="in-out"&&h.type!==Yt&&(w.delayLeave=(p,d,_)=>{const T=Fa(r,v);T[String(v.key)]=v,p._leaveCb=()=>{d(),p._leaveCb=void 0,delete u.delayedLeave},u.delayedLeave=_})}return l}}},Nf=If;function Fa(i,e){const{leavingVNodes:t}=i;let r=t.get(e.type);return r||(r=Object.create(null),t.set(e.type,r)),r}function is(i,e,t,r){const{appear:n,mode:s,persisted:a=!1,onBeforeEnter:o,onEnter:l,onAfterEnter:h,onEnterCancelled:u,onBeforeLeave:c,onLeave:v,onAfterLeave:g,onLeaveCancelled:I,onBeforeAppear:w,onAppear:p,onAfterAppear:d,onAppearCancelled:_}=e,T=String(i.key),N=Fa(t,i),y=(k,z)=>{k&&Pt(k,r,9,z)},S={mode:s,persisted:a,beforeEnter(k){let z=o;if(!t.isMounted)if(n)z=w||o;else return;k._leaveCb&&k._leaveCb(!0);const $=N[T];$&&Ci(i,$)&&$.el._leaveCb&&$.el._leaveCb(),y(z,[k])},enter(k){let z=l,$=h,U=u;if(!t.isMounted)if(n)z=p||l,$=d||h,U=_||u;else return;let J=!1;const Y=k._enterCb=ce=>{J||(J=!0,ce?y(U,[k]):y($,[k]),S.delayedLeave&&S.delayedLeave(),k._enterCb=void 0)};z?(z(k,Y),z.length<=1&&Y()):Y()},leave(k,z){const $=String(i.key);if(k._enterCb&&k._enterCb(!0),t.isUnmounting)return z();y(c,[k]);let U=!1;const J=k._leaveCb=Y=>{U||(U=!0,z(),Y?y(I,[k]):y(g,[k]),k._leaveCb=void 0,N[$]===i&&delete N[$])};N[$]=i,v?(v(k,J),v.length<=1&&J()):J()},clone(k){return is(k,e,t,r)}};return S}function rs(i){if(qr(i))return i=Ui(i),i.children=null,i}function Ua(i){return qr(i)?i.children?i.children[0]:void 0:i}function ns(i,e){i.shapeFlag&6&&i.component?ns(i.component.subTree,e):i.shapeFlag&128?(i.ssContent.transition=e.clone(i.ssContent),i.ssFallback.transition=e.clone(i.ssFallback)):i.transition=e}function Wa(i,e=!1){let t=[],r=0;for(let n=0;n<i.length;n++){const s=i[n];s.type===Wt?(s.patchFlag&128&&r++,t=t.concat(Wa(s.children,e))):(e||s.type!==Yt)&&t.push(s)}if(r>1)for(let n=0;n<t.length;n++)t[n].patchFlag=-2;return t}function av(i){return ze(i)?{setup:i,name:i.name}:i}const ss=i=>!!i.type.__asyncLoader,qr=i=>i.type.__isKeepAlive;function Of(i,e){ja(i,"a",e)}function Rf(i,e){ja(i,"da",e)}function ja(i,e,t=gt){const r=i.__wdc||(i.__wdc=()=>{let n=t;for(;n;){if(n.isDeactivated)return;n=n.parent}return i()});if(Kr(e,r,t),t){let n=t.parent;for(;n&&n.parent;)qr(n.parent.vnode)&&Lf(r,e,t,n),n=n.parent}}function Lf(i,e,t,r){const n=Kr(e,i,r,!0);os(()=>{Dn(r[e],n)},t)}function Kr(i,e,t=gt,r=!1){if(t){const n=t[i]||(t[i]=[]),s=e.__weh||(e.__weh=(...a)=>{if(t.isUnmounted)return;Bi(),Wi(t);const o=Pt(e,t,i,a);return ki(),wi(),o});return r?n.unshift(s):n.push(s),s}}const ei=i=>(e,t=gt)=>(!nn||i==="sp")&&Kr(i,e,t),Df=ei("bm"),as=ei("m"),Pf=ei("bu"),zf=ei("u"),Ha=ei("bum"),os=ei("um"),Mf=ei("sp"),Bf=ei("rtg"),Ff=ei("rtc");function Uf(i,e=gt){Kr("ec",i,e)}let ls=!0;function Wf(i){const e=Va(i),t=i.proxy,r=i.ctx;ls=!1,e.beforeCreate&&$a(e.beforeCreate,i,"bc");const{data:n,computed:s,methods:a,watch:o,provide:l,inject:h,created:u,beforeMount:c,mounted:v,beforeUpdate:g,updated:I,activated:w,deactivated:p,beforeDestroy:d,beforeUnmount:_,destroyed:T,unmounted:N,render:y,renderTracked:S,renderTriggered:k,errorCaptured:z,serverPrefetch:$,expose:U,inheritAttrs:J,components:Y,directives:ce,filters:Se}=e;if(h&&jf(h,r,null,i.appContext.config.unwrapInjectedRef),a)for(const he in a){const ae=a[he];ze(ae)&&(r[he]=ae.bind(t))}if(n){const he=n.call(t,t);Et(he)&&(i.data=qn(he))}if(ls=!0,s)for(const he in s){const ae=s[he],Ae=ze(ae)?ae.bind(t,t):ze(ae.get)?ae.get.bind(t,t):Ut,Ye=!ze(ae)&&ze(ae.set)?ae.set.bind(t):Ut,Me=yf({get:Ae,set:Ye});Object.defineProperty(r,he,{enumerable:!0,configurable:!0,get:()=>Me.value,set:be=>Me.value=be})}if(o)for(const he in o)Za(o[he],r,t,he);if(l){const he=ze(l)?l.call(t):l;Reflect.ownKeys(he).forEach(ae=>{kf(ae,he[ae])})}u&&$a(u,i,"c");function ve(he,ae){De(ae)?ae.forEach(Ae=>he(Ae.bind(t))):ae&&he(ae.bind(t))}if(ve(Df,c),ve(as,v),ve(Pf,g),ve(zf,I),ve(Of,w),ve(Rf,p),ve(Uf,z),ve(Ff,S),ve(Bf,k),ve(Ha,_),ve(os,N),ve(Mf,$),De(U))if(U.length){const he=i.exposed||(i.exposed={});U.forEach(ae=>{Object.defineProperty(he,ae,{get:()=>t[ae],set:Ae=>t[ae]=Ae})})}else i.exposed||(i.exposed={});y&&i.render===Ut&&(i.render=y),J!=null&&(i.inheritAttrs=J),Y&&(i.components=Y),ce&&(i.directives=ce)}function jf(i,e,t=Ut,r=!1){De(i)&&(i=hs(i));for(const n in i){const s=i[n];let a;Et(s)?"default"in s?a=ts(s.from||n,s.default,!0):a=ts(s.from||n):a=ts(s),Tt(a)&&r?Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>a.value,set:o=>a.value=o}):e[n]=a}}function $a(i,e,t){Pt(De(i)?i.map(r=>r.bind(e.proxy)):i.bind(e.proxy),e,t)}function Za(i,e,t,r){const n=r.includes(".")?xo(t,r):()=>t[r];if(_t(i)){const s=e[i];ze(s)&&ws(n,s)}else if(ze(i))ws(n,i.bind(t));else if(Et(i))if(De(i))i.forEach(s=>Za(s,e,t,r));else{const s=ze(i.handler)?i.handler.bind(t):e[i.handler];ze(s)&&ws(n,s,i)}}function Va(i){const e=i.type,{mixins:t,extends:r}=e,{mixins:n,optionsCache:s,config:{optionMergeStrategies:a}}=i.appContext,o=s.get(e);let l;return o?l=o:!n.length&&!t&&!r?l=e:(l={},n.length&&n.forEach(h=>Gr(l,h,a,!0)),Gr(l,e,a)),s.set(e,l),l}function Gr(i,e,t,r=!1){const{mixins:n,extends:s}=e;s&&Gr(i,s,t,!0),n&&n.forEach(a=>Gr(i,a,t,!0));for(const a in e)if(!(r&&a==="expose")){const o=Hf[a]||t&&t[a];i[a]=o?o(i[a],e[a]):e[a]}return i}const Hf={data:Ya,props:xi,emits:xi,methods:xi,computed:xi,beforeCreate:St,created:St,beforeMount:St,mounted:St,beforeUpdate:St,updated:St,beforeDestroy:St,beforeUnmount:St,destroyed:St,unmounted:St,activated:St,deactivated:St,errorCaptured:St,serverPrefetch:St,components:xi,directives:xi,watch:Zf,provide:Ya,inject:$f};function Ya(i,e){return e?i?function(){return yt(ze(i)?i.call(this,this):i,ze(e)?e.call(this,this):e)}:e:i}function $f(i,e){return xi(hs(i),hs(e))}function hs(i){if(De(i)){const e={};for(let t=0;t<i.length;t++)e[i[t]]=i[t];return e}return i}function St(i,e){return i?[...new Set([].concat(i,e))]:e}function xi(i,e){return i?yt(yt(Object.create(null),i),e):e}function Zf(i,e){if(!i)return e;if(!e)return i;const t=yt(Object.create(null),i);for(const r in e)t[r]=St(i[r],e[r]);return t}function Vf(i,e,t,r=!1){const n={},s={};Ur(s,en,1),i.propsDefaults=Object.create(null),Xa(i,e,n,s);for(const a in i.propsOptions[0])a in n||(n[a]=void 0);t?i.props=r?n:cf(n):i.type.props?i.props=n:i.props=s,i.attrs=s}function Yf(i,e,t,r){const{props:n,attrs:s,vnode:{patchFlag:a}}=i,o=Ve(n),[l]=i.propsOptions;let h=!1;if((r||a>0)&&!(a&16)){if(a&8){const u=i.vnode.dynamicProps;for(let c=0;c<u.length;c++){let v=u[c];const g=e[v];if(l)if(Ze(s,v))g!==s[v]&&(s[v]=g,h=!0);else{const I=Pi(v);n[I]=fs(l,o,I,g,i,!1)}else g!==s[v]&&(s[v]=g,h=!0)}}}else{Xa(i,e,n,s)&&(h=!0);let u;for(const c in o)(!e||!Ze(e,c)&&((u=zi(c))===c||!Ze(e,u)))&&(l?t&&(t[c]!==void 0||t[u]!==void 0)&&(n[c]=fs(l,o,c,void 0,i,!0)):delete n[c]);if(s!==o)for(const c in s)(!e||!Ze(e,c))&&(delete s[c],h=!0)}h&&Qt(i,"set","$attrs")}function Xa(i,e,t,r){const[n,s]=i.propsOptions;let a=!1,o;if(e)for(let l in e){if(Br(l))continue;const h=e[l];let u;n&&Ze(n,u=Pi(l))?!s||!s.includes(u)?t[u]=h:(o||(o={}))[u]=h:Qn(i.emitsOptions,l)||(!(l in r)||h!==r[l])&&(r[l]=h,a=!0)}if(s){const l=Ve(t),h=o||Je;for(let u=0;u<s.length;u++){const c=s[u];t[c]=fs(n,l,c,h[c],i,!Ze(h,c))}}return a}function fs(i,e,t,r,n,s){const a=i[t];if(a!=null){const o=Ze(a,"default");if(o&&r===void 0){const l=a.default;if(a.type!==Function&&ze(l)){const{propsDefaults:h}=n;t in h?r=h[t]:(Wi(n),r=h[t]=l.call(null,e),ki())}else r=l}a[0]&&(s&&!o?r=!1:a[1]&&(r===""||r===zi(t))&&(r=!0))}return r}function qa(i,e,t=!1){const r=e.propsCache,n=r.get(i);if(n)return n;const s=i.props,a={},o=[];let l=!1;if(!ze(i)){const u=c=>{l=!0;const[v,g]=qa(c,e,!0);yt(a,v),g&&o.push(...g)};!t&&e.mixins.length&&e.mixins.forEach(u),i.extends&&u(i.extends),i.mixins&&i.mixins.forEach(u)}if(!s&&!l)return r.set(i,Di),Di;if(De(s))for(let u=0;u<s.length;u++){const c=Pi(s[u]);Ka(c)&&(a[c]=Je)}else if(s)for(const u in s){const c=Pi(u);if(Ka(c)){const v=s[u],g=a[c]=De(v)||ze(v)?{type:v}:v;if(g){const I=Qa(Boolean,g.type),w=Qa(String,g.type);g[0]=I>-1,g[1]=w<0||I<w,(I>-1||Ze(g,"default"))&&o.push(c)}}}const h=[a,o];return r.set(i,h),h}function Ka(i){return i[0]!=="$"}function Ga(i){const e=i&&i.toString().match(/^\s*function (\w+)/);return e?e[1]:i===null?"null":""}function Ja(i,e){return Ga(i)===Ga(e)}function Qa(i,e){return De(e)?e.findIndex(t=>Ja(t,i)):ze(e)&&Ja(e,i)?0:-1}const eo=i=>i[0]==="_"||i==="$stable",us=i=>De(i)?i.map(Xt):[Xt(i)],Xf=(i,e,t)=>{const r=bf((...n)=>us(e(...n)),t);return r._c=!1,r},to=(i,e,t)=>{const r=i._ctx;for(const n in i){if(eo(n))continue;const s=i[n];if(ze(s))e[n]=Xf(n,s,r);else if(s!=null){const a=us(s);e[n]=()=>a}}},io=(i,e)=>{const t=us(e);i.slots.default=()=>t},qf=(i,e)=>{if(i.vnode.shapeFlag&32){const t=e._;t?(i.slots=Ve(e),Ur(e,"_",t)):to(e,i.slots={})}else i.slots={},e&&io(i,e);Ur(i.slots,en,1)},Kf=(i,e,t)=>{const{vnode:r,slots:n}=i;let s=!0,a=Je;if(r.shapeFlag&32){const o=e._;o?t&&o===1?s=!1:(yt(n,e),!t&&o===1&&delete n._):(s=!e.$stable,to(e,n)),a=e}else e&&(io(i,e),a={default:1});if(s)for(const o in n)!eo(o)&&!(o in a)&&delete n[o]};function Ei(i,e,t,r){const n=i.dirs,s=e&&e.dirs;for(let a=0;a<n.length;a++){const o=n[a];s&&(o.oldValue=s[a].value);let l=o.dir[r];l&&(Bi(),Pt(l,t,8,[i.el,o,i,e]),wi())}}function ro(){return{app:null,config:{isNativeTag:Ch,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Gf=0;function Jf(i,e){return function(r,n=null){n!=null&&!Et(n)&&(n=null);const s=ro(),a=new Set;let o=!1;const l=s.app={_uid:Gf++,_component:r,_props:n,_container:null,_context:s,_instance:null,version:Iu,get config(){return s.config},set config(h){},use(h,...u){return a.has(h)||(h&&ze(h.install)?(a.add(h),h.install(l,...u)):ze(h)&&(a.add(h),h(l,...u))),l},mixin(h){return s.mixins.includes(h)||s.mixins.push(h),l},component(h,u){return u?(s.components[h]=u,l):s.components[h]},directive(h,u){return u?(s.directives[h]=u,l):s.directives[h]},mount(h,u,c){if(!o){const v=ti(r,n);return v.appContext=s,u&&e?e(v,h):i(v,h,c),o=!0,l._container=h,h.__vue_app__=l,gs(v.component)||v.component.proxy}},unmount(){o&&(i(null,l._container),delete l._container.__vue_app__)},provide(h,u){return s.provides[h]=u,l}};return l}}function cs(i,e,t,r,n=!1){if(De(i)){i.forEach((v,g)=>cs(v,e&&(De(e)?e[g]:e),t,r,n));return}if(ss(r)&&!n)return;const s=r.shapeFlag&4?gs(r.component)||r.component.proxy:r.el,a=n?null:s,{i:o,r:l}=i,h=e&&e.r,u=o.refs===Je?o.refs={}:o.refs,c=o.setupState;if(h!=null&&h!==l&&(_t(h)?(u[h]=null,Ze(c,h)&&(c[h]=null)):Tt(h)&&(h.value=null)),ze(l))ui(l,o,12,[a,u]);else{const v=_t(l),g=Tt(l);if(v||g){const I=()=>{if(i.f){const w=v?u[l]:l.value;n?De(w)&&Dn(w,s):De(w)?w.includes(s)||w.push(s):v?u[l]=[s]:(l.value=[s],i.k&&(u[i.k]=l.value))}else v?(u[l]=a,Ze(c,l)&&(c[l]=a)):Tt(l)&&(l.value=a,i.k&&(u[i.k]=a))};a?(I.id=-1,kt(I,t)):I()}}}const kt=Cf;function Qf(i){return eu(i)}function eu(i,e){const t=zh();t.__VUE__=!0;const{insert:r,remove:n,patchProp:s,createElement:a,createText:o,createComment:l,setText:h,setElementText:u,parentNode:c,nextSibling:v,setScopeId:g=Ut,cloneNode:I,insertStaticContent:w}=i,p=(A,L,W,G=null,Z=null,ee=null,ue=!1,te=null,re=!!L.dynamicChildren)=>{if(A===L)return;A&&!Ci(A,L)&&(G=Ie(A),Re(A,Z,ee,!0),A=null),L.patchFlag===-2&&(re=!1,L.dynamicChildren=null);const{type:X,ref:se,shapeFlag:de}=L;switch(X){case ds:d(A,L,W,G);break;case Yt:_(A,L,W,G);break;case Jr:A==null&&T(L,W,G,ue);break;case Wt:ce(A,L,W,G,Z,ee,ue,te,re);break;default:de&1?S(A,L,W,G,Z,ee,ue,te,re):de&6?Se(A,L,W,G,Z,ee,ue,te,re):(de&64||de&128)&&X.process(A,L,W,G,Z,ee,ue,te,re,qe)}se!=null&&Z&&cs(se,A&&A.ref,ee,L||A,!L)},d=(A,L,W,G)=>{if(A==null)r(L.el=o(L.children),W,G);else{const Z=L.el=A.el;L.children!==A.children&&h(Z,L.children)}},_=(A,L,W,G)=>{A==null?r(L.el=l(L.children||""),W,G):L.el=A.el},T=(A,L,W,G)=>{[A.el,A.anchor]=w(A.children,L,W,G)},N=({el:A,anchor:L},W,G)=>{let Z;for(;A&&A!==L;)Z=v(A),r(A,W,G),A=Z;r(L,W,G)},y=({el:A,anchor:L})=>{let W;for(;A&&A!==L;)W=v(A),n(A),A=W;n(L)},S=(A,L,W,G,Z,ee,ue,te,re)=>{ue=ue||L.type==="svg",A==null?k(L,W,G,Z,ee,ue,te,re):U(A,L,Z,ee,ue,te,re)},k=(A,L,W,G,Z,ee,ue,te)=>{let re,X;const{type:se,props:de,shapeFlag:_e,transition:Te,patchFlag:ke,dirs:We}=A;if(A.el&&I!==void 0&&ke===-1)re=A.el=I(A.el);else{if(re=A.el=a(A.type,ee,de&&de.is,de),_e&8?u(re,A.children):_e&16&&$(A.children,re,null,G,Z,ee&&se!=="foreignObject",ue,te),We&&Ei(A,null,G,"created"),de){for(const Ne in de)Ne!=="value"&&!Br(Ne)&&s(re,Ne,null,de[Ne],ee,A.children,G,Z,$e);"value"in de&&s(re,"value",null,de.value),(X=de.onVnodeBeforeMount)&&qt(X,G,A)}z(re,A,A.scopeId,ue,G)}We&&Ei(A,null,G,"beforeMount");const Oe=(!Z||Z&&!Z.pendingBranch)&&Te&&!Te.persisted;Oe&&Te.beforeEnter(re),r(re,L,W),((X=de&&de.onVnodeMounted)||Oe||We)&&kt(()=>{X&&qt(X,G,A),Oe&&Te.enter(re),We&&Ei(A,null,G,"mounted")},Z)},z=(A,L,W,G,Z)=>{if(W&&g(A,W),G)for(let ee=0;ee<G.length;ee++)g(A,G[ee]);if(Z){let ee=Z.subTree;if(L===ee){const ue=Z.vnode;z(A,ue,ue.scopeId,ue.slotScopeIds,Z.parent)}}},$=(A,L,W,G,Z,ee,ue,te,re=0)=>{for(let X=re;X<A.length;X++){const se=A[X]=te?fi(A[X]):Xt(A[X]);p(null,se,L,W,G,Z,ee,ue,te)}},U=(A,L,W,G,Z,ee,ue)=>{const te=L.el=A.el;let{patchFlag:re,dynamicChildren:X,dirs:se}=L;re|=A.patchFlag&16;const de=A.props||Je,_e=L.props||Je;let Te;W&&Ti(W,!1),(Te=_e.onVnodeBeforeUpdate)&&qt(Te,W,L,A),se&&Ei(L,A,W,"beforeUpdate"),W&&Ti(W,!0);const ke=Z&&L.type!=="foreignObject";if(X?J(A.dynamicChildren,X,te,W,G,ke,ee):ue||Ae(A,L,te,null,W,G,ke,ee,!1),re>0){if(re&16)Y(te,L,de,_e,W,G,Z);else if(re&2&&de.class!==_e.class&&s(te,"class",null,_e.class,Z),re&4&&s(te,"style",de.style,_e.style,Z),re&8){const We=L.dynamicProps;for(let Oe=0;Oe<We.length;Oe++){const Ne=We[Oe],st=de[Ne],dt=_e[Ne];(dt!==st||Ne==="value")&&s(te,Ne,st,dt,Z,A.children,W,G,$e)}}re&1&&A.children!==L.children&&u(te,L.children)}else!ue&&X==null&&Y(te,L,de,_e,W,G,Z);((Te=_e.onVnodeUpdated)||se)&&kt(()=>{Te&&qt(Te,W,L,A),se&&Ei(L,A,W,"updated")},G)},J=(A,L,W,G,Z,ee,ue)=>{for(let te=0;te<L.length;te++){const re=A[te],X=L[te],se=re.el&&(re.type===Wt||!Ci(re,X)||re.shapeFlag&(6|64))?c(re.el):W;p(re,X,se,null,G,Z,ee,ue,!0)}},Y=(A,L,W,G,Z,ee,ue)=>{if(W!==G){for(const te in G){if(Br(te))continue;const re=G[te],X=W[te];re!==X&&te!=="value"&&s(A,te,X,re,ue,L.children,Z,ee,$e)}if(W!==Je)for(const te in W)!Br(te)&&!(te in G)&&s(A,te,W[te],null,ue,L.children,Z,ee,$e);"value"in G&&s(A,"value",W.value,G.value)}},ce=(A,L,W,G,Z,ee,ue,te,re)=>{const X=L.el=A?A.el:o(""),se=L.anchor=A?A.anchor:o("");let{patchFlag:de,dynamicChildren:_e,slotScopeIds:Te}=L;Te&&(te=te?te.concat(Te):Te),A==null?(r(X,W,G),r(se,W,G),$(L.children,W,se,Z,ee,ue,te,re)):de>0&&de&64&&_e&&A.dynamicChildren?(J(A.dynamicChildren,_e,W,Z,ee,ue,te),(L.key!=null||Z&&L===Z.subTree)&&no(A,L,!0)):Ae(A,L,W,se,Z,ee,ue,te,re)},Se=(A,L,W,G,Z,ee,ue,te,re)=>{L.slotScopeIds=te,A==null?L.shapeFlag&512?Z.ctx.activate(L,W,G,ue,re):Ee(L,W,G,Z,ee,ue,re):ve(A,L,re)},Ee=(A,L,W,G,Z,ee,ue)=>{const te=A.component=vu(A,G,Z);if(qr(A)&&(te.ctx.renderer=qe),gu(te),te.asyncDep){if(Z&&Z.registerDep(te,he),!A.el){const re=te.subTree=ti(Yt);_(null,re,L,W)}return}he(te,A,L,W,Z,ee,ue)},ve=(A,L,W)=>{const G=L.component=A.component;if(Ef(A,L,W))if(G.asyncDep&&!G.asyncResolved){ae(G,L,W);return}else G.next=L,Tu(G.update),G.update();else L.component=A.component,L.el=A.el,G.vnode=L},he=(A,L,W,G,Z,ee,ue)=>{const te=()=>{if(A.isMounted){let{next:se,bu:de,u:_e,parent:Te,vnode:ke}=A,We=se,Oe;Ti(A,!1),se?(se.el=ke.el,ae(A,se,ue)):se=ke,de&&Bn(de),(Oe=se.props&&se.props.onVnodeBeforeUpdate)&&qt(Oe,Te,se,ke),Ti(A,!0);const Ne=es(A),st=A.subTree;A.subTree=Ne,p(st,Ne,c(st.el),Ie(st),A,Z,ee),se.el=Ne.el,We===null&&Tf(A,Ne.el),_e&&kt(_e,Z),(Oe=se.props&&se.props.onVnodeUpdated)&&kt(()=>qt(Oe,Te,se,ke),Z)}else{let se;const{el:de,props:_e}=L,{bm:Te,m:ke,parent:We}=A,Oe=ss(L);if(Ti(A,!1),Te&&Bn(Te),!Oe&&(se=_e&&_e.onVnodeBeforeMount)&&qt(se,We,L),Ti(A,!0),de&&Ge){const Ne=()=>{A.subTree=es(A),Ge(de,A.subTree,A,Z,null)};Oe?L.type.__asyncLoader().then(()=>!A.isUnmounted&&Ne()):Ne()}else{const Ne=A.subTree=es(A);p(null,Ne,W,G,A,Z,ee),L.el=Ne.el}if(ke&&kt(ke,Z),!Oe&&(se=_e&&_e.onVnodeMounted)){const Ne=L;kt(()=>qt(se,We,Ne),Z)}L.shapeFlag&256&&A.a&&kt(A.a,Z),A.isMounted=!0,L=W=G=null}},re=A.effect=new Hn(te,()=>go(A.update),A.scope),X=A.update=re.run.bind(re);X.id=A.uid,Ti(A,!0),X()},ae=(A,L,W)=>{L.component=A;const G=A.vnode.props;A.vnode=L,A.next=null,Yf(A,L.props,G,W),Kf(A,L.children,W),Bi(),bs(void 0,A.update),wi()},Ae=(A,L,W,G,Z,ee,ue,te,re=!1)=>{const X=A&&A.children,se=A?A.shapeFlag:0,de=L.children,{patchFlag:_e,shapeFlag:Te}=L;if(_e>0){if(_e&128){Me(X,de,W,G,Z,ee,ue,te,re);return}else if(_e&256){Ye(X,de,W,G,Z,ee,ue,te,re);return}}Te&8?(se&16&&$e(X,Z,ee),de!==X&&u(W,de)):se&16?Te&16?Me(X,de,W,G,Z,ee,ue,te,re):$e(X,Z,ee,!0):(se&8&&u(W,""),Te&16&&$(de,W,G,Z,ee,ue,te,re))},Ye=(A,L,W,G,Z,ee,ue,te,re)=>{A=A||Di,L=L||Di;const X=A.length,se=L.length,de=Math.min(X,se);let _e;for(_e=0;_e<de;_e++){const Te=L[_e]=re?fi(L[_e]):Xt(L[_e]);p(A[_e],Te,W,null,Z,ee,ue,te,re)}X>se?$e(A,Z,ee,!0,!1,de):$(L,W,G,Z,ee,ue,te,re,de)},Me=(A,L,W,G,Z,ee,ue,te,re)=>{let X=0;const se=L.length;let de=A.length-1,_e=se-1;for(;X<=de&&X<=_e;){const Te=A[X],ke=L[X]=re?fi(L[X]):Xt(L[X]);if(Ci(Te,ke))p(Te,ke,W,null,Z,ee,ue,te,re);else break;X++}for(;X<=de&&X<=_e;){const Te=A[de],ke=L[_e]=re?fi(L[_e]):Xt(L[_e]);if(Ci(Te,ke))p(Te,ke,W,null,Z,ee,ue,te,re);else break;de--,_e--}if(X>de){if(X<=_e){const Te=_e+1,ke=Te<se?L[Te].el:G;for(;X<=_e;)p(null,L[X]=re?fi(L[X]):Xt(L[X]),W,ke,Z,ee,ue,te,re),X++}}else if(X>_e)for(;X<=de;)Re(A[X],Z,ee,!0),X++;else{const Te=X,ke=X,We=new Map;for(X=ke;X<=_e;X++){const E=L[X]=re?fi(L[X]):Xt(L[X]);E.key!=null&&We.set(E.key,X)}let Oe,Ne=0;const st=_e-ke+1;let dt=!1,rt=0;const ft=new Array(st);for(X=0;X<st;X++)ft[X]=0;for(X=Te;X<=de;X++){const E=A[X];if(Ne>=st){Re(E,Z,ee,!0);continue}let q;if(E.key!=null)q=We.get(E.key);else for(Oe=ke;Oe<=_e;Oe++)if(ft[Oe-ke]===0&&Ci(E,L[Oe])){q=Oe;break}q===void 0?Re(E,Z,ee,!0):(ft[q-ke]=X+1,q>=rt?rt=q:dt=!0,p(E,L[q],W,null,Z,ee,ue,te,re),Ne++)}const Mt=dt?tu(ft):Di;for(Oe=Mt.length-1,X=st-1;X>=0;X--){const E=ke+X,q=L[E],ne=E+1<se?L[E+1].el:G;ft[X]===0?p(null,q,W,ne,Z,ee,ue,te,re):dt&&(Oe<0||X!==Mt[Oe]?be(q,W,ne,2):Oe--)}}},be=(A,L,W,G,Z=null)=>{const{el:ee,type:ue,transition:te,children:re,shapeFlag:X}=A;if(X&6){be(A.component.subTree,L,W,G);return}if(X&128){A.suspense.move(L,W,G);return}if(X&64){ue.move(A,L,W,qe);return}if(ue===Wt){r(ee,L,W);for(let de=0;de<re.length;de++)be(re[de],L,W,G);r(A.anchor,L,W);return}if(ue===Jr){N(A,L,W);return}if(G!==2&&X&1&&te)if(G===0)te.beforeEnter(ee),r(ee,L,W),kt(()=>te.enter(ee),Z);else{const{leave:de,delayLeave:_e,afterLeave:Te}=te,ke=()=>r(ee,L,W),We=()=>{de(ee,()=>{ke(),Te&&Te()})};_e?_e(ee,ke,We):We()}else r(ee,L,W)},Re=(A,L,W,G=!1,Z=!1)=>{const{type:ee,props:ue,ref:te,children:re,dynamicChildren:X,shapeFlag:se,patchFlag:de,dirs:_e}=A;if(te!=null&&cs(te,null,W,A,!0),se&256){L.ctx.deactivate(A);return}const Te=se&1&&_e,ke=!ss(A);let We;if(ke&&(We=ue&&ue.onVnodeBeforeUnmount)&&qt(We,L,A),se&6)tt(A.component,W,G);else{if(se&128){A.suspense.unmount(W,G);return}Te&&Ei(A,null,L,"beforeUnmount"),se&64?A.type.remove(A,L,W,Z,qe,G):X&&(ee!==Wt||de>0&&de&64)?$e(X,L,W,!1,!0):(ee===Wt&&de&(128|256)||!Z&&se&16)&&$e(re,L,W),G&&Be(A)}(ke&&(We=ue&&ue.onVnodeUnmounted)||Te)&&kt(()=>{We&&qt(We,L,A),Te&&Ei(A,null,L,"unmounted")},W)},Be=A=>{const{type:L,el:W,anchor:G,transition:Z}=A;if(L===Wt){ht(W,G);return}if(L===Jr){y(A);return}const ee=()=>{n(W),Z&&!Z.persisted&&Z.afterLeave&&Z.afterLeave()};if(A.shapeFlag&1&&Z&&!Z.persisted){const{leave:ue,delayLeave:te}=Z,re=()=>ue(W,ee);te?te(A.el,ee,re):re()}else ee()},ht=(A,L)=>{let W;for(;A!==L;)W=v(A),n(A),A=W;n(L)},tt=(A,L,W)=>{const{bum:G,scope:Z,update:ee,subTree:ue,um:te}=A;G&&Bn(G),Z.stop(),ee&&(ee.active=!1,Re(ue,A,L,W)),te&&kt(te,L),kt(()=>{A.isUnmounted=!0},L),L&&L.pendingBranch&&!L.isUnmounted&&A.asyncDep&&!A.asyncResolved&&A.suspenseId===L.pendingId&&(L.deps--,L.deps===0&&L.resolve())},$e=(A,L,W,G=!1,Z=!1,ee=0)=>{for(let ue=ee;ue<A.length;ue++)Re(A[ue],L,W,G,Z)},Ie=A=>A.shapeFlag&6?Ie(A.component.subTree):A.shapeFlag&128?A.suspense.next():v(A.anchor||A.el),it=(A,L,W)=>{A==null?L._vnode&&Re(L._vnode,null,null,!0):p(L._vnode||null,A,L,null,null,null,W),_o(),L._vnode=A},qe={p,um:Re,m:be,r:Be,mt:Ee,mc:$,pc:Ae,pbc:J,n:Ie,o:i};let Ue,Ge;return e&&([Ue,Ge]=e(qe)),{render:it,hydrate:Ue,createApp:Jf(it,Ue)}}function Ti({effect:i,update:e},t){i.allowRecurse=e.allowRecurse=t}function no(i,e,t=!1){const r=i.children,n=e.children;if(De(r)&&De(n))for(let s=0;s<r.length;s++){const a=r[s];let o=n[s];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=n[s]=fi(n[s]),o.el=a.el),t||no(a,o))}}function tu(i){const e=i.slice(),t=[0];let r,n,s,a,o;const l=i.length;for(r=0;r<l;r++){const h=i[r];if(h!==0){if(n=t[t.length-1],i[n]<h){e[r]=n,t.push(r);continue}for(s=0,a=t.length-1;s<a;)o=s+a>>1,i[t[o]]<h?s=o+1:a=o;h<i[t[s]]&&(s>0&&(e[r]=t[s-1]),t[s]=r)}}for(s=t.length,a=t[s-1];s-- >0;)t[s]=a,a=e[a];return t}const iu=i=>i.__isTeleport,ru=Symbol(),Wt=Symbol(void 0),ds=Symbol(void 0),Yt=Symbol(void 0),Jr=Symbol(void 0),hr=[];let Si=null;function nu(i=!1){hr.push(Si=i?null:[])}function su(){hr.pop(),Si=hr[hr.length-1]||null}let Qr=1;function so(i){Qr+=i}function ao(i){return i.dynamicChildren=Qr>0?Si||Di:null,su(),Qr>0&&Si&&Si.push(i),i}function ov(i,e,t,r,n,s){return ao(lo(i,e,t,r,n,s,!0))}function au(i,e,t,r,n){return ao(ti(i,e,t,r,n,!0))}function ou(i){return i?i.__v_isVNode===!0:!1}function Ci(i,e){return i.type===e.type&&i.key===e.key}const en="__vInternal",oo=({key:i})=>i!=null?i:null,tn=({ref:i,ref_key:e,ref_for:t})=>i!=null?_t(i)||Tt(i)||ze(i)?{i:Vt,r:i,k:e,f:!!t}:i:null;function lo(i,e=null,t=null,r=0,n=null,s=i===Wt?0:1,a=!1,o=!1){const l={__v_isVNode:!0,__v_skip:!0,type:i,props:e,key:e&&oo(e),ref:e&&tn(e),scopeId:Ma,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:n,dynamicChildren:null,appContext:null};return o?(ps(l,t),s&128&&i.normalize(l)):t&&(l.shapeFlag|=_t(t)?8:16),Qr>0&&!a&&Si&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&Si.push(l),l}const ti=lu;function lu(i,e=null,t=null,r=0,n=null,s=!1){if((!i||i===ru)&&(i=Yt),ou(i)){const o=Ui(i,e,!0);return t&&ps(o,t),o}if(bu(i)&&(i=i.__vccOpts),e){e=hu(e);let{class:o,style:l}=e;o&&!_t(o)&&(e.class=Rn(o)),Et(l)&&(Oa(l)&&!De(l)&&(l=yt({},l)),e.style=On(l))}const a=_t(i)?1:Sf(i)?128:iu(i)?64:Et(i)?4:ze(i)?2:0;return lo(i,e,t,r,n,a,s,!0)}function hu(i){return i?Oa(i)||en in i?yt({},i):i:null}function Ui(i,e,t=!1){const{props:r,ref:n,patchFlag:s,children:a}=i,o=e?uu(r||{},e):r;return{__v_isVNode:!0,__v_skip:!0,type:i.type,props:o,key:o&&oo(o),ref:e&&e.ref?t&&n?De(n)?n.concat(tn(e)):[n,tn(e)]:tn(e):n,scopeId:i.scopeId,slotScopeIds:i.slotScopeIds,children:a,target:i.target,targetAnchor:i.targetAnchor,staticCount:i.staticCount,shapeFlag:i.shapeFlag,patchFlag:e&&i.type!==Wt?s===-1?16:s|16:s,dynamicProps:i.dynamicProps,dynamicChildren:i.dynamicChildren,appContext:i.appContext,dirs:i.dirs,transition:i.transition,component:i.component,suspense:i.suspense,ssContent:i.ssContent&&Ui(i.ssContent),ssFallback:i.ssFallback&&Ui(i.ssFallback),el:i.el,anchor:i.anchor}}function fu(i=" ",e=0){return ti(ds,null,i,e)}function lv(i="",e=!1){return e?(nu(),au(Yt,null,i)):ti(Yt,null,i)}function Xt(i){return i==null||typeof i=="boolean"?ti(Yt):De(i)?ti(Wt,null,i.slice()):typeof i=="object"?fi(i):ti(ds,null,String(i))}function fi(i){return i.el===null||i.memo?i:Ui(i)}function ps(i,e){let t=0;const{shapeFlag:r}=i;if(e==null)e=null;else if(De(e))t=16;else if(typeof e=="object")if(r&(1|64)){const n=e.default;n&&(n._c&&(n._d=!1),ps(i,n()),n._c&&(n._d=!0));return}else{t=32;const n=e._;!n&&!(en in e)?e._ctx=Vt:n===3&&Vt&&(Vt.slots._===1?e._=1:(e._=2,i.patchFlag|=1024))}else ze(e)?(e={default:e,_ctx:Vt},t=32):(e=String(e),r&64?(t=16,e=[fu(e)]):t=8);i.children=e,i.shapeFlag|=t}function uu(...i){const e={};for(let t=0;t<i.length;t++){const r=i[t];for(const n in r)if(n==="class")e.class!==r.class&&(e.class=Rn([e.class,r.class]));else if(n==="style")e.style=On([e.style,r.style]);else if(zr(n)){const s=e[n],a=r[n];s!==a&&!(De(s)&&s.includes(a))&&(e[n]=s?[].concat(s,a):a)}else n!==""&&(e[n]=r[n])}return e}function qt(i,e,t,r=null){Pt(i,e,7,[t,r])}const vs=i=>i?fo(i)?gs(i)||i.proxy:vs(i.parent):null,rn=yt(Object.create(null),{$:i=>i,$el:i=>i.vnode.el,$data:i=>i.data,$props:i=>i.props,$attrs:i=>i.attrs,$slots:i=>i.slots,$refs:i=>i.refs,$parent:i=>vs(i.parent),$root:i=>vs(i.root),$emit:i=>i.emit,$options:i=>Va(i),$forceUpdate:i=>()=>go(i.update),$nextTick:i=>xu.bind(i.proxy),$watch:i=>Au.bind(i)}),cu={get({_:i},e){const{ctx:t,setupState:r,data:n,props:s,accessCache:a,type:o,appContext:l}=i;let h;if(e[0]!=="$"){const g=a[e];if(g!==void 0)switch(g){case 1:return r[e];case 2:return n[e];case 4:return t[e];case 3:return s[e]}else{if(r!==Je&&Ze(r,e))return a[e]=1,r[e];if(n!==Je&&Ze(n,e))return a[e]=2,n[e];if((h=i.propsOptions[0])&&Ze(h,e))return a[e]=3,s[e];if(t!==Je&&Ze(t,e))return a[e]=4,t[e];ls&&(a[e]=0)}}const u=rn[e];let c,v;if(u)return e==="$attrs"&&Nt(i,"get",e),u(i);if((c=o.__cssModules)&&(c=c[e]))return c;if(t!==Je&&Ze(t,e))return a[e]=4,t[e];if(v=l.config.globalProperties,Ze(v,e))return v[e]},set({_:i},e,t){const{data:r,setupState:n,ctx:s}=i;if(n!==Je&&Ze(n,e))n[e]=t;else if(r!==Je&&Ze(r,e))r[e]=t;else if(Ze(i.props,e))return!1;return e[0]==="$"&&e.slice(1)in i?!1:(s[e]=t,!0)},has({_:{data:i,setupState:e,accessCache:t,ctx:r,appContext:n,propsOptions:s}},a){let o;return!!t[a]||i!==Je&&Ze(i,a)||e!==Je&&Ze(e,a)||(o=s[0])&&Ze(o,a)||Ze(r,a)||Ze(rn,a)||Ze(n.config.globalProperties,a)}},du=ro();let pu=0;function vu(i,e,t){const r=i.type,n=(e?e.appContext:i.appContext)||du,s={uid:pu++,vnode:i,type:r,parent:e,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,scope:new Mh(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(n.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:qa(r,n),emitsOptions:za(r,n),emit:null,emitted:null,propsDefaults:Je,inheritAttrs:r.inheritAttrs,ctx:Je,data:Je,props:Je,attrs:Je,slots:Je,refs:Je,setupState:Je,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=_f.bind(null,s),i.ce&&i.ce(s),s}let gt=null;const ho=()=>gt||Vt,Wi=i=>{gt=i,i.scope.on()},ki=()=>{gt&&gt.scope.off(),gt=null};function fo(i){return i.vnode.shapeFlag&4}let nn=!1;function gu(i,e=!1){nn=e;const{props:t,children:r}=i.vnode,n=fo(i);Vf(i,t,n,e),qf(i,r);const s=n?mu(i,e):void 0;return nn=!1,s}function mu(i,e){const t=i.type;i.accessCache=Object.create(null),i.proxy=Ra(new Proxy(i.ctx,cu));const{setup:r}=t;if(r){const n=i.setupContext=r.length>1?_u(i):null;Wi(i),Bi();const s=ui(r,i,0,[i.props,n]);if(wi(),ki(),ua(s)){if(s.then(ki,ki),e)return s.then(a=>{uo(i,a,e)}).catch(a=>{sn(a,i,0)});i.asyncDep=s}else uo(i,s,e)}else po(i,e)}function uo(i,e,t){ze(e)?i.type.__ssrInlineRender?i.ssrRender=e:i.render=e:Et(e)&&(i.setupState=Pa(e)),po(i,t)}let co;function po(i,e,t){const r=i.type;if(!i.render){if(!e&&co&&!r.render){const n=r.template;if(n){const{isCustomElement:s,compilerOptions:a}=i.appContext.config,{delimiters:o,compilerOptions:l}=r,h=yt(yt({isCustomElement:s,delimiters:o},a),l);r.render=co(n,h)}}i.render=r.render||Ut}Wi(i),Bi(),Wf(i),wi(),ki()}function yu(i){return new Proxy(i.attrs,{get(e,t){return Nt(i,"get","$attrs"),e[t]}})}function _u(i){const e=r=>{i.exposed=r||{}};let t;return{get attrs(){return t||(t=yu(i))},slots:i.slots,emit:i.emit,expose:e}}function gs(i){if(i.exposed)return i.exposeProxy||(i.exposeProxy=new Proxy(Pa(Ra(i.exposed)),{get(e,t){if(t in e)return e[t];if(t in rn)return rn[t](i)}}))}function bu(i){return ze(i)&&"__vccOpts"in i}function ui(i,e,t,r){let n;try{n=r?i(...r):i()}catch(s){sn(s,e,t)}return n}function Pt(i,e,t,r){if(ze(i)){const s=ui(i,e,t,r);return s&&ua(s)&&s.catch(a=>{sn(a,e,t)}),s}const n=[];for(let s=0;s<i.length;s++)n.push(Pt(i[s],e,t,r));return n}function sn(i,e,t,r=!0){const n=e?e.vnode:null;if(e){let s=e.parent;const a=e.proxy,o=t;for(;s;){const h=s.ec;if(h){for(let u=0;u<h.length;u++)if(h[u](i,a,o)===!1)return}s=s.parent}const l=e.appContext.config.errorHandler;if(l){ui(l,null,10,[i,a,o]);return}}wu(i,t,n,r)}function wu(i,e,t,r=!0){console.error(i)}let an=!1,ms=!1;const Ot=[];let ii=0;const fr=[];let ur=null,ji=0;const cr=[];let ci=null,Hi=0;const vo=Promise.resolve();let ys=null,_s=null;function xu(i){const e=ys||vo;return i?e.then(this?i.bind(this):i):e}function Eu(i){let e=ii+1,t=Ot.length;for(;e<t;){const r=e+t>>>1;dr(Ot[r])<i?e=r+1:t=r}return e}function go(i){(!Ot.length||!Ot.includes(i,an&&i.allowRecurse?ii+1:ii))&&i!==_s&&(i.id==null?Ot.push(i):Ot.splice(Eu(i.id),0,i),mo())}function mo(){!an&&!ms&&(ms=!0,ys=vo.then(bo))}function Tu(i){const e=Ot.indexOf(i);e>ii&&Ot.splice(e,1)}function yo(i,e,t,r){De(i)?t.push(...i):(!e||!e.includes(i,i.allowRecurse?r+1:r))&&t.push(i),mo()}function Su(i){yo(i,ur,fr,ji)}function Cu(i){yo(i,ci,cr,Hi)}function bs(i,e=null){if(fr.length){for(_s=e,ur=[...new Set(fr)],fr.length=0,ji=0;ji<ur.length;ji++)ur[ji]();ur=null,ji=0,_s=null,bs(i,e)}}function _o(i){if(cr.length){const e=[...new Set(cr)];if(cr.length=0,ci){ci.push(...e);return}for(ci=e,ci.sort((t,r)=>dr(t)-dr(r)),Hi=0;Hi<ci.length;Hi++)ci[Hi]();ci=null,Hi=0}}const dr=i=>i.id==null?1/0:i.id;function bo(i){ms=!1,an=!0,bs(i),Ot.sort((t,r)=>dr(t)-dr(r));const e=Ut;try{for(ii=0;ii<Ot.length;ii++){const t=Ot[ii];t&&t.active!==!1&&ui(t,null,14)}}finally{ii=0,Ot.length=0,_o(),an=!1,ys=null,(Ot.length||fr.length||cr.length)&&bo(i)}}function ku(i,e){return xs(i,null,{flush:"post"})}const wo={};function ws(i,e,t){return xs(i,e,t)}function xs(i,e,{immediate:t,deep:r,flush:n,onTrack:s,onTrigger:a}=Je){const o=gt;let l,h=!1,u=!1;if(Tt(i)?(l=()=>i.value,h=!!i._shallow):Fi(i)?(l=()=>i,r=!0):De(i)?(u=!0,h=i.some(Fi),l=()=>i.map(d=>{if(Tt(d))return d.value;if(Fi(d))return $i(d);if(ze(d))return ui(d,o,2)})):ze(i)?e?l=()=>ui(i,o,2):l=()=>{if(!(o&&o.isUnmounted))return c&&c(),Pt(i,o,3,[v])}:l=Ut,e&&r){const d=l;l=()=>$i(d())}let c,v=d=>{c=p.onStop=()=>{ui(d,o,4)}};if(nn)return v=Ut,e?t&&Pt(e,o,3,[l(),u?[]:void 0,v]):l(),Ut;let g=u?[]:wo;const I=()=>{if(!!p.active)if(e){const d=p.run();(r||h||(u?d.some((_,T)=>sr(_,g[T])):sr(d,g)))&&(c&&c(),Pt(e,o,3,[d,g===wo?void 0:g,v]),g=d)}else p.run()};I.allowRecurse=!!e;let w;n==="sync"?w=I:n==="post"?w=()=>kt(I,o&&o.suspense):w=()=>{!o||o.isMounted?Su(I):I()};const p=new Hn(l,w);return e?t?I():g=p.run():n==="post"?kt(p.run.bind(p),o&&o.suspense):p.run(),()=>{p.stop(),o&&o.scope&&Dn(o.scope.effects,p)}}function Au(i,e,t){const r=this.proxy,n=_t(i)?i.includes(".")?xo(r,i):()=>r[i]:i.bind(r,r);let s;ze(e)?s=e:(s=e.handler,t=e);const a=gt;Wi(this);const o=xs(n,s.bind(r),t);return a?Wi(a):ki(),o}function xo(i,e){const t=e.split(".");return()=>{let r=i;for(let n=0;n<t.length&&r;n++)r=r[t[n]];return r}}function $i(i,e){if(!Et(i)||i.__v_skip||(e=e||new Set,e.has(i)))return i;if(e.add(i),Tt(i))$i(i.value,e);else if(De(i))for(let t=0;t<i.length;t++)$i(i[t],e);else if(Ih(i)||nr(i))i.forEach(t=>{$i(t,e)});else if(Rh(i))for(const t in i)$i(i[t],e);return i}const Iu="3.2.26",Nu="http://www.w3.org/2000/svg",Zi=typeof document!="undefined"?document:null,Eo=new Map,Ou={insert:(i,e,t)=>{e.insertBefore(i,t||null)},remove:i=>{const e=i.parentNode;e&&e.removeChild(i)},createElement:(i,e,t,r)=>{const n=e?Zi.createElementNS(Nu,i):Zi.createElement(i,t?{is:t}:void 0);return i==="select"&&r&&r.multiple!=null&&n.setAttribute("multiple",r.multiple),n},createText:i=>Zi.createTextNode(i),createComment:i=>Zi.createComment(i),setText:(i,e)=>{i.nodeValue=e},setElementText:(i,e)=>{i.textContent=e},parentNode:i=>i.parentNode,nextSibling:i=>i.nextSibling,querySelector:i=>Zi.querySelector(i),setScopeId(i,e){i.setAttribute(e,"")},cloneNode(i){const e=i.cloneNode(!0);return"_value"in i&&(e._value=i._value),e},insertStaticContent(i,e,t,r){const n=t?t.previousSibling:e.lastChild;let s=Eo.get(i);if(!s){const a=Zi.createElement("template");if(a.innerHTML=r?`<svg>${i}</svg>`:i,s=a.content,r){const o=s.firstChild;for(;o.firstChild;)s.appendChild(o.firstChild);s.removeChild(o)}Eo.set(i,s)}return e.insertBefore(s.cloneNode(!0),t),[n?n.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}};function Ru(i,e,t){const r=i._vtc;r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?i.removeAttribute("class"):t?i.setAttribute("class",e):i.className=e}function Lu(i,e,t){const r=i.style,n=_t(t);if(t&&!n){for(const s in t)Es(r,s,t[s]);if(e&&!_t(e))for(const s in e)t[s]==null&&Es(r,s,"")}else{const s=r.display;n?e!==t&&(r.cssText=t):e&&i.removeAttribute("style"),"_vod"in i&&(r.display=s)}}const To=/\s*!important$/;function Es(i,e,t){if(De(t))t.forEach(r=>Es(i,e,r));else if(e.startsWith("--"))i.setProperty(e,t);else{const r=Du(i,e);To.test(t)?i.setProperty(zi(r),t.replace(To,""),"important"):i[r]=t}}const So=["Webkit","Moz","ms"],Ts={};function Du(i,e){const t=Ts[e];if(t)return t;let r=Pi(e);if(r!=="filter"&&r in i)return Ts[e]=r;r=ca(r);for(let n=0;n<So.length;n++){const s=So[n]+r;if(s in i)return Ts[e]=s}return e}const Co="http://www.w3.org/1999/xlink";function Pu(i,e,t,r,n){if(r&&e.startsWith("xlink:"))t==null?i.removeAttributeNS(Co,e.slice(6,e.length)):i.setAttributeNS(Co,e,t);else{const s=xh(e);t==null||s&&!fa(t)?i.removeAttribute(e):i.setAttribute(e,s?"":t)}}function zu(i,e,t,r,n,s,a){if(e==="innerHTML"||e==="textContent"){r&&a(r,n,s),i[e]=t==null?"":t;return}if(e==="value"&&i.tagName!=="PROGRESS"&&!i.tagName.includes("-")){i._value=t;const o=t==null?"":t;(i.value!==o||i.tagName==="OPTION")&&(i.value=o),t==null&&i.removeAttribute(e);return}if(t===""||t==null){const o=typeof i[e];if(o==="boolean"){i[e]=fa(t);return}else if(t==null&&o==="string"){i[e]="",i.removeAttribute(e);return}else if(o==="number"){try{i[e]=0}catch{}i.removeAttribute(e);return}}try{i[e]=t}catch{}}let on=Date.now,ko=!1;if(typeof window!="undefined"){on()>document.createEvent("Event").timeStamp&&(on=()=>performance.now());const i=navigator.userAgent.match(/firefox\/(\d+)/i);ko=!!(i&&Number(i[1])<=53)}let Ss=0;const Mu=Promise.resolve(),Bu=()=>{Ss=0},Fu=()=>Ss||(Mu.then(Bu),Ss=on());function Uu(i,e,t,r){i.addEventListener(e,t,r)}function Wu(i,e,t,r){i.removeEventListener(e,t,r)}function ju(i,e,t,r,n=null){const s=i._vei||(i._vei={}),a=s[e];if(r&&a)a.value=r;else{const[o,l]=Hu(e);if(r){const h=s[e]=$u(r,n);Uu(i,o,h,l)}else a&&(Wu(i,o,a,l),s[e]=void 0)}}const Ao=/(?:Once|Passive|Capture)$/;function Hu(i){let e;if(Ao.test(i)){e={};let t;for(;t=i.match(Ao);)i=i.slice(0,i.length-t[0].length),e[t[0].toLowerCase()]=!0}return[zi(i.slice(2)),e]}function $u(i,e){const t=r=>{const n=r.timeStamp||on();(ko||n>=t.attached-1)&&Pt(Zu(r,t.value),e,5,[r])};return t.value=i,t.attached=Fu(),t}function Zu(i,e){if(De(e)){const t=i.stopImmediatePropagation;return i.stopImmediatePropagation=()=>{t.call(i),i._stopped=!0},e.map(r=>n=>!n._stopped&&r(n))}else return e}const Io=/^on[a-z]/,Vu=(i,e,t,r,n=!1,s,a,o,l)=>{e==="class"?Ru(i,r,n):e==="style"?Lu(i,t,r):zr(e)?Ln(e)||ju(i,e,t,r,a):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Yu(i,e,r,n))?zu(i,e,r,s,a,o,l):(e==="true-value"?i._trueValue=r:e==="false-value"&&(i._falseValue=r),Pu(i,e,r,n))};function Yu(i,e,t,r){return r?!!(e==="innerHTML"||e==="textContent"||e in i&&Io.test(e)&&ze(t)):e==="spellcheck"||e==="draggable"||e==="form"||e==="list"&&i.tagName==="INPUT"||e==="type"&&i.tagName==="TEXTAREA"||Io.test(e)&&_t(t)?!1:e in i}function hv(i){const e=ho();if(!e)return;const t=()=>Cs(e.subTree,i(e.proxy));ku(t),as(()=>{const r=new MutationObserver(t);r.observe(e.subTree.el.parentNode,{childList:!0}),os(()=>r.disconnect())})}function Cs(i,e){if(i.shapeFlag&128){const t=i.suspense;i=t.activeBranch,t.pendingBranch&&!t.isHydrating&&t.effects.push(()=>{Cs(t.activeBranch,e)})}for(;i.component;)i=i.component.subTree;if(i.shapeFlag&1&&i.el)No(i.el,e);else if(i.type===Wt)i.children.forEach(t=>Cs(t,e));else if(i.type===Jr){let{el:t,anchor:r}=i;for(;t&&(No(t,e),t!==r);)t=t.nextSibling}}function No(i,e){if(i.nodeType===1){const t=i.style;for(const r in e)t.setProperty(`--${r}`,e[r])}}const Xu={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};Nf.props;const qu=yt({patchProp:Vu},Ou);let Oo;function Ku(){return Oo||(Oo=Qf(qu))}const fv=(...i)=>{const e=Ku().createApp(...i),{mount:t}=e;return e.mount=r=>{const n=Gu(r);if(!n)return;const s=e._component;!ze(s)&&!s.render&&!s.template&&(s.template=n.innerHTML),n.innerHTML="";const a=t(n,!1,n instanceof SVGElement);return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),a},e};function Gu(i){return _t(i)?document.querySelector(i):i}var Kt=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function di(i){throw new Error('Could not dynamically require "'+i+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ks={exports:{}},Ro={exports:{}},Ju=void 0,Lo=function(i){return i!==Ju&&i!==null},Qu=Lo,ec={object:!0,function:!0,undefined:!0},tc=function(i){return Qu(i)?hasOwnProperty.call(ec,typeof i):!1},ic=tc,rc=function(i){if(!ic(i))return!1;try{return i.constructor?i.constructor.prototype===i:!1}catch{return!1}},nc=rc,sc=function(i){if(typeof i!="function"||!hasOwnProperty.call(i,"length"))return!1;try{if(typeof i.length!="number"||typeof i.call!="function"||typeof i.apply!="function")return!1}catch{return!1}return!nc(i)},ac=sc,oc=/^\s*class[\s{/}]/,lc=Function.prototype.toString,hc=function(i){return!(!ac(i)||oc.test(lc.call(i)))},fc=function(){var i=Object.assign,e;return typeof i!="function"?!1:(e={foo:"raz"},i(e,{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")},uc=function(){try{return Object.keys("primitive"),!0}catch{return!1}},cc=function(){},dc=cc(),As=function(i){return i!==dc&&i!==null},pc=As,vc=Object.keys,gc=function(i){return vc(pc(i)?Object(i):i)},mc=uc()?Object.keys:gc,yc=As,_c=function(i){if(!yc(i))throw new TypeError("Cannot use null or undefined");return i},bc=mc,wc=_c,xc=Math.max,Ec=function(i,e){var t,r,n=xc(arguments.length,2),s;for(i=Object(wc(i)),s=function(a){try{i[a]=e[a]}catch(o){t||(t=o)}},r=1;r<n;++r)e=arguments[r],bc(e).forEach(s);if(t!==void 0)throw t;return i},Tc=fc()?Object.assign:Ec,Sc=As,Cc=Array.prototype.forEach,kc=Object.create,Ac=function(i,e){var t;for(t in i)e[t]=i[t]},Ic=function(i){var e=kc(null);return Cc.call(arguments,function(t){!Sc(t)||Ac(Object(t),e)}),e},Is="razdwatrzy",Nc=function(){return typeof Is.contains!="function"?!1:Is.contains("dwa")===!0&&Is.contains("foo")===!1},Oc=String.prototype.indexOf,Rc=function(i){return Oc.call(this,i,arguments[1])>-1},Lc=Nc()?String.prototype.contains:Rc,ln=Lo,Do=hc,Po=Tc,zo=Ic,pr=Lc,Dc=Ro.exports=function(i,e){var t,r,n,s,a;return arguments.length<2||typeof i!="string"?(s=e,e=i,i=null):s=arguments[2],ln(i)?(t=pr.call(i,"c"),r=pr.call(i,"e"),n=pr.call(i,"w")):(t=n=!0,r=!1),a={value:e,configurable:t,enumerable:r,writable:n},s?Po(zo(s),a):a};Dc.gs=function(i,e,t){var r,n,s,a;return typeof i!="string"?(s=t,t=e,e=i,i=null):s=arguments[3],ln(e)?Do(e)?ln(t)?Do(t)||(s=t,t=void 0):t=void 0:(s=e,e=t=void 0):e=void 0,ln(i)?(r=pr.call(i,"c"),n=pr.call(i,"e")):(r=!0,n=!1),a={get:e,set:t,configurable:r,enumerable:n},s?Po(zo(s),a):a};var Pc=function(i){if(typeof i!="function")throw new TypeError(i+" is not a function");return i};(function(i,e){var t=Ro.exports,r=Pc,n=Function.prototype.apply,s=Function.prototype.call,a=Object.create,o=Object.defineProperty,l=Object.defineProperties,h=Object.prototype.hasOwnProperty,u={configurable:!0,enumerable:!1,writable:!0},c,v,g,I,w,p,d;c=function(_,T){var N;return r(T),h.call(this,"__ee__")?N=this.__ee__:(N=u.value=a(null),o(this,"__ee__",u),u.value=null),N[_]?typeof N[_]=="object"?N[_].push(T):N[_]=[N[_],T]:N[_]=T,this},v=function(_,T){var N,y;return r(T),y=this,c.call(this,_,N=function(){g.call(y,_,N),n.call(T,this,arguments)}),N.__eeOnceListener__=T,this},g=function(_,T){var N,y,S,k;if(r(T),!h.call(this,"__ee__"))return this;if(N=this.__ee__,!N[_])return this;if(y=N[_],typeof y=="object")for(k=0;S=y[k];++k)(S===T||S.__eeOnceListener__===T)&&(y.length===2?N[_]=y[k?0:1]:y.splice(k,1));else(y===T||y.__eeOnceListener__===T)&&delete N[_];return this},I=function(_){var T,N,y,S,k;if(!!h.call(this,"__ee__")&&(S=this.__ee__[_],!!S))if(typeof S=="object"){for(N=arguments.length,k=new Array(N-1),T=1;T<N;++T)k[T-1]=arguments[T];for(S=S.slice(),T=0;y=S[T];++T)n.call(y,this,k)}else switch(arguments.length){case 1:s.call(S,this);break;case 2:s.call(S,this,arguments[1]);break;case 3:s.call(S,this,arguments[1],arguments[2]);break;default:for(N=arguments.length,k=new Array(N-1),T=1;T<N;++T)k[T-1]=arguments[T];n.call(S,this,k)}},w={on:c,once:v,off:g,emit:I},p={on:t(c),once:t(v),off:t(g),emit:t(I)},d=l({},p),i.exports=e=function(_){return _==null?a(d):l(Object(_),p)},e.methods=w})(ks,ks.exports);var Gt=ks.exports,pi={},Ai={};function Ns(i,e){return e===void 0&&(e=Object),e&&typeof e.freeze=="function"?e.freeze(i):i}var Mo=Ns({HTML:"text/html",isHTML:function(i){return i===Mo.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),Bo=Ns({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(i){return i===Bo.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});Ai.freeze=Ns;Ai.MIME_TYPE=Mo;Ai.NAMESPACE=Bo;var zc=Ai,vr=zc.NAMESPACE;function Mc(i){return i!==""}function Bc(i){return i?i.split(/[\t\n\f\r ]+/).filter(Mc):[]}function Fc(i,e){return i.hasOwnProperty(e)||(i[e]=!0),i}function Fo(i){if(!i)return[];var e=Bc(i);return Object.keys(e.reduce(Fc,{}))}function Uc(i){return function(e){return i&&i.indexOf(e)!==-1}}function gr(i,e){for(var t in i)e[t]=i[t]}function At(i,e){var t=i.prototype;if(!(t instanceof e)){let r=function(){};r.prototype=e.prototype,r=new r,gr(t,r),i.prototype=t=r}t.constructor!=i&&(typeof i!="function"&&console.error("unknown Class:"+i),t.constructor=i)}var It={},jt=It.ELEMENT_NODE=1,Vi=It.ATTRIBUTE_NODE=2,hn=It.TEXT_NODE=3,Uo=It.CDATA_SECTION_NODE=4,Wo=It.ENTITY_REFERENCE_NODE=5,Wc=It.ENTITY_NODE=6,jo=It.PROCESSING_INSTRUCTION_NODE=7,Ho=It.COMMENT_NODE=8,$o=It.DOCUMENT_NODE=9,Zo=It.DOCUMENT_TYPE_NODE=10,ri=It.DOCUMENT_FRAGMENT_NODE=11,jc=It.NOTATION_NODE=12,bt={},vt={};bt.INDEX_SIZE_ERR=(vt[1]="Index size error",1);bt.DOMSTRING_SIZE_ERR=(vt[2]="DOMString size error",2);var Hc=bt.HIERARCHY_REQUEST_ERR=(vt[3]="Hierarchy request error",3);bt.WRONG_DOCUMENT_ERR=(vt[4]="Wrong document",4);bt.INVALID_CHARACTER_ERR=(vt[5]="Invalid character",5);bt.NO_DATA_ALLOWED_ERR=(vt[6]="No data allowed",6);bt.NO_MODIFICATION_ALLOWED_ERR=(vt[7]="No modification allowed",7);var $c=bt.NOT_FOUND_ERR=(vt[8]="Not found",8);bt.NOT_SUPPORTED_ERR=(vt[9]="Not supported",9);var Vo=bt.INUSE_ATTRIBUTE_ERR=(vt[10]="Attribute in use",10);bt.INVALID_STATE_ERR=(vt[11]="Invalid state",11);bt.SYNTAX_ERR=(vt[12]="Syntax error",12);bt.INVALID_MODIFICATION_ERR=(vt[13]="Invalid modification",13);bt.NAMESPACE_ERR=(vt[14]="Invalid namespace",14);bt.INVALID_ACCESS_ERR=(vt[15]="Invalid access",15);function Ii(i,e){if(e instanceof Error)var t=e;else t=this,Error.call(this,vt[i]),this.message=vt[i],Error.captureStackTrace&&Error.captureStackTrace(this,Ii);return t.code=i,e&&(this.message=this.message+": "+e),t}Ii.prototype=Error.prototype;gr(bt,Ii);function ni(){}ni.prototype={length:0,item:function(i){return this[i]||null},toString:function(i,e){for(var t=[],r=0;r<this.length;r++)Xi(this[r],t,i,e);return t.join("")}};function Yi(i,e){this._node=i,this._refresh=e,Os(this)}function Os(i){var e=i._node._inc||i._node.ownerDocument._inc;if(i._inc!=e){var t=i._refresh(i._node);ol(i,"length",t.length),gr(t,i),i._inc=e}}Yi.prototype.item=function(i){return Os(this),this[i]};At(Yi,ni);function fn(){}function Yo(i,e){for(var t=i.length;t--;)if(i[t]===e)return t}function Xo(i,e,t,r){if(r?e[Yo(e,r)]=t:e[e.length++]=t,i){t.ownerElement=i;var n=i.ownerDocument;n&&(r&&Jo(n,i,r),Zc(n,i,t))}}function qo(i,e,t){var r=Yo(e,t);if(r>=0){for(var n=e.length-1;r<n;)e[r]=e[++r];if(e.length=n,i){var s=i.ownerDocument;s&&(Jo(s,i,t),t.ownerElement=null)}}else throw Ii($c,new Error(i.tagName+"@"+t))}fn.prototype={length:0,item:ni.prototype.item,getNamedItem:function(i){for(var e=this.length;e--;){var t=this[e];if(t.nodeName==i)return t}},setNamedItem:function(i){var e=i.ownerElement;if(e&&e!=this._ownerElement)throw new Ii(Vo);var t=this.getNamedItem(i.nodeName);return Xo(this._ownerElement,this,i,t),t},setNamedItemNS:function(i){var e=i.ownerElement,t;if(e&&e!=this._ownerElement)throw new Ii(Vo);return t=this.getNamedItemNS(i.namespaceURI,i.localName),Xo(this._ownerElement,this,i,t),t},removeNamedItem:function(i){var e=this.getNamedItem(i);return qo(this._ownerElement,this,e),e},removeNamedItemNS:function(i,e){var t=this.getNamedItemNS(i,e);return qo(this._ownerElement,this,t),t},getNamedItemNS:function(i,e){for(var t=this.length;t--;){var r=this[t];if(r.localName==e&&r.namespaceURI==i)return r}return null}};function Ko(){}Ko.prototype={hasFeature:function(i,e){return!0},createDocument:function(i,e,t){var r=new yr;if(r.implementation=this,r.childNodes=new ni,r.doctype=t||null,t&&r.appendChild(t),e){var n=r.createElementNS(i,e);r.appendChild(n)}return r},createDocumentType:function(i,e,t){var r=new cn;return r.name=i,r.nodeName=i,r.publicId=e||"",r.systemId=t||"",r}};function wt(){}wt.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(i,e){return el(this,i,e)},replaceChild:function(i,e){this.insertBefore(i,e),e&&this.removeChild(e)},removeChild:function(i){return Qo(this,i)},appendChild:function(i){return this.insertBefore(i,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(i){return Fs(this.ownerDocument||this,this,i)},normalize:function(){for(var i=this.firstChild;i;){var e=i.nextSibling;e&&e.nodeType==hn&&i.nodeType==hn?(this.removeChild(e),i.appendData(e.data)):(i.normalize(),i=e)}},isSupported:function(i,e){return this.ownerDocument.implementation.hasFeature(i,e)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(i){for(var e=this;e;){var t=e._nsMap;if(t){for(var r in t)if(t[r]==i)return r}e=e.nodeType==Vi?e.ownerDocument:e.parentNode}return null},lookupNamespaceURI:function(i){for(var e=this;e;){var t=e._nsMap;if(t&&i in t)return t[i];e=e.nodeType==Vi?e.ownerDocument:e.parentNode}return null},isDefaultNamespace:function(i){var e=this.lookupPrefix(i);return e==null}};function Go(i){return i=="<"&&"&lt;"||i==">"&&"&gt;"||i=="&"&&"&amp;"||i=='"'&&"&quot;"||"&#"+i.charCodeAt()+";"}gr(It,wt);gr(It,wt.prototype);function mr(i,e){if(e(i))return!0;if(i=i.firstChild)do if(mr(i,e))return!0;while(i=i.nextSibling)}function yr(){}function Zc(i,e,t){i&&i._inc++;var r=t.namespaceURI;r===vr.XMLNS&&(e._nsMap[t.prefix?t.localName:""]=t.value)}function Jo(i,e,t,r){i&&i._inc++;var n=t.namespaceURI;n===vr.XMLNS&&delete e._nsMap[t.prefix?t.localName:""]}function Rs(i,e,t){if(i&&i._inc){i._inc++;var r=e.childNodes;if(t)r[r.length++]=t;else{for(var n=e.firstChild,s=0;n;)r[s++]=n,n=n.nextSibling;r.length=s}}}function Qo(i,e){var t=e.previousSibling,r=e.nextSibling;return t?t.nextSibling=r:i.firstChild=r,r?r.previousSibling=t:i.lastChild=t,Rs(i.ownerDocument,i),e}function el(i,e,t){var r=e.parentNode;if(r&&r.removeChild(e),e.nodeType===ri){var n=e.firstChild;if(n==null)return e;var s=e.lastChild}else n=s=e;var a=t?t.previousSibling:i.lastChild;n.previousSibling=a,s.nextSibling=t,a?a.nextSibling=n:i.firstChild=n,t==null?i.lastChild=s:t.previousSibling=s;do n.parentNode=i;while(n!==s&&(n=n.nextSibling));return Rs(i.ownerDocument||i,i),e.nodeType==ri&&(e.firstChild=e.lastChild=null),e}function Vc(i,e){var t=e.parentNode;if(t){var r=i.lastChild;t.removeChild(e);var r=i.lastChild}var r=i.lastChild;return e.parentNode=i,e.previousSibling=r,e.nextSibling=null,r?r.nextSibling=e:i.firstChild=e,i.lastChild=e,Rs(i.ownerDocument,i,e),e}yr.prototype={nodeName:"#document",nodeType:$o,doctype:null,documentElement:null,_inc:1,insertBefore:function(i,e){if(i.nodeType==ri){for(var t=i.firstChild;t;){var r=t.nextSibling;this.insertBefore(t,e),t=r}return i}return this.documentElement==null&&i.nodeType==jt&&(this.documentElement=i),el(this,i,e),i.ownerDocument=this,i},removeChild:function(i){return this.documentElement==i&&(this.documentElement=null),Qo(this,i)},importNode:function(i,e){return al(this,i,e)},getElementById:function(i){var e=null;return mr(this.documentElement,function(t){if(t.nodeType==jt&&t.getAttribute("id")==i)return e=t,!0}),e},getElementsByClassName:function(i){var e=Fo(i);return new Yi(this,function(t){var r=[];return e.length>0&&mr(t.documentElement,function(n){if(n!==t&&n.nodeType===jt){var s=n.getAttribute("class");if(s){var a=i===s;if(!a){var o=Fo(s);a=e.every(Uc(o))}a&&r.push(n)}}}),r})},createElement:function(i){var e=new Ni;e.ownerDocument=this,e.nodeName=i,e.tagName=i,e.localName=i,e.childNodes=new ni;var t=e.attributes=new fn;return t._ownerElement=e,e},createDocumentFragment:function(){var i=new dn;return i.ownerDocument=this,i.childNodes=new ni,i},createTextNode:function(i){var e=new Ls;return e.ownerDocument=this,e.appendData(i),e},createComment:function(i){var e=new Ds;return e.ownerDocument=this,e.appendData(i),e},createCDATASection:function(i){var e=new Ps;return e.ownerDocument=this,e.appendData(i),e},createProcessingInstruction:function(i,e){var t=new Ms;return t.ownerDocument=this,t.tagName=t.target=i,t.nodeValue=t.data=e,t},createAttribute:function(i){var e=new un;return e.ownerDocument=this,e.name=i,e.nodeName=i,e.localName=i,e.specified=!0,e},createEntityReference:function(i){var e=new zs;return e.ownerDocument=this,e.nodeName=i,e},createElementNS:function(i,e){var t=new Ni,r=e.split(":"),n=t.attributes=new fn;return t.childNodes=new ni,t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.namespaceURI=i,r.length==2?(t.prefix=r[0],t.localName=r[1]):t.localName=e,n._ownerElement=t,t},createAttributeNS:function(i,e){var t=new un,r=e.split(":");return t.ownerDocument=this,t.nodeName=e,t.name=e,t.namespaceURI=i,t.specified=!0,r.length==2?(t.prefix=r[0],t.localName=r[1]):t.localName=e,t}};At(yr,wt);function Ni(){this._nsMap={}}Ni.prototype={nodeType:jt,hasAttribute:function(i){return this.getAttributeNode(i)!=null},getAttribute:function(i){var e=this.getAttributeNode(i);return e&&e.value||""},getAttributeNode:function(i){return this.attributes.getNamedItem(i)},setAttribute:function(i,e){var t=this.ownerDocument.createAttribute(i);t.value=t.nodeValue=""+e,this.setAttributeNode(t)},removeAttribute:function(i){var e=this.getAttributeNode(i);e&&this.removeAttributeNode(e)},appendChild:function(i){return i.nodeType===ri?this.insertBefore(i,null):Vc(this,i)},setAttributeNode:function(i){return this.attributes.setNamedItem(i)},setAttributeNodeNS:function(i){return this.attributes.setNamedItemNS(i)},removeAttributeNode:function(i){return this.attributes.removeNamedItem(i.nodeName)},removeAttributeNS:function(i,e){var t=this.getAttributeNodeNS(i,e);t&&this.removeAttributeNode(t)},hasAttributeNS:function(i,e){return this.getAttributeNodeNS(i,e)!=null},getAttributeNS:function(i,e){var t=this.getAttributeNodeNS(i,e);return t&&t.value||""},setAttributeNS:function(i,e,t){var r=this.ownerDocument.createAttributeNS(i,e);r.value=r.nodeValue=""+t,this.setAttributeNode(r)},getAttributeNodeNS:function(i,e){return this.attributes.getNamedItemNS(i,e)},getElementsByTagName:function(i){return new Yi(this,function(e){var t=[];return mr(e,function(r){r!==e&&r.nodeType==jt&&(i==="*"||r.tagName==i)&&t.push(r)}),t})},getElementsByTagNameNS:function(i,e){return new Yi(this,function(t){var r=[];return mr(t,function(n){n!==t&&n.nodeType===jt&&(i==="*"||n.namespaceURI===i)&&(e==="*"||n.localName==e)&&r.push(n)}),r})}};yr.prototype.getElementsByTagName=Ni.prototype.getElementsByTagName;yr.prototype.getElementsByTagNameNS=Ni.prototype.getElementsByTagNameNS;At(Ni,wt);function un(){}un.prototype.nodeType=Vi;At(un,wt);function _r(){}_r.prototype={data:"",substringData:function(i,e){return this.data.substring(i,i+e)},appendData:function(i){i=this.data+i,this.nodeValue=this.data=i,this.length=i.length},insertData:function(i,e){this.replaceData(i,0,e)},appendChild:function(i){throw new Error(vt[Hc])},deleteData:function(i,e){this.replaceData(i,e,"")},replaceData:function(i,e,t){var r=this.data.substring(0,i),n=this.data.substring(i+e);t=r+t+n,this.nodeValue=this.data=t,this.length=t.length}};At(_r,wt);function Ls(){}Ls.prototype={nodeName:"#text",nodeType:hn,splitText:function(i){var e=this.data,t=e.substring(i);e=e.substring(0,i),this.data=this.nodeValue=e,this.length=e.length;var r=this.ownerDocument.createTextNode(t);return this.parentNode&&this.parentNode.insertBefore(r,this.nextSibling),r}};At(Ls,_r);function Ds(){}Ds.prototype={nodeName:"#comment",nodeType:Ho};At(Ds,_r);function Ps(){}Ps.prototype={nodeName:"#cdata-section",nodeType:Uo};At(Ps,_r);function cn(){}cn.prototype.nodeType=Zo;At(cn,wt);function tl(){}tl.prototype.nodeType=jc;At(tl,wt);function il(){}il.prototype.nodeType=Wc;At(il,wt);function zs(){}zs.prototype.nodeType=Wo;At(zs,wt);function dn(){}dn.prototype.nodeName="#document-fragment";dn.prototype.nodeType=ri;At(dn,wt);function Ms(){}Ms.prototype.nodeType=jo;At(Ms,wt);function rl(){}rl.prototype.serializeToString=function(i,e,t){return nl.call(i,e,t)};wt.prototype.toString=nl;function nl(i,e){var t=[],r=this.nodeType==9&&this.documentElement||this,n=r.prefix,s=r.namespaceURI;if(s&&n==null){var n=r.lookupPrefix(s);if(n==null)var a=[{namespace:s,prefix:null}]}return Xi(this,t,i,e,a),t.join("")}function sl(i,e,t){var r=i.prefix||"",n=i.namespaceURI;if(!n||r==="xml"&&n===vr.XML||n===vr.XMLNS)return!1;for(var s=t.length;s--;){var a=t[s];if(a.prefix===r)return a.namespace!==n}return!0}function Bs(i,e,t){i.push(" ",e,'="',t.replace(/[<&"]/g,Go),'"')}function Xi(i,e,t,r,n){if(n||(n=[]),r)if(i=r(i),i){if(typeof i=="string"){e.push(i);return}}else return;switch(i.nodeType){case jt:var s=i.attributes,a=s.length,o=i.firstChild,l=i.tagName;t=vr.isHTML(i.namespaceURI)||t;var h=l;if(!t&&!i.prefix&&i.namespaceURI){for(var u,c=0;c<s.length;c++)if(s.item(c).name==="xmlns"){u=s.item(c).value;break}if(!u)for(var v=n.length-1;v>=0;v--){var g=n[v];if(g.prefix===""&&g.namespace===i.namespaceURI){u=g.namespace;break}}if(u!==i.namespaceURI)for(var v=n.length-1;v>=0;v--){var g=n[v];if(g.namespace===i.namespaceURI){g.prefix&&(h=g.prefix+":"+l);break}}}e.push("<",h);for(var I=0;I<a;I++){var w=s.item(I);w.prefix=="xmlns"?n.push({prefix:w.localName,namespace:w.value}):w.nodeName=="xmlns"&&n.push({prefix:"",namespace:w.value})}for(var I=0;I<a;I++){var w=s.item(I);if(sl(w,t,n)){var p=w.prefix||"",d=w.namespaceURI;Bs(e,p?"xmlns:"+p:"xmlns",d),n.push({prefix:p,namespace:d})}Xi(w,e,t,r,n)}if(l===h&&sl(i,t,n)){var p=i.prefix||"",d=i.namespaceURI;Bs(e,p?"xmlns:"+p:"xmlns",d),n.push({prefix:p,namespace:d})}if(o||t&&!/^(?:meta|link|img|br|hr|input)$/i.test(l)){if(e.push(">"),t&&/^script$/i.test(l))for(;o;)o.data?e.push(o.data):Xi(o,e,t,r,n.slice()),o=o.nextSibling;else for(;o;)Xi(o,e,t,r,n.slice()),o=o.nextSibling;e.push("</",h,">")}else e.push("/>");return;case $o:case ri:for(var o=i.firstChild;o;)Xi(o,e,t,r,n.slice()),o=o.nextSibling;return;case Vi:return Bs(e,i.name,i.value);case hn:return e.push(i.data.replace(/[<&]/g,Go).replace(/]]>/g,"]]&gt;"));case Uo:return e.push("<![CDATA[",i.data,"]]>");case Ho:return e.push("<!--",i.data,"-->");case Zo:var _=i.publicId,T=i.systemId;if(e.push("<!DOCTYPE ",i.name),_)e.push(" PUBLIC ",_),T&&T!="."&&e.push(" ",T),e.push(">");else if(T&&T!=".")e.push(" SYSTEM ",T,">");else{var N=i.internalSubset;N&&e.push(" [",N,"]"),e.push(">")}return;case jo:return e.push("<?",i.target," ",i.data,"?>");case Wo:return e.push("&",i.nodeName,";");default:e.push("??",i.nodeName)}}function al(i,e,t){var r;switch(e.nodeType){case jt:r=e.cloneNode(!1),r.ownerDocument=i;case ri:break;case Vi:t=!0;break}if(r||(r=e.cloneNode(!1)),r.ownerDocument=i,r.parentNode=null,t)for(var n=e.firstChild;n;)r.appendChild(al(i,n,t)),n=n.nextSibling;return r}function Fs(i,e,t){var r=new e.constructor;for(var n in e){var s=e[n];typeof s!="object"&&s!=r[n]&&(r[n]=s)}switch(e.childNodes&&(r.childNodes=new ni),r.ownerDocument=i,r.nodeType){case jt:var a=e.attributes,o=r.attributes=new fn,l=a.length;o._ownerElement=r;for(var h=0;h<l;h++)r.setAttributeNode(Fs(i,a.item(h),!0));break;case Vi:t=!0}if(t)for(var u=e.firstChild;u;)r.appendChild(Fs(i,u,t)),u=u.nextSibling;return r}function ol(i,e,t){i[e]=t}try{if(Object.defineProperty){let i=function(e){switch(e.nodeType){case jt:case ri:var t=[];for(e=e.firstChild;e;)e.nodeType!==7&&e.nodeType!==8&&t.push(i(e)),e=e.nextSibling;return t.join("");default:return e.nodeValue}};Object.defineProperty(Yi.prototype,"length",{get:function(){return Os(this),this.$$length}}),Object.defineProperty(wt.prototype,"textContent",{get:function(){return i(this)},set:function(e){switch(this.nodeType){case jt:case ri:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),ol=function(e,t,r){e["$$"+t]=r}}}catch{}pi.DocumentType=cn;pi.DOMException=Ii;pi.DOMImplementation=Ko;pi.Element=Ni;pi.Node=wt;pi.NodeList=ni;pi.XMLSerializer=rl;var br={},ll={};(function(i){var e=Ai.freeze;i.XML_ENTITIES=e({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),i.HTML_ENTITIES=e({lt:"<",gt:">",amp:"&",quot:'"',apos:"'",Agrave:"\xC0",Aacute:"\xC1",Acirc:"\xC2",Atilde:"\xC3",Auml:"\xC4",Aring:"\xC5",AElig:"\xC6",Ccedil:"\xC7",Egrave:"\xC8",Eacute:"\xC9",Ecirc:"\xCA",Euml:"\xCB",Igrave:"\xCC",Iacute:"\xCD",Icirc:"\xCE",Iuml:"\xCF",ETH:"\xD0",Ntilde:"\xD1",Ograve:"\xD2",Oacute:"\xD3",Ocirc:"\xD4",Otilde:"\xD5",Ouml:"\xD6",Oslash:"\xD8",Ugrave:"\xD9",Uacute:"\xDA",Ucirc:"\xDB",Uuml:"\xDC",Yacute:"\xDD",THORN:"\xDE",szlig:"\xDF",agrave:"\xE0",aacute:"\xE1",acirc:"\xE2",atilde:"\xE3",auml:"\xE4",aring:"\xE5",aelig:"\xE6",ccedil:"\xE7",egrave:"\xE8",eacute:"\xE9",ecirc:"\xEA",euml:"\xEB",igrave:"\xEC",iacute:"\xED",icirc:"\xEE",iuml:"\xEF",eth:"\xF0",ntilde:"\xF1",ograve:"\xF2",oacute:"\xF3",ocirc:"\xF4",otilde:"\xF5",ouml:"\xF6",oslash:"\xF8",ugrave:"\xF9",uacute:"\xFA",ucirc:"\xFB",uuml:"\xFC",yacute:"\xFD",thorn:"\xFE",yuml:"\xFF",nbsp:"\xA0",iexcl:"\xA1",cent:"\xA2",pound:"\xA3",curren:"\xA4",yen:"\xA5",brvbar:"\xA6",sect:"\xA7",uml:"\xA8",copy:"\xA9",ordf:"\xAA",laquo:"\xAB",not:"\xAC",shy:"\xAD\xAD",reg:"\xAE",macr:"\xAF",deg:"\xB0",plusmn:"\xB1",sup2:"\xB2",sup3:"\xB3",acute:"\xB4",micro:"\xB5",para:"\xB6",middot:"\xB7",cedil:"\xB8",sup1:"\xB9",ordm:"\xBA",raquo:"\xBB",frac14:"\xBC",frac12:"\xBD",frac34:"\xBE",iquest:"\xBF",times:"\xD7",divide:"\xF7",forall:"\u2200",part:"\u2202",exist:"\u2203",empty:"\u2205",nabla:"\u2207",isin:"\u2208",notin:"\u2209",ni:"\u220B",prod:"\u220F",sum:"\u2211",minus:"\u2212",lowast:"\u2217",radic:"\u221A",prop:"\u221D",infin:"\u221E",ang:"\u2220",and:"\u2227",or:"\u2228",cap:"\u2229",cup:"\u222A",int:"\u222B",there4:"\u2234",sim:"\u223C",cong:"\u2245",asymp:"\u2248",ne:"\u2260",equiv:"\u2261",le:"\u2264",ge:"\u2265",sub:"\u2282",sup:"\u2283",nsub:"\u2284",sube:"\u2286",supe:"\u2287",oplus:"\u2295",otimes:"\u2297",perp:"\u22A5",sdot:"\u22C5",Alpha:"\u0391",Beta:"\u0392",Gamma:"\u0393",Delta:"\u0394",Epsilon:"\u0395",Zeta:"\u0396",Eta:"\u0397",Theta:"\u0398",Iota:"\u0399",Kappa:"\u039A",Lambda:"\u039B",Mu:"\u039C",Nu:"\u039D",Xi:"\u039E",Omicron:"\u039F",Pi:"\u03A0",Rho:"\u03A1",Sigma:"\u03A3",Tau:"\u03A4",Upsilon:"\u03A5",Phi:"\u03A6",Chi:"\u03A7",Psi:"\u03A8",Omega:"\u03A9",alpha:"\u03B1",beta:"\u03B2",gamma:"\u03B3",delta:"\u03B4",epsilon:"\u03B5",zeta:"\u03B6",eta:"\u03B7",theta:"\u03B8",iota:"\u03B9",kappa:"\u03BA",lambda:"\u03BB",mu:"\u03BC",nu:"\u03BD",xi:"\u03BE",omicron:"\u03BF",pi:"\u03C0",rho:"\u03C1",sigmaf:"\u03C2",sigma:"\u03C3",tau:"\u03C4",upsilon:"\u03C5",phi:"\u03C6",chi:"\u03C7",psi:"\u03C8",omega:"\u03C9",thetasym:"\u03D1",upsih:"\u03D2",piv:"\u03D6",OElig:"\u0152",oelig:"\u0153",Scaron:"\u0160",scaron:"\u0161",Yuml:"\u0178",fnof:"\u0192",circ:"\u02C6",tilde:"\u02DC",ensp:"\u2002",emsp:"\u2003",thinsp:"\u2009",zwnj:"\u200C",zwj:"\u200D",lrm:"\u200E",rlm:"\u200F",ndash:"\u2013",mdash:"\u2014",lsquo:"\u2018",rsquo:"\u2019",sbquo:"\u201A",ldquo:"\u201C",rdquo:"\u201D",bdquo:"\u201E",dagger:"\u2020",Dagger:"\u2021",bull:"\u2022",hellip:"\u2026",permil:"\u2030",prime:"\u2032",Prime:"\u2033",lsaquo:"\u2039",rsaquo:"\u203A",oline:"\u203E",euro:"\u20AC",trade:"\u2122",larr:"\u2190",uarr:"\u2191",rarr:"\u2192",darr:"\u2193",harr:"\u2194",crarr:"\u21B5",lceil:"\u2308",rceil:"\u2309",lfloor:"\u230A",rfloor:"\u230B",loz:"\u25CA",spades:"\u2660",clubs:"\u2663",hearts:"\u2665",diams:"\u2666"}),i.entityMap=i.HTML_ENTITIES})(ll);var Us={},wr=Ai.NAMESPACE,Ws=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,hl=new RegExp("[\\-\\.0-9"+Ws.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),fl=new RegExp("^"+Ws.source+hl.source+"*(?::"+Ws.source+hl.source+"*)?$"),xr=0,vi=1,qi=2,Er=3,Ki=4,Gi=5,Tr=6,pn=7;function Ji(i,e){this.message=i,this.locator=e,Error.captureStackTrace&&Error.captureStackTrace(this,Ji)}Ji.prototype=new Error;Ji.prototype.name=Ji.name;function ul(){}ul.prototype={parse:function(i,e,t){var r=this.domBuilder;r.startDocument(),pl(e,e={}),Yc(i,e,t,r,this.errorHandler),r.endDocument()}};function Yc(i,e,t,r,n){function s(ve){if(ve>65535){ve-=65536;var he=55296+(ve>>10),ae=56320+(ve&1023);return String.fromCharCode(he,ae)}else return String.fromCharCode(ve)}function a(ve){var he=ve.slice(1,-1);return he in t?t[he]:he.charAt(0)==="#"?s(parseInt(he.substr(1).replace("x","0x"))):(n.error("entity not found:"+ve),ve)}function o(ve){if(ve>w){var he=i.substring(w,ve).replace(/&#?\w+;/g,a);v&&l(w),r.characters(he,0,ve-w),w=ve}}function l(ve,he){for(;ve>=u&&(he=c.exec(i));)h=he.index,u=h+he[0].length,v.lineNumber++;v.columnNumber=ve-h+1}for(var h=0,u=0,c=/.*(?:\r\n?|\n)|.*$/g,v=r.locator,g=[{currentNSMap:e}],I={},w=0;;){try{var p=i.indexOf("<",w);if(p<0){if(!i.substr(w).match(/^\s*$/)){var d=r.doc,_=d.createTextNode(i.substr(w));d.appendChild(_),r.currentElement=_}return}switch(p>w&&o(p),i.charAt(p+1)){case"/":var T=i.indexOf(">",p+3),N=i.substring(p+2,T).replace(/[ \t\n\r]+$/g,""),y=g.pop();T<0?(N=i.substring(p+2).replace(/[\s<].*/,""),n.error("end tag name: "+N+" is not complete:"+y.tagName),T=p+1+N.length):N.match(/\s</)&&(N=N.replace(/[\s<].*/,""),n.error("end tag name: "+N+" maybe not complete"),T=p+1+N.length);var S=y.localNSMap,k=y.tagName==N,z=k||y.tagName&&y.tagName.toLowerCase()==N.toLowerCase();if(z){if(r.endElement(y.uri,y.localName,N),S)for(var $ in S)r.endPrefixMapping($);k||n.fatalError("end tag name: "+N+" is not match the current start tagName:"+y.tagName)}else g.push(y);T++;break;case"?":v&&l(p),T=Jc(i,p,r);break;case"!":v&&l(p),T=Gc(i,p,r,n);break;default:v&&l(p);var U=new vl,J=g[g.length-1].currentNSMap,T=Xc(i,p,U,J,a,n),Y=U.length;if(!U.closed&&Kc(i,T,U.tagName,I)&&(U.closed=!0,t.nbsp||n.warning("unclosed xml attribute")),v&&Y){for(var ce=cl(v,{}),Se=0;Se<Y;Se++){var Ee=U[Se];l(Ee.offset),Ee.locator=cl(v,{})}r.locator=ce,dl(U,r,J)&&g.push(U),r.locator=v}else dl(U,r,J)&&g.push(U);wr.isHTML(U.uri)&&!U.closed?T=qc(i,T,U.tagName,a,r):T++}}catch(ve){if(ve instanceof Ji)throw ve;n.error("element parse error: "+ve),T=-1}T>w?w=T:o(Math.max(p,w)+1)}}function cl(i,e){return e.lineNumber=i.lineNumber,e.columnNumber=i.columnNumber,e}function Xc(i,e,t,r,n,s){function a(v,g,I){t.attributeNames.hasOwnProperty(v)&&s.fatalError("Attribute "+v+" redefined"),t.addValue(v,g,I)}for(var o,l,h=++e,u=xr;;){var c=i.charAt(h);switch(c){case"=":if(u===vi)o=i.slice(e,h),u=Er;else if(u===qi)u=Er;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(u===Er||u===vi)if(u===vi&&(s.warning('attribute value must after "="'),o=i.slice(e,h)),e=h+1,h=i.indexOf(c,e),h>0)l=i.slice(e,h).replace(/&#?\w+;/g,n),a(o,l,e-1),u=Gi;else throw new Error("attribute value no end '"+c+"' match");else if(u==Ki)l=i.slice(e,h).replace(/&#?\w+;/g,n),a(o,l,e),s.warning('attribute "'+o+'" missed start quot('+c+")!!"),e=h+1,u=Gi;else throw new Error('attribute value must after "="');break;case"/":switch(u){case xr:t.setTagName(i.slice(e,h));case Gi:case Tr:case pn:u=pn,t.closed=!0;case Ki:case vi:case qi:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return s.error("unexpected end of input"),u==xr&&t.setTagName(i.slice(e,h)),h;case">":switch(u){case xr:t.setTagName(i.slice(e,h));case Gi:case Tr:case pn:break;case Ki:case vi:l=i.slice(e,h),l.slice(-1)==="/"&&(t.closed=!0,l=l.slice(0,-1));case qi:u===qi&&(l=o),u==Ki?(s.warning('attribute "'+l+'" missed quot(")!'),a(o,l.replace(/&#?\w+;/g,n),e)):((!wr.isHTML(r[""])||!l.match(/^(?:disabled|checked|selected)$/i))&&s.warning('attribute "'+l+'" missed value!! "'+l+'" instead!!'),a(l,l,e));break;case Er:throw new Error("attribute value missed!!")}return h;case"\x80":c=" ";default:if(c<=" ")switch(u){case xr:t.setTagName(i.slice(e,h)),u=Tr;break;case vi:o=i.slice(e,h),u=qi;break;case Ki:var l=i.slice(e,h).replace(/&#?\w+;/g,n);s.warning('attribute "'+l+'" missed quot(")!!'),a(o,l,e);case Gi:u=Tr;break}else switch(u){case qi:t.tagName,(!wr.isHTML(r[""])||!o.match(/^(?:disabled|checked|selected)$/i))&&s.warning('attribute "'+o+'" missed value!! "'+o+'" instead2!!'),a(o,o,e),e=h,u=vi;break;case Gi:s.warning('attribute space is required"'+o+'"!!');case Tr:u=vi,e=h;break;case Er:u=Ki,e=h;break;case pn:throw new Error("elements closed character '/' and '>' must be connected to")}}h++}}function dl(i,e,t){for(var r=i.tagName,n=null,s=i.length;s--;){var a=i[s],o=a.qName,l=a.value,v=o.indexOf(":");if(v>0)var h=a.prefix=o.slice(0,v),u=o.slice(v+1),c=h==="xmlns"&&u;else u=o,h=null,c=o==="xmlns"&&"";a.localName=u,c!==!1&&(n==null&&(n={},pl(t,t={})),t[c]=n[c]=l,a.uri=wr.XMLNS,e.startPrefixMapping(c,l))}for(var s=i.length;s--;){a=i[s];var h=a.prefix;h&&(h==="xml"&&(a.uri=wr.XML),h!=="xmlns"&&(a.uri=t[h||""]))}var v=r.indexOf(":");v>0?(h=i.prefix=r.slice(0,v),u=i.localName=r.slice(v+1)):(h=null,u=i.localName=r);var g=i.uri=t[h||""];if(e.startElement(g,u,r,i),i.closed){if(e.endElement(g,u,r),n)for(h in n)e.endPrefixMapping(h)}else return i.currentNSMap=t,i.localNSMap=n,!0}function qc(i,e,t,r,n){if(/^(?:script|textarea)$/i.test(t)){var s=i.indexOf("</"+t+">",e),a=i.substring(e+1,s);if(/[&<]/.test(a))return/^script$/i.test(t)?(n.characters(a,0,a.length),s):(a=a.replace(/&#?\w+;/g,r),n.characters(a,0,a.length),s)}return e+1}function Kc(i,e,t,r){var n=r[t];return n==null&&(n=i.lastIndexOf("</"+t+">"),n<e&&(n=i.lastIndexOf("</"+t)),r[t]=n),n<e}function pl(i,e){for(var t in i)e[t]=i[t]}function Gc(i,e,t,r){var n=i.charAt(e+2);switch(n){case"-":if(i.charAt(e+3)==="-"){var s=i.indexOf("-->",e+4);return s>e?(t.comment(i,e+4,s-e-4),s+3):(r.error("Unclosed comment"),-1)}else return-1;default:if(i.substr(e+3,6)=="CDATA["){var s=i.indexOf("]]>",e+9);return t.startCDATA(),t.characters(i,e+9,s-e-9),t.endCDATA(),s+3}var a=Qc(i,e),o=a.length;if(o>1&&/!doctype/i.test(a[0][0])){var l=a[1][0],h=!1,u=!1;o>3&&(/^public$/i.test(a[2][0])?(h=a[3][0],u=o>4&&a[4][0]):/^system$/i.test(a[2][0])&&(u=a[3][0]));var c=a[o-1];return t.startDTD(l,h,u),t.endDTD(),c.index+c[0].length}}return-1}function Jc(i,e,t){var r=i.indexOf("?>",e);if(r){var n=i.substring(e,r).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return n?(n[0].length,t.processingInstruction(n[1],n[2]),r+2):-1}return-1}function vl(){this.attributeNames={}}vl.prototype={setTagName:function(i){if(!fl.test(i))throw new Error("invalid tagName:"+i);this.tagName=i},addValue:function(i,e,t){if(!fl.test(i))throw new Error("invalid attribute:"+i);this.attributeNames[i]=this.length,this[this.length++]={qName:i,value:e,offset:t}},length:0,getLocalName:function(i){return this[i].localName},getLocator:function(i){return this[i].locator},getQName:function(i){return this[i].qName},getURI:function(i){return this[i].uri},getValue:function(i){return this[i].value}};function Qc(i,e){var t,r=[],n=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(n.lastIndex=e,n.exec(i);t=n.exec(i);)if(r.push(t),t[1])return r}Us.XMLReader=ul;Us.ParseError=Ji;var ed=Ai,js=pi,gl=ll,ml=Us,td=js.DOMImplementation,yl=ed.NAMESPACE,id=ml.ParseError,rd=ml.XMLReader;function _l(i){this.options=i||{locator:{}}}_l.prototype.parseFromString=function(i,e){var t=this.options,r=new rd,n=t.domBuilder||new Sr,s=t.errorHandler,a=t.locator,o=t.xmlns||{},l=/\/x?html?$/.test(e),h=l?gl.HTML_ENTITIES:gl.XML_ENTITIES;return a&&n.setDocumentLocator(a),r.errorHandler=nd(s,n,a),r.domBuilder=t.domBuilder||n,l&&(o[""]=yl.HTML),o.xml=o.xml||yl.XML,i&&typeof i=="string"?r.parse(i,o,h):r.errorHandler.error("invalid doc source"),n.doc};function nd(i,e,t){if(!i){if(e instanceof Sr)return e;i=e}var r={},n=i instanceof Function;t=t||{};function s(a){var o=i[a];!o&&n&&(o=i.length==2?function(l){i(a,l)}:i),r[a]=o&&function(l){o("[xmldom "+a+"]	"+l+Hs(t))}||function(){}}return s("warning"),s("error"),s("fatalError"),r}function Sr(){this.cdata=!1}function Qi(i,e){e.lineNumber=i.lineNumber,e.columnNumber=i.columnNumber}Sr.prototype={startDocument:function(){this.doc=new td().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(i,e,t,r){var n=this.doc,s=n.createElementNS(i,t||e),a=r.length;vn(this,s),this.currentElement=s,this.locator&&Qi(this.locator,s);for(var o=0;o<a;o++){var i=r.getURI(o),l=r.getValue(o),t=r.getQName(o),h=n.createAttributeNS(i,t);this.locator&&Qi(r.getLocator(o),h),h.value=h.nodeValue=l,s.setAttributeNode(h)}},endElement:function(i,e,t){var r=this.currentElement;r.tagName,this.currentElement=r.parentNode},startPrefixMapping:function(i,e){},endPrefixMapping:function(i){},processingInstruction:function(i,e){var t=this.doc.createProcessingInstruction(i,e);this.locator&&Qi(this.locator,t),vn(this,t)},ignorableWhitespace:function(i,e,t){},characters:function(i,e,t){if(i=bl.apply(this,arguments),i){if(this.cdata)var r=this.doc.createCDATASection(i);else var r=this.doc.createTextNode(i);this.currentElement?this.currentElement.appendChild(r):/^\s*$/.test(i)&&this.doc.appendChild(r),this.locator&&Qi(this.locator,r)}},skippedEntity:function(i){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(i){(this.locator=i)&&(i.lineNumber=0)},comment:function(i,e,t){i=bl.apply(this,arguments);var r=this.doc.createComment(i);this.locator&&Qi(this.locator,r),vn(this,r)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(i,e,t){var r=this.doc.implementation;if(r&&r.createDocumentType){var n=r.createDocumentType(i,e,t);this.locator&&Qi(this.locator,n),vn(this,n),this.doc.doctype=n}},warning:function(i){console.warn("[xmldom warning]	"+i,Hs(this.locator))},error:function(i){console.error("[xmldom error]	"+i,Hs(this.locator))},fatalError:function(i){throw new id(i,this.locator)}};function Hs(i){if(i)return`
@`+(i.systemId||"")+"#[line:"+i.lineNumber+",col:"+i.columnNumber+"]"}function bl(i,e,t){return typeof i=="string"?i.substr(e,t):i.length>=e+t||e?new java.lang.String(i,e,t)+"":i}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(i){Sr.prototype[i]=function(){return null}});function vn(i,e){i.currentElement?i.currentElement.appendChild(e):i.doc.appendChild(e)}br.__DOMHandler=Sr;br.DOMParser=_l;br.DOMImplementation=js.DOMImplementation;br.XMLSerializer=js.XMLSerializer;var wl=br.DOMParser;const xl=typeof window!="undefined"?window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame:!1,sd=1,El=typeof URL!="undefined"?URL:typeof window!="undefined"?window.URL||window.webkitURL||window.mozURL:void 0;function $s(){var i=new Date().getTime(),e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var r=(i+Math.random()*16)%16|0;return i=Math.floor(i/16),(t=="x"?r:r&7|8).toString(16)});return e}function ad(i){return!!(i&&i.nodeType==1)}function lt(i){return!isNaN(parseFloat(i))&&isFinite(i)}function od(i){let e=parseFloat(i);return lt(i)===!1?!1:typeof i=="string"&&i.indexOf(".")>-1?!0:Math.floor(e)!==e}function Cr(i){var e=["Webkit","webkit","Moz","O","ms"],t=["-webkit-","-webkit-","-moz-","-o-","-ms-"],r=i.toLowerCase(),n=e.length;if(typeof document=="undefined"||typeof document.body.style[r]!="undefined")return i;for(var s=0;s<n;s++)if(typeof document.body.style[t[s]+r]!="undefined")return t[s]+r;return i}function ld(i){for(var e=1,t=arguments.length;e<t;e++){var r=arguments[e];for(var n in r)i[n]===void 0&&(i[n]=r[n])}return i}function xt(i){var e=[].slice.call(arguments,1);return e.forEach(function(t){!t||Object.getOwnPropertyNames(t).forEach(function(r){Object.defineProperty(i,r,Object.getOwnPropertyDescriptor(t,r))})}),i}function gn(i,e,t,r,n){var s=r||0,a=n||e.length,o=parseInt(s+(a-s)/2),l;return t||(t=function(h,u){if(h>u)return 1;if(h<u)return-1;if(h==u)return 0}),a-s<=0?o:(l=t(e[o],i),a-s==1?l>=0?o:o+1:l===0?o:l===-1?gn(i,e,t,o,a):gn(i,e,t,s,o))}function Zs(i,e,t,r,n){var s=r||0,a=n||e.length,o=parseInt(s+(a-s)/2),l;return t||(t=function(h,u){if(h>u)return 1;if(h<u)return-1;if(h==u)return 0}),a-s<=0?-1:(l=t(e[o],i),a-s==1?l===0?o:-1:l===0?o:l===-1?Zs(i,e,t,o,a):Zs(i,e,t,s,o))}function Vs(i){var e=window.getComputedStyle(i),t=["width","paddingRight","paddingLeft","marginRight","marginLeft","borderRightWidth","borderLeftWidth"],r=["height","paddingTop","paddingBottom","marginTop","marginBottom","borderTopWidth","borderBottomWidth"],n=0,s=0;return t.forEach(function(a){n+=parseFloat(e[a])||0}),r.forEach(function(a){s+=parseFloat(e[a])||0}),{height:s,width:n}}function Ys(i){var e=window.getComputedStyle(i),t=["paddingRight","paddingLeft","marginRight","marginLeft","borderRightWidth","borderLeftWidth"],r=["paddingTop","paddingBottom","marginTop","marginBottom","borderTopWidth","borderBottomWidth"],n=0,s=0;return t.forEach(function(a){n+=parseFloat(e[a])||0}),r.forEach(function(a){s+=parseFloat(e[a])||0}),{height:s,width:n}}function Tl(i){let e,t=i.ownerDocument;if(i.nodeType==Node.TEXT_NODE){let r=t.createRange();r.selectNodeContents(i),e=r.getBoundingClientRect()}else e=i.getBoundingClientRect();return e}function Xs(){var i=window.innerWidth,e=window.innerHeight;return{top:0,left:0,right:i,bottom:e,width:i,height:e}}function hd(i,e){for(var t=i.parentNode,r=t.childNodes,n,s=-1,a=0;a<r.length&&(n=r[a],n.nodeType===e&&s++,n!=i);a++);return s}function fd(i){return hd(i,sd)}function mn(i){return["xml","opf","ncx"].indexOf(i)>-1}function ud(i,e){return new Blob([i],{type:e})}function qs(i,e){var t,r=ud(i,e);return t=El.createObjectURL(r),t}function cd(i){return El.revokeObjectURL(i)}function Sl(i,e){var t,r;if(typeof i=="string")return t=btoa(i),r="data:"+e+";base64,"+t,r}function dd(i){return Object.prototype.toString.call(i).slice(8,-1)}function si(i,e,t){var r,n;return typeof DOMParser=="undefined"||t?n=wl:n=DOMParser,i.charCodeAt(0)===65279&&(i=i.slice(1)),r=new n().parseFromString(i,e),r}function Qe(i,e){var t;if(!i)throw new Error("No Element Provided");if(typeof i.querySelector!="undefined")return i.querySelector(e);if(t=i.getElementsByTagName(e),t.length)return t[0]}function gi(i,e){return typeof i.querySelector!="undefined"?i.querySelectorAll(e):i.getElementsByTagName(e)}function kr(i,e,t){var r,n;if(typeof i.querySelector!="undefined"){e+="[";for(var s in t)e+=s+"~='"+t[s]+"'";return e+="]",i.querySelector(e)}else if(r=i.getElementsByTagName(e),n=Array.prototype.slice.call(r,0).filter(function(a){for(var o in t)if(a.getAttribute(o)===t[o])return!0;return!1}),n)return n[0]}function Ks(i,e){var t=i.ownerDocument||i;typeof t.createTreeWalker!="undefined"?pd(i,e,NodeFilter.SHOW_TEXT):Cl(i,function(r){r&&r.nodeType===3&&e(r)})}function pd(i,e,t){var r=document.createTreeWalker(i,t,null,!1);let n;for(;n=r.nextNode();)e(n)}function Cl(i,e){if(e(i))return!0;if(i=i.firstChild,i)do{if(Cl(i,e))return!0;i=i.nextSibling}while(i)}function vd(i){return new Promise(function(e,t){var r=new FileReader;r.readAsDataURL(i),r.onloadend=function(){e(r.result)}})}function je(){this.resolve=null,this.reject=null,this.id=$s(),this.promise=new Promise((i,e)=>{this.resolve=i,this.reject=e}),Object.freeze(this)}function Gs(i,e,t){var r;if(typeof i.querySelector!="undefined"&&(r=i.querySelector(`${e}[*|type="${t}"]`)),!r||r.length===0){r=gi(i,e);for(var n=0;n<r.length;n++)if(r[n].getAttributeNS("http://www.idpf.org/2007/ops","type")===t||r[n].getAttribute("epub:type")===t)return r[n]}else return r}function kl(i){for(var e=[],t=i.childNodes,r=0;r<t.length;r++){let n=t[r];n.nodeType===1&&e.push(n)}return e}function Al(i){for(var e=[i];i;i=i.parentNode)e.unshift(i);return e}function Ar(i,e,t){for(var r=[],n=i.childNodes,s=0;s<n.length;s++){let a=n[s];if(a.nodeType===1&&a.nodeName.toLowerCase()===e){if(t)return a;r.push(a)}}if(!t)return r}class gd{constructor(){this.collapsed=!1,this.commonAncestorContainer=void 0,this.endContainer=void 0,this.endOffset=void 0,this.startContainer=void 0,this.startOffset=void 0}setStart(e,t){this.startContainer=e,this.startOffset=t,this.endContainer?this.commonAncestorContainer=this._commonAncestorContainer():this.collapse(!0),this._checkCollapsed()}setEnd(e,t){this.endContainer=e,this.endOffset=t,this.startContainer?(this.collapsed=!1,this.commonAncestorContainer=this._commonAncestorContainer()):this.collapse(!1),this._checkCollapsed()}collapse(e){this.collapsed=!0,e?(this.endContainer=this.startContainer,this.endOffset=this.startOffset,this.commonAncestorContainer=this.startContainer.parentNode):(this.startContainer=this.endContainer,this.startOffset=this.endOffset,this.commonAncestorContainer=this.endOffset.parentNode)}selectNode(e){let t=e.parentNode,r=Array.prototype.indexOf.call(t.childNodes,e);this.setStart(t,r),this.setEnd(t,r+1)}selectNodeContents(e){e.childNodes[e.childNodes-1];let t=e.nodeType===3?e.textContent.length:parent.childNodes.length;this.setStart(e,0),this.setEnd(e,t)}_commonAncestorContainer(e,t){var r=Al(e||this.startContainer),n=Al(t||this.endContainer);if(r[0]==n[0]){for(var s=0;s<r.length;s++)if(r[s]!=n[s])return r[s-1]}}_checkCollapsed(){this.startContainer===this.endContainer&&this.startOffset===this.endOffset?this.collapsed=!0:this.collapsed=!1}toString(){}}if(!Il)var Il={cwd:function(){return"/"}};function Jt(i){if(typeof i!="string")throw new TypeError("Path must be a string. Received "+i)}function Nl(i,e){for(var t="",r=-1,n=0,s,a=0;a<=i.length;++a){if(a<i.length)s=i.charCodeAt(a);else{if(s===47)break;s=47}if(s===47){if(!(r===a-1||n===1))if(r!==a-1&&n===2){if(t.length<2||t.charCodeAt(t.length-1)!==46||t.charCodeAt(t.length-2)!==46){if(t.length>2){for(var o=t.length-1,l=o;l>=0&&t.charCodeAt(l)!==47;--l);if(l!==o){l===-1?t="":t=t.slice(0,l),r=a,n=0;continue}}else if(t.length===2||t.length===1){t="",r=a,n=0;continue}}e&&(t.length>0?t+="/..":t="..")}else t.length>0?t+="/"+i.slice(r+1,a):t=i.slice(r+1,a);r=a,n=0}else s===46&&n!==-1?++n:n=-1}return t}function md(i,e){var t=e.dir||e.root,r=e.base||(e.name||"")+(e.ext||"");return t?t===e.root?t+r:t+i+r:r}var yn={resolve:function(){for(var e="",t=!1,r,n=arguments.length-1;n>=-1&&!t;n--){var s;n>=0?s=arguments[n]:(r===void 0&&(r=Il.cwd()),s=r),Jt(s),s.length!==0&&(e=s+"/"+e,t=s.charCodeAt(0)===47)}return e=Nl(e,!t),t?e.length>0?"/"+e:"/":e.length>0?e:"."},normalize:function(e){if(Jt(e),e.length===0)return".";var t=e.charCodeAt(0)===47,r=e.charCodeAt(e.length-1)===47;return e=Nl(e,!t),e.length===0&&!t&&(e="."),e.length>0&&r&&(e+="/"),t?"/"+e:e},isAbsolute:function(e){return Jt(e),e.length>0&&e.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var e,t=0;t<arguments.length;++t){var r=arguments[t];Jt(r),r.length>0&&(e===void 0?e=r:e+="/"+r)}return e===void 0?".":yn.normalize(e)},relative:function(e,t){if(Jt(e),Jt(t),e===t||(e=yn.resolve(e),t=yn.resolve(t),e===t))return"";for(var r=1;r<e.length&&e.charCodeAt(r)===47;++r);for(var n=e.length,s=n-r,a=1;a<t.length&&t.charCodeAt(a)===47;++a);for(var o=t.length,l=o-a,h=s<l?s:l,u=-1,c=0;c<=h;++c){if(c===h){if(l>h){if(t.charCodeAt(a+c)===47)return t.slice(a+c+1);if(c===0)return t.slice(a+c)}else s>h&&(e.charCodeAt(r+c)===47?u=c:c===0&&(u=0));break}var v=e.charCodeAt(r+c),g=t.charCodeAt(a+c);if(v!==g)break;v===47&&(u=c)}var I="";for(c=r+u+1;c<=n;++c)(c===n||e.charCodeAt(c)===47)&&(I.length===0?I+="..":I+="/..");return I.length>0?I+t.slice(a+u):(a+=u,t.charCodeAt(a)===47&&++a,t.slice(a))},_makeLong:function(e){return e},dirname:function(e){if(Jt(e),e.length===0)return".";for(var t=e.charCodeAt(0),r=t===47,n=-1,s=!0,a=e.length-1;a>=1;--a)if(t=e.charCodeAt(a),t===47){if(!s){n=a;break}}else s=!1;return n===-1?r?"/":".":r&&n===1?"//":e.slice(0,n)},basename:function(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Jt(e);var r=0,n=-1,s=!0,a;if(t!==void 0&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";var o=t.length-1,l=-1;for(a=e.length-1;a>=0;--a){var h=e.charCodeAt(a);if(h===47){if(!s){r=a+1;break}}else l===-1&&(s=!1,l=a+1),o>=0&&(h===t.charCodeAt(o)?--o==-1&&(n=a):(o=-1,n=l))}return r===n?n=l:n===-1&&(n=e.length),e.slice(r,n)}else{for(a=e.length-1;a>=0;--a)if(e.charCodeAt(a)===47){if(!s){r=a+1;break}}else n===-1&&(s=!1,n=a+1);return n===-1?"":e.slice(r,n)}},extname:function(e){Jt(e);for(var t=-1,r=0,n=-1,s=!0,a=0,o=e.length-1;o>=0;--o){var l=e.charCodeAt(o);if(l===47){if(!s){r=o+1;break}continue}n===-1&&(s=!1,n=o+1),l===46?t===-1?t=o:a!==1&&(a=1):t!==-1&&(a=-1)}return t===-1||n===-1||a===0||a===1&&t===n-1&&t===r+1?"":e.slice(t,n)},format:function(e){if(e===null||typeof e!="object")throw new TypeError('Parameter "pathObject" must be an object, not '+typeof e);return md("/",e)},parse:function(e){Jt(e);var t={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return t;var r=e.charCodeAt(0),n=r===47,s;n?(t.root="/",s=1):s=0;for(var a=-1,o=0,l=-1,h=!0,u=e.length-1,c=0;u>=s;--u){if(r=e.charCodeAt(u),r===47){if(!h){o=u+1;break}continue}l===-1&&(h=!1,l=u+1),r===46?a===-1?a=u:c!==1&&(c=1):a!==-1&&(c=-1)}return a===-1||l===-1||c===0||c===1&&a===l-1&&a===o+1?l!==-1&&(o===0&&n?t.base=t.name=e.slice(1,l):t.base=t.name=e.slice(o,l)):(o===0&&n?(t.name=e.slice(1,a),t.base=e.slice(1,l)):(t.name=e.slice(o,a),t.base=e.slice(o,l)),t.ext=e.slice(a,l)),o>0?t.dir=e.slice(0,o-1):n&&(t.dir="/"),t},sep:"/",delimiter:":",posix:null},mi=yn;class ai{constructor(e){var t,r;t=e.indexOf("://"),t>-1&&(e=new URL(e).pathname),r=this.parse(e),this.path=e,this.isDirectory(e)?this.directory=e:this.directory=r.dir+"/",this.filename=r.base,this.extension=r.ext.slice(1)}parse(e){return mi.parse(e)}isAbsolute(e){return mi.isAbsolute(e||this.path)}isDirectory(e){return e.charAt(e.length-1)==="/"}resolve(e){return mi.resolve(this.directory,e)}relative(e){var t=e&&e.indexOf("://")>-1;return t?e:mi.relative(this.directory,e)}splitPath(e){return this.splitPathRe.exec(e).slice(1)}toString(){return this.path}}class Ht{constructor(e,t){var r=e.indexOf("://")>-1,n=e,s;if(this.Url=void 0,this.href=e,this.protocol="",this.origin="",this.hash="",this.hash="",this.search="",this.base=t,!r&&t!==!1&&typeof t!="string"&&window&&window.location&&(this.base=window.location.href),r||this.base)try{this.base?this.Url=new URL(e,this.base):this.Url=new URL(e),this.href=this.Url.href,this.protocol=this.Url.protocol,this.origin=this.Url.origin,this.hash=this.Url.hash,this.search=this.Url.search,n=this.Url.pathname+(this.Url.search?this.Url.search:"")}catch{this.Url=void 0,this.base&&(s=new ai(this.base),n=s.resolve(n))}this.Path=new ai(n),this.directory=this.Path.directory,this.filename=this.Path.filename,this.extension=this.Path.extension}path(){return this.Path}resolve(e){var t=e.indexOf("://")>-1,r;return t?e:(r=mi.resolve(this.directory,e),this.origin+r)}relative(e){return mi.relative(e,this.directory)}toString(){return this.href}}const er=1,zt=3,yd=9;class He{constructor(e,t,r){var n;if(this.str="",this.base={},this.spinePos=0,this.range=!1,this.path={},this.start=null,this.end=null,!(this instanceof He))return new He(e,t,r);if(typeof t=="string"?this.base=this.parseComponent(t):typeof t=="object"&&t.steps&&(this.base=t),n=this.checkType(e),n==="string")return this.str=e,xt(this,this.parse(e));if(n==="range")return xt(this,this.fromRange(e,this.base,r));if(n==="node")return xt(this,this.fromNode(e,this.base,r));if(n==="EpubCFI"&&e.path)return e;if(e)throw new TypeError("not a valid argument for EpubCFI");return this}checkType(e){return this.isCfiString(e)?"string":e&&typeof e=="object"&&(dd(e)==="Range"||typeof e.startContainer!="undefined")?"range":e&&typeof e=="object"&&typeof e.nodeType!="undefined"?"node":e&&typeof e=="object"&&e instanceof He?"EpubCFI":!1}parse(e){var t={spinePos:-1,range:!1,base:{},path:{},start:null,end:null},r,n,s;return typeof e!="string"?{spinePos:-1}:(e.indexOf("epubcfi(")===0&&e[e.length-1]===")"&&(e=e.slice(8,e.length-1)),r=this.getChapterComponent(e),r?(t.base=this.parseComponent(r),n=this.getPathComponent(e),t.path=this.parseComponent(n),s=this.getRange(e),s&&(t.range=!0,t.start=this.parseComponent(s[0]),t.end=this.parseComponent(s[1])),t.spinePos=t.base.steps[1].index,t):{spinePos:-1})}parseComponent(e){var t={steps:[],terminal:{offset:null,assertion:null}},r=e.split(":"),n=r[0].split("/"),s;return r.length>1&&(s=r[1],t.terminal=this.parseTerminal(s)),n[0]===""&&n.shift(),t.steps=n.map(function(a){return this.parseStep(a)}.bind(this)),t}parseStep(e){var t,r,n,s,a;if(s=e.match(/\[(.*)\]/),s&&s[1]&&(a=s[1]),r=parseInt(e),!isNaN(r))return r%2==0?(t="element",n=r/2-1):(t="text",n=(r-1)/2),{type:t,index:n,id:a||null}}parseTerminal(e){var t,r,n=e.match(/\[(.*)\]/);return n&&n[1]?(t=parseInt(e.split("[")[0]),r=n[1]):t=parseInt(e),lt(t)||(t=null),{offset:t,assertion:r}}getChapterComponent(e){var t=e.split("!");return t[0]}getPathComponent(e){var t=e.split("!");if(t[1])return t[1].split(",")[0]}getRange(e){var t=e.split(",");return t.length===3?[t[1],t[2]]:!1}getCharecterOffsetComponent(e){var t=e.split(":");return t[1]||""}joinSteps(e){return e?e.map(function(t){var r="";return t.type==="element"&&(r+=(t.index+1)*2),t.type==="text"&&(r+=1+2*t.index),t.id&&(r+="["+t.id+"]"),r}).join("/"):""}segmentString(e){var t="/";return t+=this.joinSteps(e.steps),e.terminal&&e.terminal.offset!=null&&(t+=":"+e.terminal.offset),e.terminal&&e.terminal.assertion!=null&&(t+="["+e.terminal.assertion+"]"),t}toString(){var e="epubcfi(";return e+=this.segmentString(this.base),e+="!",e+=this.segmentString(this.path),this.range&&this.start&&(e+=",",e+=this.segmentString(this.start)),this.range&&this.end&&(e+=",",e+=this.segmentString(this.end)),e+=")",e}compare(e,t){var r,n,s,a;if(typeof e=="string"&&(e=new He(e)),typeof t=="string"&&(t=new He(t)),e.spinePos>t.spinePos)return 1;if(e.spinePos<t.spinePos)return-1;e.range?(r=e.path.steps.concat(e.start.steps),s=e.start.terminal):(r=e.path.steps,s=e.path.terminal),t.range?(n=t.path.steps.concat(t.start.steps),a=t.start.terminal):(n=t.path.steps,a=t.path.terminal);for(var o=0;o<r.length;o++){if(!r[o])return-1;if(!n[o]||r[o].index>n[o].index)return 1;if(r[o].index<n[o].index)return-1}return r.length<n.length?-1:s.offset>a.offset?1:s.offset<a.offset?-1:0}step(e){var t=e.nodeType===zt?"text":"element";return{id:e.id,tagName:e.tagName,type:t,index:this.position(e)}}filteredStep(e,t){var r=this.filter(e,t),n;if(!!r)return n=r.nodeType===zt?"text":"element",{id:r.id,tagName:r.tagName,type:n,index:this.filteredPosition(r,t)}}pathTo(e,t,r){for(var n={steps:[],terminal:{offset:null,assertion:null}},s=e,a;s&&s.parentNode&&s.parentNode.nodeType!=yd;)r?a=this.filteredStep(s,r):a=this.step(s),a&&n.steps.unshift(a),s=s.parentNode;return t!=null&&t>=0&&(n.terminal.offset=t,n.steps[n.steps.length-1].type!="text"&&n.steps.push({type:"text",index:0})),n}equalStep(e,t){return!e||!t?!1:e.index===t.index&&e.id===t.id&&e.type===t.type}fromRange(e,t,r){var n={range:!1,base:{},path:{},start:null,end:null},s=e.startContainer,a=e.endContainer,o=e.startOffset,l=e.endOffset,h=!1;if(r&&(h=s.ownerDocument.querySelector("."+r)!=null),typeof t=="string"?(n.base=this.parseComponent(t),n.spinePos=n.base.steps[1].index):typeof t=="object"&&(n.base=t),e.collapsed)h&&(o=this.patchOffset(s,o,r)),n.path=this.pathTo(s,o,r);else{n.range=!0,h&&(o=this.patchOffset(s,o,r)),n.start=this.pathTo(s,o,r),h&&(l=this.patchOffset(a,l,r)),n.end=this.pathTo(a,l,r),n.path={steps:[],terminal:null};var u=n.start.steps.length,c;for(c=0;c<u&&this.equalStep(n.start.steps[c],n.end.steps[c]);c++)c===u-1?n.start.terminal===n.end.terminal&&(n.path.steps.push(n.start.steps[c]),n.range=!1):n.path.steps.push(n.start.steps[c]);n.start.steps=n.start.steps.slice(n.path.steps.length),n.end.steps=n.end.steps.slice(n.path.steps.length)}return n}fromNode(e,t,r){var n={range:!1,base:{},path:{},start:null,end:null};return typeof t=="string"?(n.base=this.parseComponent(t),n.spinePos=n.base.steps[1].index):typeof t=="object"&&(n.base=t),n.path=this.pathTo(e,null,r),n}filter(e,t){var r,n,s,a,o,l=!1;return e.nodeType===zt?(l=!0,s=e.parentNode,r=e.parentNode.classList.contains(t)):(l=!1,r=e.classList.contains(t)),r&&l?(a=s.previousSibling,o=s.nextSibling,a&&a.nodeType===zt?n=a:o&&o.nodeType===zt&&(n=o),n||e):r&&!l?!1:e}patchOffset(e,t,r){if(e.nodeType!=zt)throw new Error("Anchor must be a text node");var n=e,s=t;for(e.parentNode.classList.contains(r)&&(n=e.parentNode);n.previousSibling;){if(n.previousSibling.nodeType===er)if(n.previousSibling.classList.contains(r))s+=n.previousSibling.textContent.length;else break;else s+=n.previousSibling.textContent.length;n=n.previousSibling}return s}normalizedMap(e,t,r){var n={},s=-1,a,o=e.length,l,h;for(a=0;a<o;a++)l=e[a].nodeType,l===er&&e[a].classList.contains(r)&&(l=zt),a>0&&l===zt&&h===zt?n[a]=s:t===l&&(s=s+1,n[a]=s),h=l;return n}position(e){var t,r;return e.nodeType===er?(t=e.parentNode.children,t||(t=kl(e.parentNode)),r=Array.prototype.indexOf.call(t,e)):(t=this.textNodes(e.parentNode),r=t.indexOf(e)),r}filteredPosition(e,t){var r,n,s;return e.nodeType===er?(r=e.parentNode.children,s=this.normalizedMap(r,er,t)):(r=e.parentNode.childNodes,e.parentNode.classList.contains(t)&&(e=e.parentNode,r=e.parentNode.childNodes),s=this.normalizedMap(r,zt,t)),n=Array.prototype.indexOf.call(r,e),s[n]}stepsToXpath(e){var t=[".","*"];return e.forEach(function(r){var n=r.index+1;r.id?t.push("*[position()="+n+" and @id='"+r.id+"']"):r.type==="text"?t.push("text()["+n+"]"):t.push("*["+n+"]")}),t.join("/")}stepsToQuerySelector(e){var t=["html"];return e.forEach(function(r){var n=r.index+1;r.id?t.push("#"+r.id):r.type==="text"||t.push("*:nth-child("+n+")")}),t.join(">")}textNodes(e,t){return Array.prototype.slice.call(e.childNodes).filter(function(r){return r.nodeType===zt?!0:!!(t&&r.classList.contains(t))})}walkToNode(e,t,r){var n=t||document,s=n.documentElement,a,o,l=e.length,h;for(h=0;h<l&&(o=e[h],o.type==="element"?o.id?s=n.getElementById(o.id):(a=s.children||kl(s),s=a[o.index]):o.type==="text"&&(s=this.textNodes(s,r)[o.index]),!!s);h++);return s}findNode(e,t,r){var n=t||document,s,a;return!r&&typeof n.evaluate!="undefined"?(a=this.stepsToXpath(e),s=n.evaluate(a,n,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue):r?s=this.walkToNode(e,n,r):s=this.walkToNode(e,n),s}fixMiss(e,t,r,n){var s=this.findNode(e.slice(0,-1),r,n),a=s.childNodes,o=this.normalizedMap(a,zt,n),l,h,u=e[e.length-1].index;for(let c in o){if(!o.hasOwnProperty(c))return;if(o[c]===u)if(l=a[c],h=l.textContent.length,t>h)t=t-h;else{l.nodeType===er?s=l.childNodes[0]:s=l;break}}return{container:s,offset:t}}toRange(e,t){var r=e||document,n,s,a,o,l,h=this,u,c,v=t?r.querySelector("."+t)!=null:!1,g;if(typeof r.createRange!="undefined"?n=r.createRange():n=new gd,h.range?(s=h.start,u=h.path.steps.concat(s.steps),o=this.findNode(u,r,v?t:null),a=h.end,c=h.path.steps.concat(a.steps),l=this.findNode(c,r,v?t:null)):(s=h.path,u=h.path.steps,o=this.findNode(h.path.steps,r,v?t:null)),o)try{s.terminal.offset!=null?n.setStart(o,s.terminal.offset):n.setStart(o,0)}catch{g=this.fixMiss(u,s.terminal.offset,r,v?t:null),n.setStart(g.container,g.offset)}else return console.log("No startContainer found for",this.toString()),null;if(l)try{a.terminal.offset!=null?n.setEnd(l,a.terminal.offset):n.setEnd(l,0)}catch{g=this.fixMiss(c,h.end.terminal.offset,r,v?t:null),n.setEnd(g.container,g.offset)}return n}isCfiString(e){return typeof e=="string"&&e.indexOf("epubcfi(")===0&&e[e.length-1]===")"}generateChapterComponent(e,t,r){var n=parseInt(t),s=(e+1)*2,a="/"+s+"/";return a+=(n+1)*2,r&&(a+="["+r+"]"),a}collapse(e){!this.range||(this.range=!1,e?(this.path.steps=this.path.steps.concat(this.start.steps),this.path.terminal=this.start.terminal):(this.path.steps=this.path.steps.concat(this.end.steps),this.path.terminal=this.end.terminal))}}class $t{constructor(e){this.context=e||this,this.hooks=[]}register(){for(var e=0;e<arguments.length;++e)if(typeof arguments[e]=="function")this.hooks.push(arguments[e]);else for(var t=0;t<arguments[e].length;++t)this.hooks.push(arguments[e][t])}deregister(e){let t;for(let r=0;r<this.hooks.length;r++)if(t=this.hooks[r],t===e){this.hooks.splice(r,1);break}}trigger(){var e=arguments,t=this.context,r=[];return this.hooks.forEach(function(n){try{var s=n.apply(t,e)}catch(a){console.log(a)}s&&typeof s.then=="function"&&r.push(s)}),Promise.all(r)}list(){return this.hooks}clear(){return this.hooks=[]}}function Ol(i,e){var t,r,n=e.url,s=n.indexOf("://")>-1;!i||(r=Qe(i,"head"),t=Qe(r,"base"),t||(t=i.createElement("base"),r.insertBefore(t,r.firstChild)),!s&&window&&window.location&&(n=window.location.origin+n),t.setAttribute("href",n))}function _d(i,e){var t,r,n=e.canonical;!i||(t=Qe(i,"head"),r=Qe(t,"link[rel='canonical']"),r?r.setAttribute("href",n):(r=i.createElement("link"),r.setAttribute("rel","canonical"),r.setAttribute("href",n),t.appendChild(r)))}function bd(i,e){var t,r,n=e.idref;!i||(t=Qe(i,"head"),r=Qe(t,"link[property='dc.identifier']"),r?r.setAttribute("content",n):(r=i.createElement("meta"),r.setAttribute("name","dc.identifier"),r.setAttribute("content",n),t.appendChild(r)))}function wd(i,e){var t=i.querySelectorAll("a[href]");if(!!t.length)for(var r=Qe(i.ownerDocument,"base"),n=r?r.getAttribute("href"):void 0,s=function(o){var l=o.getAttribute("href");if(l.indexOf("mailto:")!==0){var h=l.indexOf("://")>-1;if(h)o.setAttribute("target","_blank");else{var u;try{u=new Ht(l,n)}catch{}o.onclick=function(){return u&&u.hash?e(u.Path.path+u.hash):e(u?u.Path.path:l),!1}}}}.bind(this),a=0;a<t.length;a++)s(t[a])}function Rl(i,e,t){return e.forEach(function(r,n){r&&t[n]&&(r=r.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),i=i.replace(new RegExp(r,"g"),t[n]))}),i}function Ir(i,e,t,r){var n=typeof window!="undefined"?window.URL:!1,s=n?"blob":"arraybuffer",a=new je,o=new XMLHttpRequest,l=XMLHttpRequest.prototype,h;"overrideMimeType"in l||Object.defineProperty(l,"overrideMimeType",{value:function(){}}),t&&(o.withCredentials=!0),o.onreadystatechange=c,o.onerror=u,o.open("GET",i,!0);for(h in r)o.setRequestHeader(h,r[h]);e=="json"&&o.setRequestHeader("Accept","application/json"),e||(e=new ai(i).extension),e=="blob"&&(o.responseType=s),mn(e)&&o.overrideMimeType("text/xml"),e=="binary"&&(o.responseType="arraybuffer"),o.send();function u(v){a.reject(v)}function c(){if(this.readyState===XMLHttpRequest.DONE){var v=!1;if((this.responseType===""||this.responseType==="document")&&(v=this.responseXML),this.status===200||this.status===0||v){var g;if(!this.response&&!v)return a.reject({status:this.status,message:"Empty Response",stack:new Error().stack}),a.promise;if(this.status===403)return a.reject({status:this.status,response:this.response,message:"Forbidden",stack:new Error().stack}),a.promise;v?g=this.responseXML:mn(e)?g=si(this.response,"text/xml"):e=="xhtml"?g=si(this.response,"application/xhtml+xml"):e=="html"||e=="htm"?g=si(this.response,"text/html"):e=="json"?g=JSON.parse(this.response):e=="blob"?n?g=this.response:g=new Blob([this.response]):g=this.response,a.resolve(g)}else a.reject({status:this.status,message:this.response,stack:new Error().stack})}}return a.promise}class xd{constructor(e,t){this.idref=e.idref,this.linear=e.linear==="yes",this.properties=e.properties,this.index=e.index,this.href=e.href,this.url=e.url,this.canonical=e.canonical,this.next=e.next,this.prev=e.prev,this.cfiBase=e.cfiBase,t?this.hooks=t:(this.hooks={},this.hooks.serialize=new $t(this),this.hooks.content=new $t(this)),this.document=void 0,this.contents=void 0,this.output=void 0}load(e){var t=e||this.request||Ir,r=new je,n=r.promise;return this.contents?r.resolve(this.contents):t(this.url).then(function(s){return this.document=s,this.contents=s.documentElement,this.hooks.content.trigger(this.document,this)}.bind(this)).then(function(){r.resolve(this.contents)}.bind(this)).catch(function(s){r.reject(s)}),n}base(){return Ol(this.document,this)}render(e){var t=new je,r=t.promise;return this.output,this.load(e).then(function(n){var s=typeof navigator!="undefined"&&navigator.userAgent||"",a=s.indexOf("Trident")>=0,o;typeof XMLSerializer=="undefined"||a?o=wl:o=XMLSerializer;var l=new o;return this.output=l.serializeToString(n),this.output}.bind(this)).then(function(){return this.hooks.serialize.trigger(this.output,this)}.bind(this)).then(function(){t.resolve(this.output)}.bind(this)).catch(function(n){t.reject(n)}),r}find(e){var t=this,r=[],n=e.toLowerCase(),s=function(a){for(var o=a.textContent.toLowerCase(),l=t.document.createRange(),h,u,c=-1,v,g=150;u!=-1;)u=o.indexOf(n,c+1),u!=-1&&(l=t.document.createRange(),l.setStart(a,u),l.setEnd(a,u+n.length),h=t.cfiFromRange(l),a.textContent.length<g?v=a.textContent:(v=a.textContent.substring(u-g/2,u+g/2),v="..."+v+"..."),r.push({cfi:h,excerpt:v})),c=u};return Ks(t.document,function(a){s(a)}),r}search(e,t=5){if(typeof document.createTreeWalker=="undefined")return this.find(e);let r=[];const n=150,s=this,a=e.toLowerCase(),o=function(c){const I=c.reduce((w,p)=>w+p.textContent,"").toLowerCase().indexOf(a);if(I!=-1){const w=0,p=I+a.length;let d=0,_=0;if(I<c[w].length){let T;for(;d<c.length-1&&(_+=c[d].length,!(p<=_));)d+=1;let N=c[w],y=c[d],S=s.document.createRange();S.setStart(N,I);let k=c.slice(0,d).reduce(($,U)=>$+U.textContent.length,0);S.setEnd(y,k>p?p:p-k),T=s.cfiFromRange(S);let z=c.slice(0,d+1).reduce(($,U)=>$+U.textContent,"");z.length>n&&(z=z.substring(I-n/2,I+n/2),z="..."+z+"..."),r.push({cfi:T,excerpt:z})}}},l=document.createTreeWalker(s.document,NodeFilter.SHOW_TEXT,null,!1);let h,u=[];for(;h=l.nextNode();)u.push(h),u.length==t&&(o(u.slice(0,t)),u=u.slice(1,t));return u.length>0&&o(u),r}reconcileLayoutSettings(e){var t={layout:e.layout,spread:e.spread,orientation:e.orientation};return this.properties.forEach(function(r){var n=r.replace("rendition:",""),s=n.indexOf("-"),a,o;s!=-1&&(a=n.slice(0,s),o=n.slice(s+1),t[a]=o)}),t}cfiFromRange(e){return new He(e,this.cfiBase).toString()}cfiFromElement(e){return new He(e,this.cfiBase).toString()}unload(){this.document=void 0,this.contents=void 0,this.output=void 0}destroy(){this.unload(),this.hooks.serialize.clear(),this.hooks.content.clear(),this.hooks=void 0,this.idref=void 0,this.linear=void 0,this.properties=void 0,this.index=void 0,this.href=void 0,this.url=void 0,this.next=void 0,this.prev=void 0,this.cfiBase=void 0}}class Ed{constructor(){this.spineItems=[],this.spineByHref={},this.spineById={},this.hooks={},this.hooks.serialize=new $t,this.hooks.content=new $t,this.hooks.content.register(Ol),this.hooks.content.register(_d),this.hooks.content.register(bd),this.epubcfi=new He,this.loaded=!1,this.items=void 0,this.manifest=void 0,this.spineNodeIndex=void 0,this.baseUrl=void 0,this.length=void 0}unpack(e,t,r){this.items=e.spine,this.manifest=e.manifest,this.spineNodeIndex=e.spineNodeIndex,this.baseUrl=e.baseUrl||e.basePath||"",this.length=this.items.length,this.items.forEach((n,s)=>{var a=this.manifest[n.idref],o;n.index=s,n.cfiBase=this.epubcfi.generateChapterComponent(this.spineNodeIndex,n.index,n.id),n.href&&(n.url=t(n.href,!0),n.canonical=r(n.href)),a&&(n.href=a.href,n.url=t(n.href,!0),n.canonical=r(n.href),a.properties.length&&n.properties.push.apply(n.properties,a.properties)),n.linear==="yes"?(n.prev=function(){let l=n.index;for(;l>0;){let h=this.get(l-1);if(h&&h.linear)return h;l-=1}}.bind(this),n.next=function(){let l=n.index;for(;l<this.spineItems.length-1;){let h=this.get(l+1);if(h&&h.linear)return h;l+=1}}.bind(this)):(n.prev=function(){},n.next=function(){}),o=new xd(n,this.hooks),this.append(o)}),this.loaded=!0}get(e){var t=0;if(typeof e=="undefined")for(;t<this.spineItems.length;){let r=this.spineItems[t];if(r&&r.linear)break;t+=1}else this.epubcfi.isCfiString(e)?t=new He(e).spinePos:typeof e=="number"||isNaN(e)===!1?t=e:typeof e=="string"&&e.indexOf("#")===0?t=this.spineById[e.substring(1)]:typeof e=="string"&&(e=e.split("#")[0],t=this.spineByHref[e]||this.spineByHref[encodeURI(e)]);return this.spineItems[t]||null}append(e){var t=this.spineItems.length;return e.index=t,this.spineItems.push(e),this.spineByHref[decodeURI(e.href)]=t,this.spineByHref[encodeURI(e.href)]=t,this.spineByHref[e.href]=t,this.spineById[e.idref]=t,t}prepend(e){return this.spineByHref[e.href]=0,this.spineById[e.idref]=0,this.spineItems.forEach(function(t,r){t.index=r}),0}remove(e){var t=this.spineItems.indexOf(e);if(t>-1)return delete this.spineByHref[e.href],delete this.spineById[e.idref],this.spineItems.splice(t,1)}each(){return this.spineItems.forEach.apply(this.spineItems,arguments)}first(){let e=0;do{let t=this.get(e);if(t&&t.linear)return t;e+=1}while(e<this.spineItems.length)}last(){let e=this.spineItems.length-1;do{let t=this.get(e);if(t&&t.linear)return t;e-=1}while(e>=0)}destroy(){this.each(e=>e.destroy()),this.spineItems=void 0,this.spineByHref=void 0,this.spineById=void 0,this.hooks.serialize.clear(),this.hooks.content.clear(),this.hooks=void 0,this.epubcfi=void 0,this.loaded=!1,this.items=void 0,this.manifest=void 0,this.spineNodeIndex=void 0,this.baseUrl=void 0,this.length=void 0}}class Js{constructor(e){this._q=[],this.context=e,this.tick=xl,this.running=!1,this.paused=!1}enqueue(){var e,t,r,n=[].shift.call(arguments),s=arguments;if(!n)throw new Error("No Task Provided");return typeof n=="function"?(e=new je,t=e.promise,r={task:n,args:s,deferred:e,promise:t}):r={promise:n},this._q.push(r),this.paused==!1&&!this.running&&this.run(),r.promise}dequeue(){var e,t,r;if(this._q.length&&!this.paused){if(e=this._q.shift(),t=e.task,t)return r=t.apply(this.context,e.args),r&&typeof r.then=="function"?r.then(function(){e.deferred.resolve.apply(this.context,arguments)}.bind(this),function(){e.deferred.reject.apply(this.context,arguments)}.bind(this)):(e.deferred.resolve.apply(this.context,r),e.promise);if(e.promise)return e.promise}else return e=new je,e.deferred.resolve(),e.promise}dump(){for(;this._q.length;)this.dequeue()}run(){return this.running||(this.running=!0,this.defered=new je),this.tick.call(window,()=>{this._q.length?this.dequeue().then(function(){this.run()}.bind(this)):(this.defered.resolve(),this.running=void 0)}),this.paused==!0&&(this.paused=!1),this.defered.promise}flush(){if(this.running)return this.running;if(this._q.length)return this.running=this.dequeue().then(function(){return this.running=void 0,this.flush()}.bind(this)),this.running}clear(){this._q=[]}length(){return this._q.length}pause(){this.paused=!0}stop(){this._q=[],this.running=!1,this.paused=!0}}const Qs="0.3",_n=["keydown","keyup","keypressed","mouseup","mousedown","mousemove","click","touchend","touchstart","touchmove"],pe={BOOK:{OPEN_FAILED:"openFailed"},CONTENTS:{EXPAND:"expand",RESIZE:"resize",SELECTED:"selected",SELECTED_RANGE:"selectedRange",LINK_CLICKED:"linkClicked"},LOCATIONS:{CHANGED:"changed"},MANAGERS:{RESIZE:"resize",RESIZED:"resized",ORIENTATION_CHANGE:"orientationchange",ADDED:"added",SCROLL:"scroll",SCROLLED:"scrolled",REMOVED:"removed"},VIEWS:{AXIS:"axis",WRITING_MODE:"writingMode",LOAD_ERROR:"loaderror",RENDERED:"rendered",RESIZED:"resized",DISPLAYED:"displayed",SHOWN:"shown",HIDDEN:"hidden",MARK_CLICKED:"markClicked"},RENDITION:{STARTED:"started",ATTACHED:"attached",DISPLAYED:"displayed",DISPLAY_ERROR:"displayerror",RENDERED:"rendered",REMOVED:"removed",RESIZED:"resized",ORIENTATION_CHANGE:"orientationchange",LOCATION_CHANGED:"locationChanged",RELOCATED:"relocated",MARK_CLICKED:"markClicked",SELECTED:"selected",LAYOUT:"layout"},LAYOUT:{UPDATED:"updated"},ANNOTATION:{ATTACH:"attach",DETACH:"detach"}};class Ll{constructor(e,t,r){this.spine=e,this.request=t,this.pause=r||100,this.q=new Js(this),this.epubcfi=new He,this._locations=[],this._locationsWords=[],this.total=0,this.break=150,this._current=0,this._wordCounter=0,this.currentLocation="",this._currentCfi="",this.processingTimeout=void 0}generate(e){return e&&(this.break=e),this.q.pause(),this.spine.each(function(t){t.linear&&this.q.enqueue(this.process.bind(this),t)}.bind(this)),this.q.run().then(function(){return this.total=this._locations.length-1,this._currentCfi&&(this.currentLocation=this._currentCfi),this._locations}.bind(this))}createRange(){return{startContainer:void 0,startOffset:void 0,endContainer:void 0,endOffset:void 0}}process(e){return e.load(this.request).then(function(t){var r=new je,n=this.parse(t,e.cfiBase);return this._locations=this._locations.concat(n),e.unload(),this.processingTimeout=setTimeout(()=>r.resolve(n),this.pause),r.promise}.bind(this))}parse(e,t,r){var n=[],s,a=e.ownerDocument,o=Qe(a,"body"),l=0,h,u=r||this.break,c=function(v){var g=v.length,I,w=0;if(v.textContent.trim().length===0)return!1;for(l==0&&(s=this.createRange(),s.startContainer=v,s.startOffset=0),I=u-l,I>g&&(l+=g,w=g);w<g;)if(I=u-l,l===0&&(w+=1,s=this.createRange(),s.startContainer=v,s.startOffset=w),w+I>=g)l+=g-w,w=g;else{w+=I,s.endContainer=v,s.endOffset=w;let p=new He(s,t).toString();n.push(p),l=0}h=v};if(Ks(o,c.bind(this)),s&&s.startContainer&&h){s.endContainer=h,s.endOffset=h.length;let v=new He(s,t).toString();n.push(v),l=0}return n}generateFromWords(e,t,r){var n=e?new He(e):void 0;return this.q.pause(),this._locationsWords=[],this._wordCounter=0,this.spine.each(function(s){s.linear&&(n?s.index>=n.spinePos&&this.q.enqueue(this.processWords.bind(this),s,t,n,r):this.q.enqueue(this.processWords.bind(this),s,t,n,r))}.bind(this)),this.q.run().then(function(){return this._currentCfi&&(this.currentLocation=this._currentCfi),this._locationsWords}.bind(this))}processWords(e,t,r,n){return n&&this._locationsWords.length>=n?Promise.resolve():e.load(this.request).then(function(s){var a=new je,o=this.parseWords(s,e,t,r),l=n-this._locationsWords.length;return this._locationsWords=this._locationsWords.concat(o.length>=n?o.slice(0,l):o),e.unload(),this.processingTimeout=setTimeout(()=>a.resolve(o),this.pause),a.promise}.bind(this))}countWords(e){return e=e.replace(/(^\s*)|(\s*$)/gi,""),e=e.replace(/[ ]{2,}/gi," "),e=e.replace(/\n /,`
`),e.split(" ").length}parseWords(e,t,r,n){var s=t.cfiBase,a=[],o=e.ownerDocument,l=Qe(o,"body"),h=r,u=n?n.spinePos!==t.index:!0,c;n&&t.index===n.spinePos&&(c=n.findNode(n.range?n.path.steps.concat(n.start.steps):n.path.steps,e.ownerDocument));var v=function(g){if(!u)if(g===c)u=!0;else return!1;if(g.textContent.length<10&&g.textContent.trim().length===0)return!1;var I=this.countWords(g.textContent),w,p=0;if(I===0)return!1;for(w=h-this._wordCounter,w>I&&(this._wordCounter+=I,p=I);p<I;)if(w=h-this._wordCounter,p+w>=I)this._wordCounter+=I-p,p=I;else{p+=w;let d=new He(g,s);a.push({cfi:d.toString(),wordCount:this._wordCounter}),this._wordCounter=0}};return Ks(l,v.bind(this)),a}locationFromCfi(e){let t;return He.prototype.isCfiString(e)&&(e=new He(e)),this._locations.length===0?-1:(t=gn(e,this._locations,this.epubcfi.compare),t>this.total?this.total:t)}percentageFromCfi(e){if(this._locations.length===0)return null;var t=this.locationFromCfi(e);return this.percentageFromLocation(t)}percentageFromLocation(e){return!e||!this.total?0:e/this.total}cfiFromLocation(e){var t=-1;return typeof e!="number"&&(e=parseInt(e)),e>=0&&e<this._locations.length&&(t=this._locations[e]),t}cfiFromPercentage(e){let t;if(e>1&&console.warn("Normalize cfiFromPercentage value to between 0 - 1"),e>=1){let r=new He(this._locations[this.total]);return r.collapse(),r.toString()}return t=Math.ceil(this.total*e),this.cfiFromLocation(t)}load(e){return typeof e=="string"?this._locations=JSON.parse(e):this._locations=e,this.total=this._locations.length-1,this._locations}save(){return JSON.stringify(this._locations)}getCurrent(){return this._current}setCurrent(e){var t;if(typeof e=="string")this._currentCfi=e;else if(typeof e=="number")this._current=e;else return;this._locations.length!==0&&(typeof e=="string"?(t=this.locationFromCfi(e),this._current=t):t=e,this.emit(pe.LOCATIONS.CHANGED,{percentage:this.percentageFromLocation(t)}))}get currentLocation(){return this._current}set currentLocation(e){this.setCurrent(e)}length(){return this._locations.length}destroy(){this.spine=void 0,this.request=void 0,this.pause=void 0,this.q.stop(),this.q=void 0,this.epubcfi=void 0,this._locations=void 0,this.total=void 0,this.break=void 0,this._current=void 0,this.currentLocation=void 0,this._currentCfi=void 0,clearTimeout(this.processingTimeout)}}Gt(Ll.prototype);class Td{constructor(e){this.packagePath="",this.directory="",this.encoding="",e&&this.parse(e)}parse(e){var t;if(!e)throw new Error("Container File Not Found");if(t=Qe(e,"rootfile"),!t)throw new Error("No RootFile Found");this.packagePath=t.getAttribute("full-path"),this.directory=mi.dirname(this.packagePath),this.encoding=e.xmlEncoding}destroy(){this.packagePath=void 0,this.directory=void 0,this.encoding=void 0}}class Dl{constructor(e){this.manifest={},this.navPath="",this.ncxPath="",this.coverPath="",this.spineNodeIndex=0,this.spine=[],this.metadata={},e&&this.parse(e)}parse(e){var t,r,n;if(!e)throw new Error("Package File Not Found");if(t=Qe(e,"metadata"),!t)throw new Error("No Metadata Found");if(r=Qe(e,"manifest"),!r)throw new Error("No Manifest Found");if(n=Qe(e,"spine"),!n)throw new Error("No Spine Found");return this.manifest=this.parseManifest(r),this.navPath=this.findNavPath(r),this.ncxPath=this.findNcxPath(r,n),this.coverPath=this.findCoverPath(e),this.spineNodeIndex=fd(n),this.spine=this.parseSpine(n,this.manifest),this.uniqueIdentifier=this.findUniqueIdentifier(e),this.metadata=this.parseMetadata(t),this.metadata.direction=n.getAttribute("page-progression-direction"),{metadata:this.metadata,spine:this.spine,manifest:this.manifest,navPath:this.navPath,ncxPath:this.ncxPath,coverPath:this.coverPath,spineNodeIndex:this.spineNodeIndex}}parseMetadata(e){var t={};return t.title=this.getElementText(e,"title"),t.creator=this.getElementText(e,"creator"),t.description=this.getElementText(e,"description"),t.pubdate=this.getElementText(e,"date"),t.publisher=this.getElementText(e,"publisher"),t.identifier=this.getElementText(e,"identifier"),t.language=this.getElementText(e,"language"),t.rights=this.getElementText(e,"rights"),t.modified_date=this.getPropertyText(e,"dcterms:modified"),t.layout=this.getPropertyText(e,"rendition:layout"),t.orientation=this.getPropertyText(e,"rendition:orientation"),t.flow=this.getPropertyText(e,"rendition:flow"),t.viewport=this.getPropertyText(e,"rendition:viewport"),t.media_active_class=this.getPropertyText(e,"media:active-class"),t.spread=this.getPropertyText(e,"rendition:spread"),t}parseManifest(e){var t={},r=gi(e,"item"),n=Array.prototype.slice.call(r);return n.forEach(function(s){var a=s.getAttribute("id"),o=s.getAttribute("href")||"",l=s.getAttribute("media-type")||"",h=s.getAttribute("media-overlay")||"",u=s.getAttribute("properties")||"";t[a]={href:o,type:l,overlay:h,properties:u.length?u.split(" "):[]}}),t}parseSpine(e,t){var r=[],n=gi(e,"itemref"),s=Array.prototype.slice.call(n);return s.forEach(function(a,o){var l=a.getAttribute("idref"),h=a.getAttribute("properties")||"",u=h.length?h.split(" "):[],c={id:a.getAttribute("id"),idref:l,linear:a.getAttribute("linear")||"yes",properties:u,index:o};r.push(c)}),r}findUniqueIdentifier(e){var t=e.documentElement.getAttribute("unique-identifier");if(!t)return"";var r=e.getElementById(t);return r&&r.localName==="identifier"&&r.namespaceURI==="http://purl.org/dc/elements/1.1/"&&r.childNodes.length>0?r.childNodes[0].nodeValue.trim():""}findNavPath(e){var t=kr(e,"item",{properties:"nav"});return t?t.getAttribute("href"):!1}findNcxPath(e,t){var r=kr(e,"item",{"media-type":"application/x-dtbncx+xml"}),n;return r||(n=t.getAttribute("toc"),n&&(r=e.querySelector(`#${n}`))),r?r.getAttribute("href"):!1}findCoverPath(e){var t=Qe(e,"package");t.getAttribute("version");var r=kr(e,"item",{properties:"cover-image"});if(r)return r.getAttribute("href");var n=kr(e,"meta",{name:"cover"});if(n){var s=n.getAttribute("content"),a=e.getElementById(s);return a?a.getAttribute("href"):""}else return!1}getElementText(e,t){var r=e.getElementsByTagNameNS("http://purl.org/dc/elements/1.1/",t),n;return!r||r.length===0?"":(n=r[0],n.childNodes.length?n.childNodes[0].nodeValue:"")}getPropertyText(e,t){var r=kr(e,"meta",{property:t});return r&&r.childNodes.length?r.childNodes[0].nodeValue:""}load(e){this.metadata=e.metadata;let t=e.readingOrder||e.spine;return this.spine=t.map((r,n)=>(r.index=n,r.linear=r.linear||"yes",r)),e.resources.forEach((r,n)=>{this.manifest[n]=r,r.rel&&r.rel[0]==="cover"&&(this.coverPath=r.href)}),this.spineNodeIndex=0,this.toc=e.toc.map((r,n)=>(r.label=r.title,r)),{metadata:this.metadata,spine:this.spine,manifest:this.manifest,navPath:this.navPath,ncxPath:this.ncxPath,coverPath:this.coverPath,spineNodeIndex:this.spineNodeIndex,toc:this.toc}}destroy(){this.manifest=void 0,this.navPath=void 0,this.ncxPath=void 0,this.coverPath=void 0,this.spineNodeIndex=void 0,this.spine=void 0,this.metadata=void 0}}class ea{constructor(e){this.toc=[],this.tocByHref={},this.tocById={},this.landmarks=[],this.landmarksByType={},this.length=0,e&&this.parse(e)}parse(e){let t=e.nodeType,r,n;t&&(r=Qe(e,"html"),n=Qe(e,"ncx")),t?r?(this.toc=this.parseNav(e),this.landmarks=this.parseLandmarks(e)):n&&(this.toc=this.parseNcx(e)):this.toc=this.load(e),this.length=0,this.unpack(this.toc)}unpack(e){for(var t,r=0;r<e.length;r++)t=e[r],t.href&&(this.tocByHref[t.href]=r),t.id&&(this.tocById[t.id]=r),this.length++,t.subitems.length&&this.unpack(t.subitems)}get(e){var t;return e?(e.indexOf("#")===0?t=this.tocById[e.substring(1)]:e in this.tocByHref&&(t=this.tocByHref[e]),this.getByIndex(e,t,this.toc)):this.toc}getByIndex(e,t,r){if(r.length===0)return;const n=r[t];if(n&&(e===n.id||e===n.href))return n;{let s;for(let a=0;a<r.length&&(s=this.getByIndex(e,t,r[a].subitems),!s);++a);return s}}landmark(e){var t;return e?(t=this.landmarksByType[e],this.landmarks[t]):this.landmarks}parseNav(e){var t=Gs(e,"nav","toc"),r=[];if(!t)return r;let n=Ar(t,"ol",!0);return n&&(r=this.parseNavList(n)),r}parseNavList(e,t){const r=[];if(!e||!e.children)return r;for(let n=0;n<e.children.length;n++){const s=this.navItem(e.children[n],t);s&&r.push(s)}return r}navItem(e,t){let r=e.getAttribute("id")||void 0,n=Ar(e,"a",!0)||Ar(e,"span",!0);if(!n)return;let s=n.getAttribute("href")||"";r||(r=s);let a=n.textContent||"",o=[],l=Ar(e,"ol",!0);return l&&(o=this.parseNavList(l,r)),{id:r,href:s,label:a,subitems:o,parent:t}}parseLandmarks(e){var t=Gs(e,"nav","landmarks"),r=t?gi(t,"li"):[],n=r.length,s,a=[],o;if(!r||n===0)return a;for(s=0;s<n;++s)o=this.landmarkItem(r[s]),o&&(a.push(o),this.landmarksByType[o.type]=s);return a}landmarkItem(e){let t=Ar(e,"a",!0);if(!t)return;let r=t.getAttributeNS("http://www.idpf.org/2007/ops","type")||void 0,n=t.getAttribute("href")||"",s=t.textContent||"";return{href:n,label:s,type:r}}parseNcx(e){var t=gi(e,"navPoint"),r=t.length,n,s={},a=[],o,l;if(!t||r===0)return a;for(n=0;n<r;++n)o=this.ncxItem(t[n]),s[o.id]=o,o.parent?(l=s[o.parent],l.subitems.push(o)):a.push(o);return a}ncxItem(e){var t=e.getAttribute("id")||!1,r=Qe(e,"content"),n=r.getAttribute("src"),s=Qe(e,"navLabel"),a=s.textContent?s.textContent:"",o=[],l=e.parentNode,h;return l&&(l.nodeName==="navPoint"||l.nodeName.split(":").slice(-1)[0]==="navPoint")&&(h=l.getAttribute("id")),{id:t,href:n,label:a,subitems:o,parent:h}}load(e){return e.map(t=>(t.label=t.title,t.subitems=t.children?this.load(t.children):[],t))}forEach(e){return this.toc.forEach(e)}}var Nr={application:{ecmascript:["es","ecma"],javascript:"js",ogg:"ogx",pdf:"pdf",postscript:["ps","ai","eps","epsi","epsf","eps2","eps3"],"rdf+xml":"rdf",smil:["smi","smil"],"xhtml+xml":["xhtml","xht"],xml:["xml","xsl","xsd","opf","ncx"],zip:"zip","x-httpd-eruby":"rhtml","x-latex":"latex","x-maker":["frm","maker","frame","fm","fb","book","fbdoc"],"x-object":"o","x-shockwave-flash":["swf","swfl"],"x-silverlight":"scr","epub+zip":"epub","font-tdpfr":"pfr","inkml+xml":["ink","inkml"],json:"json","jsonml+json":"jsonml","mathml+xml":"mathml","metalink+xml":"metalink",mp4:"mp4s","omdoc+xml":"omdoc",oxps:"oxps","vnd.amazon.ebook":"azw",widget:"wgt","x-dtbook+xml":"dtb","x-dtbresource+xml":"res","x-font-bdf":"bdf","x-font-ghostscript":"gsf","x-font-linux-psf":"psf","x-font-otf":"otf","x-font-pcf":"pcf","x-font-snf":"snf","x-font-ttf":["ttf","ttc"],"x-font-type1":["pfa","pfb","pfm","afm"],"x-font-woff":"woff","x-mobipocket-ebook":["prc","mobi"],"x-mspublisher":"pub","x-nzb":"nzb","x-tgif":"obj","xaml+xml":"xaml","xml-dtd":"dtd","xproc+xml":"xpl","xslt+xml":"xslt","internet-property-stream":"acx","x-compress":"z","x-compressed":"tgz","x-gzip":"gz"},audio:{flac:"flac",midi:["mid","midi","kar","rmi"],mpeg:["mpga","mpega","mp2","mp3","m4a","mp2a","m2a","m3a"],mpegurl:"m3u",ogg:["oga","ogg","spx"],"x-aiff":["aif","aiff","aifc"],"x-ms-wma":"wma","x-wav":"wav",adpcm:"adp",mp4:"mp4a",webm:"weba","x-aac":"aac","x-caf":"caf","x-matroska":"mka","x-pn-realaudio-plugin":"rmp",xm:"xm",mid:["mid","rmi"]},image:{gif:"gif",ief:"ief",jpeg:["jpeg","jpg","jpe"],pcx:"pcx",png:"png","svg+xml":["svg","svgz"],tiff:["tiff","tif"],"x-icon":"ico",bmp:"bmp",webp:"webp","x-pict":["pic","pct"],"x-tga":"tga","cis-cod":"cod"},text:{"cache-manifest":["manifest","appcache"],css:"css",csv:"csv",html:["html","htm","shtml","stm"],mathml:"mml",plain:["txt","text","brf","conf","def","list","log","in","bas"],richtext:"rtx","tab-separated-values":"tsv","x-bibtex":"bib"},video:{mpeg:["mpeg","mpg","mpe","m1v","m2v","mp2","mpa","mpv2"],mp4:["mp4","mp4v","mpg4"],quicktime:["qt","mov"],ogg:"ogv","vnd.mpegurl":["mxu","m4u"],"x-flv":"flv","x-la-asf":["lsf","lsx"],"x-mng":"mng","x-ms-asf":["asf","asx","asr"],"x-ms-wm":"wm","x-ms-wmv":"wmv","x-ms-wmx":"wmx","x-ms-wvx":"wvx","x-msvideo":"avi","x-sgi-movie":"movie","x-matroska":["mpv","mkv","mk3d","mks"],"3gpp2":"3g2",h261:"h261",h263:"h263",h264:"h264",jpeg:"jpgv",jpm:["jpm","jpgm"],mj2:["mj2","mjp2"],"vnd.ms-playready.media.pyv":"pyv","vnd.uvvu.mp4":["uvu","uvvu"],"vnd.vivo":"viv",webm:"webm","x-f4v":"f4v","x-m4v":"m4v","x-ms-vob":"vob","x-smv":"smv"}},Sd=function(){var i,e,t,r,n={};for(i in Nr)if(Nr.hasOwnProperty(i)){for(e in Nr[i])if(Nr[i].hasOwnProperty(e))if(t=Nr[i][e],typeof t=="string")n[t]=i+"/"+e;else for(r=0;r<t.length;r++)n[t[r]]=i+"/"+e}return n}(),Cd="text/plain";function kd(i){return i&&Sd[i.split(".").pop().toLowerCase()]||Cd}var tr={lookup:kd};class Ad{constructor(e,t){this.settings={replacements:t&&t.replacements||"base64",archive:t&&t.archive,resolver:t&&t.resolver,request:t&&t.request},this.process(e)}process(e){this.manifest=e,this.resources=Object.keys(e).map(function(t){return e[t]}),this.replacementUrls=[],this.html=[],this.assets=[],this.css=[],this.urls=[],this.cssUrls=[],this.split(),this.splitUrls()}split(){this.html=this.resources.filter(function(e){if(e.type==="application/xhtml+xml"||e.type==="text/html")return!0}),this.assets=this.resources.filter(function(e){if(e.type!=="application/xhtml+xml"&&e.type!=="text/html")return!0}),this.css=this.resources.filter(function(e){if(e.type==="text/css")return!0})}splitUrls(){this.urls=this.assets.map(function(e){return e.href}.bind(this)),this.cssUrls=this.css.map(function(e){return e.href})}createUrl(e){var t=new Ht(e),r=tr.lookup(t.filename);return this.settings.archive?this.settings.archive.createUrl(e,{base64:this.settings.replacements==="base64"}):this.settings.replacements==="base64"?this.settings.request(e,"blob").then(n=>vd(n)).then(n=>Sl(n,r)):this.settings.request(e,"blob").then(n=>qs(n,r))}replacements(){if(this.settings.replacements==="none")return new Promise(function(t){t(this.urls)}.bind(this));var e=this.urls.map(t=>{var r=this.settings.resolver(t);return this.createUrl(r).catch(n=>(console.error(n),null))});return Promise.all(e).then(t=>(this.replacementUrls=t.filter(r=>typeof r=="string"),t))}replaceCss(e,t){var r=[];return e=e||this.settings.archive,t=t||this.settings.resolver,this.cssUrls.forEach(function(n){var s=this.createCssFile(n,e,t).then(function(a){var o=this.urls.indexOf(n);o>-1&&(this.replacementUrls[o]=a)}.bind(this));r.push(s)}.bind(this)),Promise.all(r)}createCssFile(e){var t;if(mi.isAbsolute(e))return new Promise(function(a){a()});var r=this.settings.resolver(e),n;this.settings.archive?n=this.settings.archive.getText(r):n=this.settings.request(r,"text");var s=this.urls.map(a=>{var o=this.settings.resolver(a),l=new ai(r).relative(o);return l});return n?n.then(a=>(a=Rl(a,s,this.replacementUrls),this.settings.replacements==="base64"?t=Sl(a,"text/css"):t=qs(a,"text/css"),t),a=>new Promise(function(o){o()})):new Promise(function(a){a()})}relativeTo(e,t){return t=t||this.settings.resolver,this.urls.map(function(r){var n=t(r),s=new ai(e).relative(n);return s}.bind(this))}get(e){var t=this.urls.indexOf(e);if(t!==-1)return this.replacementUrls.length?new Promise(function(r,n){r(this.replacementUrls[t])}.bind(this)):this.createUrl(e)}substitute(e,t){var r;return t?r=this.relativeTo(t):r=this.urls,Rl(e,r,this.replacementUrls)}destroy(){this.settings=void 0,this.manifest=void 0,this.resources=void 0,this.replacementUrls=void 0,this.html=void 0,this.assets=void 0,this.css=void 0,this.urls=void 0,this.cssUrls=void 0}}class ta{constructor(e){this.pages=[],this.locations=[],this.epubcfi=new He,this.firstPage=0,this.lastPage=0,this.totalPages=0,this.toc=void 0,this.ncx=void 0,e&&(this.pageList=this.parse(e)),this.pageList&&this.pageList.length&&this.process(this.pageList)}parse(e){var t=Qe(e,"html"),r=Qe(e,"ncx");if(t)return this.parseNav(e);if(r)return this.parseNcx(e)}parseNav(e){var t=Gs(e,"nav","page-list"),r=t?gi(t,"li"):[],n=r.length,s,a=[],o;if(!r||n===0)return a;for(s=0;s<n;++s)o=this.item(r[s]),a.push(o);return a}parseNcx(e){var t=[],r=0,n,s,a,o=0;if(s=Qe(e,"pageList"),!s||(a=gi(s,"pageTarget"),o=a.length,!a||a.length===0))return t;for(r=0;r<o;++r)n=this.ncxItem(a[r]),t.push(n);return t}ncxItem(e){var t=Qe(e,"navLabel"),r=Qe(t,"text"),n=r.textContent,s=Qe(e,"content"),a=s.getAttribute("src"),o=parseInt(n,10);return{href:a,page:o}}item(e){var t=Qe(e,"a"),r=t.getAttribute("href")||"",n=t.textContent||"",s=parseInt(n),a=r.indexOf("epubcfi"),o,l,h;return a!=-1?(o=r.split("#"),l=o[0],h=o.length>1?o[1]:!1,{cfi:h,href:r,packageUrl:l,page:s}):{href:r,page:s}}process(e){e.forEach(function(t){this.pages.push(t.page),t.cfi&&this.locations.push(t.cfi)},this),this.firstPage=parseInt(this.pages[0]),this.lastPage=parseInt(this.pages[this.pages.length-1]),this.totalPages=this.lastPage-this.firstPage}pageFromCfi(e){var t=-1;if(this.locations.length===0)return-1;var r=Zs(e,this.locations,this.epubcfi.compare);return r!=-1?t=this.pages[r]:(r=gn(e,this.locations,this.epubcfi.compare),t=r-1>=0?this.pages[r-1]:this.pages[0],t!==void 0||(t=-1)),t}cfiFromPage(e){var t=-1;typeof e!="number"&&(e=parseInt(e));var r=this.pages.indexOf(e);return r!=-1&&(t=this.locations[r]),t}pageFromPercentage(e){var t=Math.round(this.totalPages*e);return t}percentageFromPage(e){var t=(e-this.firstPage)/this.totalPages;return Math.round(t*1e3)/1e3}percentageFromCfi(e){var t=this.pageFromCfi(e),r=this.percentageFromPage(t);return r}destroy(){this.pages=void 0,this.locations=void 0,this.epubcfi=void 0,this.pageList=void 0,this.toc=void 0,this.ncx=void 0}}class Pl{constructor(e){this.settings=e,this.name=e.layout||"reflowable",this._spread=e.spread!=="none",this._minSpreadWidth=e.minSpreadWidth||800,this._evenSpreads=e.evenSpreads||!1,e.flow==="scrolled"||e.flow==="scrolled-continuous"||e.flow==="scrolled-doc"?this._flow="scrolled":this._flow="paginated",this.width=0,this.height=0,this.spreadWidth=0,this.delta=0,this.columnWidth=0,this.gap=0,this.divisor=1,this.props={name:this.name,spread:this._spread,flow:this._flow,width:0,height:0,spreadWidth:0,delta:0,columnWidth:0,gap:0,divisor:1}}flow(e){return typeof e!="undefined"&&(e==="scrolled"||e==="scrolled-continuous"||e==="scrolled-doc"?this._flow="scrolled":this._flow="paginated",this.update({flow:this._flow})),this._flow}spread(e,t){return e&&(this._spread=e!=="none",this.update({spread:this._spread})),t>=0&&(this._minSpreadWidth=t),this._spread}calculate(e,t,r){var n=1,s=r||0,a=e,o=t,l=Math.floor(a/12),h,u,c,v;this._spread&&a>=this._minSpreadWidth?n=2:n=1,this.name==="reflowable"&&this._flow==="paginated"&&!(r>=0)&&(s=l%2==0?l:l-1),this.name==="pre-paginated"&&(s=0),n>1?(h=a/n-s,c=h+s):(h=a,c=a),this.name==="pre-paginated"&&n>1&&(a=h),u=h*n+s,v=a,this.width=a,this.height=o,this.spreadWidth=u,this.pageWidth=c,this.delta=v,this.columnWidth=h,this.gap=s,this.divisor=n,this.update({width:a,height:o,spreadWidth:u,pageWidth:c,delta:v,columnWidth:h,gap:s,divisor:n})}format(e,t,r){var n;return this.name==="pre-paginated"?n=e.fit(this.columnWidth,this.height,t):this._flow==="paginated"?n=e.columns(this.width,this.height,this.columnWidth,this.gap,this.settings.direction):r&&r==="horizontal"?n=e.size(null,this.height):n=e.size(this.width,null),n}count(e,t){let r,n;return this.name==="pre-paginated"?(r=1,n=1):this._flow==="paginated"?(t=t||this.delta,r=Math.ceil(e/t),n=r*this.divisor):(t=t||this.height,r=Math.ceil(e/t),n=r),{spreads:r,pages:n}}update(e){if(Object.keys(e).forEach(t=>{this.props[t]===e[t]&&delete e[t]}),Object.keys(e).length>0){let t=xt(this.props,e);this.emit(pe.LAYOUT.UPDATED,t,e)}}}Gt(Pl.prototype);class Id{constructor(e){this.rendition=e,this._themes={default:{rules:{},url:"",serialized:""}},this._overrides={},this._current="default",this._injected=[],this.rendition.hooks.content.register(this.inject.bind(this)),this.rendition.hooks.content.register(this.overrides.bind(this))}register(){if(arguments.length!==0){if(arguments.length===1&&typeof arguments[0]=="object")return this.registerThemes(arguments[0]);if(arguments.length===1&&typeof arguments[0]=="string")return this.default(arguments[0]);if(arguments.length===2&&typeof arguments[1]=="string")return this.registerUrl(arguments[0],arguments[1]);if(arguments.length===2&&typeof arguments[1]=="object")return this.registerRules(arguments[0],arguments[1])}}default(e){if(!!e){if(typeof e=="string")return this.registerUrl("default",e);if(typeof e=="object")return this.registerRules("default",e)}}registerThemes(e){for(var t in e)e.hasOwnProperty(t)&&(typeof e[t]=="string"?this.registerUrl(t,e[t]):this.registerRules(t,e[t]))}registerCss(e,t){this._themes[e]={serialized:t},(this._injected[e]||e=="default")&&this.update(e)}registerUrl(e,t){var r=new Ht(t);this._themes[e]={url:r.toString()},(this._injected[e]||e=="default")&&this.update(e)}registerRules(e,t){this._themes[e]={rules:t},(this._injected[e]||e=="default")&&this.update(e)}select(e){var t=this._current,r;this._current=e,this.update(e),r=this.rendition.getContents(),r.forEach(n=>{n.removeClass(t),n.addClass(e)})}update(e){var t=this.rendition.getContents();t.forEach(r=>{this.add(e,r)})}inject(e){var t=[],r=this._themes,n;for(var s in r)r.hasOwnProperty(s)&&(s===this._current||s==="default")&&(n=r[s],(n.rules&&Object.keys(n.rules).length>0||n.url&&t.indexOf(n.url)===-1)&&this.add(s,e),this._injected.push(s));this._current!="default"&&e.addClass(this._current)}add(e,t){var r=this._themes[e];!r||!t||(r.url?t.addStylesheet(r.url):r.serialized?(t.addStylesheetCss(r.serialized,e),r.injected=!0):r.rules&&(t.addStylesheetRules(r.rules,e),r.injected=!0))}override(e,t,r){var n=this.rendition.getContents();this._overrides[e]={value:t,priority:r===!0},n.forEach(s=>{s.css(e,this._overrides[e].value,this._overrides[e].priority)})}removeOverride(e){var t=this.rendition.getContents();delete this._overrides[e],t.forEach(r=>{r.css(e)})}overrides(e){var t=this._overrides;for(var r in t)t.hasOwnProperty(r)&&e.css(r,t[r].value,t[r].priority)}fontSize(e){this.override("font-size",e)}font(e){this.override("font-family",e,!0)}destroy(){this.rendition=void 0,this._themes=void 0,this._overrides=void 0,this._current=void 0,this._injected=void 0}}class bn{constructor(e,t,r,n=!1){this.layout=e,this.horizontal=r==="horizontal",this.direction=t||"ltr",this._dev=n}section(e){var t=this.findRanges(e),r=this.rangeListToCfiList(e.section.cfiBase,t);return r}page(e,t,r,n){var s=e&&e.document?e.document.body:!1,a;if(!!s){if(a=this.rangePairToCfiPair(t,{start:this.findStart(s,r,n),end:this.findEnd(s,r,n)}),this._dev===!0){let o=e.document,l=new He(a.start).toRange(o),h=new He(a.end).toRange(o),u=o.defaultView.getSelection(),c=o.createRange();u.removeAllRanges(),c.setStart(l.startContainer,l.startOffset),c.setEnd(h.endContainer,h.endOffset),u.addRange(c)}return a}}walk(e,t){if(!(e&&e.nodeType===Node.TEXT_NODE)){var r={acceptNode:function(l){return l.data.trim().length>0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}},n=r.acceptNode;n.acceptNode=r.acceptNode;for(var s=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,n,!1),a,o;(a=s.nextNode())&&(o=t(a),!o););return o}}findRanges(e){for(var t=[],r=e.contents.scrollWidth(),n=Math.ceil(r/this.layout.spreadWidth),s=n*this.layout.divisor,a=this.layout.columnWidth,o=this.layout.gap,l,h,u=0;u<s.pages;u++)l=(a+o)*u,h=a*(u+1)+o*u,t.push({start:this.findStart(e.document.body,l,h),end:this.findEnd(e.document.body,l,h)});return t}findStart(e,t,r){for(var n=[e],s,a,o=e;n.length;)if(s=n.shift(),a=this.walk(s,l=>{var h,u,c,v,g;if(g=Tl(l),this.horizontal&&this.direction==="ltr"){if(h=this.horizontal?g.left:g.top,u=this.horizontal?g.right:g.bottom,h>=t&&h<=r)return l;if(u>t)return l;o=l,n.push(l)}else if(this.horizontal&&this.direction==="rtl"){if(h=g.left,u=g.right,u<=r&&u>=t)return l;if(h<r)return l;o=l,n.push(l)}else{if(c=g.top,v=g.bottom,c>=t&&c<=r)return l;if(v>t)return l;o=l,n.push(l)}}),a)return this.findTextStartRange(a,t,r);return this.findTextStartRange(o,t,r)}findEnd(e,t,r){for(var n=[e],s,a=e,o;n.length;)if(s=n.shift(),o=this.walk(s,l=>{var h,u,c,v,g;if(g=Tl(l),this.horizontal&&this.direction==="ltr"){if(h=Math.round(g.left),u=Math.round(g.right),h>r&&a)return a;if(u>r)return l;a=l,n.push(l)}else if(this.horizontal&&this.direction==="rtl"){if(h=Math.round(this.horizontal?g.left:g.top),u=Math.round(this.horizontal?g.right:g.bottom),u<t&&a)return a;if(h<t)return l;a=l,n.push(l)}else{if(c=Math.round(g.top),v=Math.round(g.bottom),c>r&&a)return a;if(v>r)return l;a=l,n.push(l)}}),o)return this.findTextEndRange(o,t,r);return this.findTextEndRange(a,t,r)}findTextStartRange(e,t,r){for(var n=this.splitTextNodeIntoRanges(e),s,a,o,l,h,u=0;u<n.length;u++)if(s=n[u],a=s.getBoundingClientRect(),this.horizontal&&this.direction==="ltr"){if(o=a.left,o>=t)return s}else if(this.horizontal&&this.direction==="rtl"){if(h=a.right,h<=r)return s}else if(l=a.top,l>=t)return s;return n[0]}findTextEndRange(e,t,r){for(var n=this.splitTextNodeIntoRanges(e),s,a,o,l,h,u,c,v=0;v<n.length;v++){if(a=n[v],o=a.getBoundingClientRect(),this.horizontal&&this.direction==="ltr"){if(l=o.left,h=o.right,l>r&&s)return s;if(h>r)return a}else if(this.horizontal&&this.direction==="rtl"){if(l=o.left,h=o.right,h<t&&s)return s;if(l<t)return a}else{if(u=o.top,c=o.bottom,u>r&&s)return s;if(c>r)return a}s=a}return n[n.length-1]}splitTextNodeIntoRanges(e,t){var r=[],n=e.textContent||"",s=n.trim(),a,o=e.ownerDocument,l=t||" ",h=s.indexOf(l);if(h===-1||e.nodeType!=Node.TEXT_NODE)return a=o.createRange(),a.selectNodeContents(e),[a];for(a=o.createRange(),a.setStart(e,0),a.setEnd(e,h),r.push(a),a=!1;h!=-1;)h=s.indexOf(l,h+1),h>0&&(a&&(a.setEnd(e,h),r.push(a)),a=o.createRange(),a.setStart(e,h+1));return a&&(a.setEnd(e,s.length),r.push(a)),r}rangePairToCfiPair(e,t){var r=t.start,n=t.end;r.collapse(!0),n.collapse(!1);let s=new He(r,e).toString(),a=new He(n,e).toString();return{start:s,end:a}}rangeListToCfiList(e,t){for(var r=[],n,s=0;s<t.length;s++)n=this.rangePairToCfiPair(e,t[s]),r.push(n);return r}axis(e){return e&&(this.horizontal=e==="horizontal"),this.horizontal}}const zl=typeof navigator!="undefined",Nd=zl&&/Chrome/.test(navigator.userAgent),Ml=zl&&!Nd&&/AppleWebKit/.test(navigator.userAgent),Od=1;class Bl{constructor(e,t,r,n){this.epubcfi=new He,this.document=e,this.documentElement=this.document.documentElement,this.content=t||this.document.body,this.window=this.document.defaultView,this._size={width:0,height:0},this.sectionIndex=n||0,this.cfiBase=r||"",this.epubReadingSystem("epub.js",Qs),this.called=0,this.active=!0,this.listeners()}static get listenedEvents(){return _n}width(e){var t=this.content;return e&&lt(e)&&(e=e+"px"),e&&(t.style.width=e),parseInt(this.window.getComputedStyle(t).width)}height(e){var t=this.content;return e&&lt(e)&&(e=e+"px"),e&&(t.style.height=e),parseInt(this.window.getComputedStyle(t).height)}contentWidth(e){var t=this.content||this.document.body;return e&&lt(e)&&(e=e+"px"),e&&(t.style.width=e),parseInt(this.window.getComputedStyle(t).width)}contentHeight(e){var t=this.content||this.document.body;return e&&lt(e)&&(e=e+"px"),e&&(t.style.height=e),parseInt(this.window.getComputedStyle(t).height)}textWidth(){let e,t,r=this.document.createRange(),n=this.content||this.document.body,s=Ys(n);return r.selectNodeContents(n),e=r.getBoundingClientRect(),t=e.width,s&&s.width&&(t+=s.width),Math.round(t)}textHeight(){let e,t,r=this.document.createRange(),n=this.content||this.document.body;return r.selectNodeContents(n),e=r.getBoundingClientRect(),t=e.bottom,Math.round(t)}scrollWidth(){var e=this.documentElement.scrollWidth;return e}scrollHeight(){var e=this.documentElement.scrollHeight;return e}overflow(e){return e&&(this.documentElement.style.overflow=e),this.window.getComputedStyle(this.documentElement).overflow}overflowX(e){return e&&(this.documentElement.style.overflowX=e),this.window.getComputedStyle(this.documentElement).overflowX}overflowY(e){return e&&(this.documentElement.style.overflowY=e),this.window.getComputedStyle(this.documentElement).overflowY}css(e,t,r){var n=this.content||this.document.body;return t?n.style.setProperty(e,t,r?"important":""):n.style.removeProperty(e),this.window.getComputedStyle(n)[e]}viewport(e){var t=this.document.querySelector("meta[name='viewport']"),r={width:void 0,height:void 0,scale:void 0,minimum:void 0,maximum:void 0,scalable:void 0},n=[],s={};if(t&&t.hasAttribute("content")){let a=t.getAttribute("content"),o=a.match(/width\s*=\s*([^,]*)/),l=a.match(/height\s*=\s*([^,]*)/),h=a.match(/initial-scale\s*=\s*([^,]*)/),u=a.match(/minimum-scale\s*=\s*([^,]*)/),c=a.match(/maximum-scale\s*=\s*([^,]*)/),v=a.match(/user-scalable\s*=\s*([^,]*)/);o&&o.length&&typeof o[1]!="undefined"&&(r.width=o[1]),l&&l.length&&typeof l[1]!="undefined"&&(r.height=l[1]),h&&h.length&&typeof h[1]!="undefined"&&(r.scale=h[1]),u&&u.length&&typeof u[1]!="undefined"&&(r.minimum=u[1]),c&&c.length&&typeof c[1]!="undefined"&&(r.maximum=c[1]),v&&v.length&&typeof v[1]!="undefined"&&(r.scalable=v[1])}return s=ld(e||{},r),e&&(s.width&&n.push("width="+s.width),s.height&&n.push("height="+s.height),s.scale&&n.push("initial-scale="+s.scale),s.scalable==="no"?(n.push("minimum-scale="+s.scale),n.push("maximum-scale="+s.scale),n.push("user-scalable="+s.scalable)):(s.scalable&&n.push("user-scalable="+s.scalable),s.minimum&&n.push("minimum-scale="+s.minimum),s.maximum&&n.push("minimum-scale="+s.maximum)),t||(t=this.document.createElement("meta"),t.setAttribute("name","viewport"),this.document.querySelector("head").appendChild(t)),t.setAttribute("content",n.join(", ")),this.window.scrollTo(0,0)),s}expand(){this.emit(pe.CONTENTS.EXPAND)}listeners(){this.imageLoadListeners(),this.mediaQueryListeners(),this.addEventListeners(),this.addSelectionListeners(),typeof ResizeObserver=="undefined"?(this.resizeListeners(),this.visibilityListeners()):this.resizeObservers(),this.linksHandler()}removeListeners(){this.removeEventListeners(),this.removeSelectionListeners(),this.observer&&this.observer.disconnect(),clearTimeout(this.expanding)}resizeCheck(){let e=this.textWidth(),t=this.textHeight();(e!=this._size.width||t!=this._size.height)&&(this._size={width:e,height:t},this.onResize&&this.onResize(this._size),this.emit(pe.CONTENTS.RESIZE,this._size))}resizeListeners(){clearTimeout(this.expanding),requestAnimationFrame(this.resizeCheck.bind(this)),this.expanding=setTimeout(this.resizeListeners.bind(this),350)}visibilityListeners(){document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&this.active===!1?(this.active=!0,this.resizeListeners()):(this.active=!1,clearTimeout(this.expanding))})}transitionListeners(){let e=this.content;e.style.transitionProperty="font, font-size, font-size-adjust, font-stretch, font-variation-settings, font-weight, width, height",e.style.transitionDuration="0.001ms",e.style.transitionTimingFunction="linear",e.style.transitionDelay="0",this._resizeCheck=this.resizeCheck.bind(this),this.document.addEventListener("transitionend",this._resizeCheck)}mediaQueryListeners(){for(var e=this.document.styleSheets,t=function(o){o.matches&&!this._expanding&&setTimeout(this.expand.bind(this),1)}.bind(this),r=0;r<e.length;r+=1){var n;try{n=e[r].cssRules}catch{return}if(!n)return;for(var s=0;s<n.length;s+=1)if(n[s].media){var a=this.window.matchMedia(n[s].media.mediaText);a.addListener(t)}}}resizeObservers(){this.observer=new ResizeObserver(e=>{requestAnimationFrame(this.resizeCheck.bind(this))}),this.observer.observe(this.document.documentElement)}mutationObservers(){this.observer=new MutationObserver(t=>{this.resizeCheck()});let e={attributes:!0,childList:!0,characterData:!0,subtree:!0};this.observer.observe(this.document,e)}imageLoadListeners(){for(var e=this.document.querySelectorAll("img"),t,r=0;r<e.length;r++)t=e[r],typeof t.naturalWidth!="undefined"&&t.naturalWidth===0&&(t.onload=this.expand.bind(this))}fontLoadListeners(){!this.document||!this.document.fonts||this.document.fonts.ready.then(function(){this.resizeCheck()}.bind(this))}root(){return this.document?this.document.documentElement:null}locationOf(e,t){var r,n={left:0,top:0};if(!this.document)return n;if(this.epubcfi.isCfiString(e)){let s=new He(e).toRange(this.document,t);if(s){try{if(!s.endContainer||s.startContainer==s.endContainer&&s.startOffset==s.endOffset){let a=s.startContainer.textContent.indexOf(" ",s.startOffset);a==-1&&(a=s.startContainer.textContent.length),s.setEnd(s.startContainer,a)}}catch(a){console.error("setting end offset to start container length failed",a)}if(s.startContainer.nodeType===Node.ELEMENT_NODE)r=s.startContainer.getBoundingClientRect(),n.left=r.left,n.top=r.top;else if(Ml){let a=s.startContainer,o=new Range;try{a.nodeType===Od?r=a.getBoundingClientRect():s.startOffset+2<a.length?(o.setStart(a,s.startOffset),o.setEnd(a,s.startOffset+2),r=o.getBoundingClientRect()):s.startOffset-2>0?(o.setStart(a,s.startOffset-2),o.setEnd(a,s.startOffset),r=o.getBoundingClientRect()):r=a.parentNode.getBoundingClientRect()}catch(l){console.error(l,l.stack)}}else r=s.startContainer.parentElement.getBoundingClientRect()}}else if(typeof e=="string"&&e.indexOf("#")>-1){let s=e.substring(e.indexOf("#")+1),a=this.document.getElementById(s);if(a)if(Ml){let o=new Range;o.selectNode(a),r=o.getBoundingClientRect()}else r=a.getBoundingClientRect()}return r&&(n.left=r.left,n.top=r.top),n}addStylesheet(e){return new Promise(function(t,r){var n,s=!1;if(!this.document){t(!1);return}if(n=this.document.querySelector("link[href='"+e+"']"),n){t(!0);return}n=this.document.createElement("link"),n.type="text/css",n.rel="stylesheet",n.href=e,n.onload=n.onreadystatechange=function(){!s&&(!this.readyState||this.readyState=="complete")&&(s=!0,setTimeout(()=>{t(!0)},1))},this.document.head.appendChild(n)}.bind(this))}_getStylesheetNode(e){var t;return e="epubjs-inserted-css-"+(e||""),this.document?(t=this.document.getElementById(e),t||(t=this.document.createElement("style"),t.id=e,this.document.head.appendChild(t)),t):!1}addStylesheetCss(e,t){if(!this.document||!e)return!1;var r;return r=this._getStylesheetNode(t),r.innerHTML=e,!0}addStylesheetRules(e,t){var r;if(!(!this.document||!e||e.length===0))if(r=this._getStylesheetNode(t).sheet,Object.prototype.toString.call(e)==="[object Array]")for(var n=0,s=e.length;n<s;n++){var a=1,o=e[n],l=e[n][0],h="";Object.prototype.toString.call(o[1][0])==="[object Array]"&&(o=o[1],a=0);for(var u=o.length;a<u;a++){var c=o[a];h+=c[0]+":"+c[1]+(c[2]?" !important":"")+`;
`}r.insertRule(l+"{"+h+"}",r.cssRules.length)}else Object.keys(e).forEach(g=>{const I=e[g];if(Array.isArray(I))I.forEach(w=>{const d=Object.keys(w).map(_=>`${_}:${w[_]}`).join(";");r.insertRule(`${g}{${d}}`,r.cssRules.length)});else{const p=Object.keys(I).map(d=>`${d}:${I[d]}`).join(";");r.insertRule(`${g}{${p}}`,r.cssRules.length)}})}addScript(e){return new Promise(function(t,r){var n,s=!1;if(!this.document){t(!1);return}n=this.document.createElement("script"),n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){!s&&(!this.readyState||this.readyState=="complete")&&(s=!0,setTimeout(function(){t(!0)},1))},this.document.head.appendChild(n)}.bind(this))}addClass(e){var t;!this.document||(t=this.content||this.document.body,t&&t.classList.add(e))}removeClass(e){var t;!this.document||(t=this.content||this.document.body,t&&t.classList.remove(e))}addEventListeners(){!this.document||(this._triggerEvent=this.triggerEvent.bind(this),_n.forEach(function(e){this.document.addEventListener(e,this._triggerEvent,{passive:!0})},this))}removeEventListeners(){!this.document||(_n.forEach(function(e){this.document.removeEventListener(e,this._triggerEvent,{passive:!0})},this),this._triggerEvent=void 0)}triggerEvent(e){this.emit(e.type,e)}addSelectionListeners(){!this.document||(this._onSelectionChange=this.onSelectionChange.bind(this),this.document.addEventListener("selectionchange",this._onSelectionChange,{passive:!0}))}removeSelectionListeners(){!this.document||(this.document.removeEventListener("selectionchange",this._onSelectionChange,{passive:!0}),this._onSelectionChange=void 0)}onSelectionChange(e){this.selectionEndTimeout&&clearTimeout(this.selectionEndTimeout),this.selectionEndTimeout=setTimeout(function(){var t=this.window.getSelection();this.triggerSelectedEvent(t)}.bind(this),250)}triggerSelectedEvent(e){var t,r;e&&e.rangeCount>0&&(t=e.getRangeAt(0),t.collapsed||(r=new He(t,this.cfiBase).toString(),this.emit(pe.CONTENTS.SELECTED,r),this.emit(pe.CONTENTS.SELECTED_RANGE,t)))}range(e,t){var r=new He(e);return r.toRange(this.document,t)}cfiFromRange(e,t){return new He(e,this.cfiBase,t).toString()}cfiFromNode(e,t){return new He(e,this.cfiBase,t).toString()}map(e){var t=new bn(e);return t.section()}size(e,t){var r={scale:1,scalable:"no"};this.layoutStyle("scrolling"),e>=0&&(this.width(e),r.width=e,this.css("padding","0 "+e/12+"px")),t>=0&&(this.height(t),r.height=t),this.css("margin","0"),this.css("box-sizing","border-box"),this.viewport(r)}columns(e,t,r,n,s){let a=Cr("column-axis"),o=Cr("column-gap"),l=Cr("column-width"),h=Cr("column-fill"),c=this.writingMode().indexOf("vertical")===0?"vertical":"horizontal";this.layoutStyle("paginated"),s==="rtl"&&c==="horizontal"&&this.direction(s),this.width(e),this.height(t),this.viewport({width:e,height:t,scale:1,scalable:"no"}),this.css("overflow-y","hidden"),this.css("margin","0",!0),c==="vertical"?(this.css("padding-top",n/2+"px",!0),this.css("padding-bottom",n/2+"px",!0),this.css("padding-left","20px"),this.css("padding-right","20px"),this.css(a,"vertical")):(this.css("padding-top","20px"),this.css("padding-bottom","20px"),this.css("padding-left",n/2+"px",!0),this.css("padding-right",n/2+"px",!0),this.css(a,"horizontal")),this.css("box-sizing","border-box"),this.css("max-width","inherit"),this.css(h,"auto"),this.css(o,n+"px"),this.css(l,r+"px"),this.css("-webkit-line-box-contain","block glyphs replaced")}scaler(e,t,r){var n="scale("+e+")",s="";this.css("transform-origin","top left"),(t>=0||r>=0)&&(s=" translate("+(t||0)+"px, "+(r||0)+"px )"),this.css("transform",n+s)}fit(e,t,r){var n=this.viewport(),s=parseInt(n.width),a=parseInt(n.height),o=e/s,l=t/a,h=o<l?o:l;if(this.layoutStyle("paginated"),this.width(s),this.height(a),this.overflow("hidden"),this.scaler(h,0,0),this.css("background-size",s*h+"px "+a*h+"px"),this.css("background-color","transparent"),r&&r.properties.includes("page-spread-left")){var u=e-s*h;this.css("margin-left",u+"px")}}direction(e){this.documentElement&&(this.documentElement.style.direction=e)}mapPage(e,t,r,n,s){var a=new bn(t,s);return a.page(this,e,r,n)}linksHandler(){wd(this.content,e=>{this.emit(pe.CONTENTS.LINK_CLICKED,e)})}writingMode(e){let t=Cr("writing-mode");return e&&this.documentElement&&(this.documentElement.style[t]=e),this.window.getComputedStyle(this.documentElement)[t]||""}layoutStyle(e){return e&&(this._layoutStyle=e,navigator.epubReadingSystem.layoutStyle=this._layoutStyle),this._layoutStyle||"paginated"}epubReadingSystem(e,t){return navigator.epubReadingSystem={name:e,version:t,layoutStyle:this.layoutStyle(),hasFeature:function(r){switch(r){case"dom-manipulation":return!0;case"layout-changes":return!0;case"touch-events":return!0;case"mouse-events":return!0;case"keyboard-events":return!0;case"spine-scripting":return!1;default:return!1}}},navigator.epubReadingSystem}destroy(){this.removeListeners()}}Gt(Bl.prototype);class Rd{constructor(e){this.rendition=e,this.highlights=[],this.underlines=[],this.marks=[],this._annotations={},this._annotationsBySectionIndex={},this.rendition.hooks.render.register(this.inject.bind(this)),this.rendition.hooks.unloaded.register(this.clear.bind(this))}add(e,t,r,n,s,a){let o=encodeURI(t+e),h=new He(t).spinePos,u=new Fl({type:e,cfiRange:t,data:r,sectionIndex:h,cb:n,className:s,styles:a});return this._annotations[o]=u,h in this._annotationsBySectionIndex?this._annotationsBySectionIndex[h].push(o):this._annotationsBySectionIndex[h]=[o],this.rendition.views().forEach(v=>{u.sectionIndex===v.index&&u.attach(v)}),u}remove(e,t){let r=encodeURI(e+t);if(r in this._annotations){let n=this._annotations[r];if(t&&n.type!==t)return;this.rendition.views().forEach(a=>{this._removeFromAnnotationBySectionIndex(n.sectionIndex,r),n.sectionIndex===a.index&&n.detach(a)}),delete this._annotations[r]}}_removeFromAnnotationBySectionIndex(e,t){this._annotationsBySectionIndex[e]=this._annotationsAt(e).filter(r=>r!==t)}_annotationsAt(e){return this._annotationsBySectionIndex[e]}highlight(e,t,r,n,s){return this.add("highlight",e,t,r,n,s)}underline(e,t,r,n,s){return this.add("underline",e,t,r,n,s)}mark(e,t,r){return this.add("mark",e,t,r)}each(){return this._annotations.forEach.apply(this._annotations,arguments)}inject(e){let t=e.index;t in this._annotationsBySectionIndex&&this._annotationsBySectionIndex[t].forEach(n=>{this._annotations[n].attach(e)})}clear(e){let t=e.index;t in this._annotationsBySectionIndex&&this._annotationsBySectionIndex[t].forEach(n=>{this._annotations[n].detach(e)})}show(){}hide(){}}class Fl{constructor({type:e,cfiRange:t,data:r,sectionIndex:n,cb:s,className:a,styles:o}){this.type=e,this.cfiRange=t,this.data=r,this.sectionIndex=n,this.mark=void 0,this.cb=s,this.className=a,this.styles=o}update(e){this.data=e}attach(e){let{cfiRange:t,data:r,type:n,mark:s,cb:a,className:o,styles:l}=this,h;return n==="highlight"?h=e.highlight(t,r,a,o,l):n==="underline"?h=e.underline(t,r,a,o,l):n==="mark"&&(h=e.mark(t,r,a)),this.mark=h,this.emit(pe.ANNOTATION.ATTACH,h),h}detach(e){let{cfiRange:t,type:r}=this,n;return e&&(r==="highlight"?n=e.unhighlight(t):r==="underline"?n=e.ununderline(t):r==="mark"&&(n=e.unmark(t))),this.mark=void 0,this.emit(pe.ANNOTATION.DETACH,n),n}text(){}}Gt(Fl.prototype);var oi={},wn={};Object.defineProperty(wn,"__esModule",{value:!0});wn.createElement=Ul;function Ul(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}wn.default={createElement:Ul};var Or={};Object.defineProperty(Or,"__esModule",{value:!0});Or.proxyMouse=Wl;Or.clone=jl;Or.default={proxyMouse:Wl};function Wl(i,e){function t(a){for(var o=e.length-1;o>=0;o--){var l=e[o],h=a.clientX,u=a.clientY;if(a.touches&&a.touches.length&&(h=a.touches[0].clientX,u=a.touches[0].clientY),!!Ld(l,i,h,u)){l.dispatchEvent(jl(a));break}}}if(i.nodeName==="iframe"||i.nodeName==="IFRAME")try{this.target=i.contentDocument}catch{this.target=i}else this.target=i;for(var r=["mouseup","mousedown","click","touchstart"],n=0;n<r.length;n++){var s=r[n];this.target.addEventListener(s,function(a){return t(a)},!1)}}function jl(i){var e=Object.assign({},i,{bubbles:!1});try{return new MouseEvent(i.type,e)}catch{var t=document.createEvent("MouseEvents");return t.initMouseEvent(i.type,!1,e.cancelable,e.view,e.detail,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget),t}}function Ld(i,e,t,r){var n=e.getBoundingClientRect();function s(u,c,v){var g=u.top-n.top,I=u.left-n.left,w=g+u.height,p=I+u.width;return g<=v&&I<=c&&w>v&&p>c}var a=i.getBoundingClientRect();if(!s(a,t,r))return!1;for(var o=i.getClientRects(),l=0,h=o.length;l<h;l++)if(s(o[l],t,r))return!0;return!1}var xn,ia;Object.defineProperty(oi,"__esModule",{value:!0});var Hl=oi.Underline=ia=oi.Highlight=oi.Mark=xn=oi.Pane=void 0,Dd=function i(e,t,r){e===null&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(n===void 0){var s=Object.getPrototypeOf(e);return s===null?void 0:i(s,t,r)}else{if("value"in n)return n.value;var a=n.get;return a===void 0?void 0:a.call(r)}},En=function(){function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}}(),Pd=wn,Rr=$l(Pd),zd=Or,Md=$l(zd);function $l(i){return i&&i.__esModule?i:{default:i}}function Zl(i,e){if(!i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:i}function Vl(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(i,e):i.__proto__=e)}function Tn(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}xn=oi.Pane=function(){function i(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:document.body;Tn(this,i),this.target=e,this.element=Rr.default.createElement("svg"),this.marks=[],this.element.style.position="absolute",this.element.setAttribute("pointer-events","none"),Md.default.proxyMouse(this.target,this.marks),this.container=t,this.container.appendChild(this.element),this.render()}return En(i,[{key:"addMark",value:function(t){var r=Rr.default.createElement("g");return this.element.appendChild(r),t.bind(r,this.container),this.marks.push(t),t.render(),t}},{key:"removeMark",value:function(t){var r=this.marks.indexOf(t);if(r!==-1){var n=t.unbind();this.element.removeChild(n),this.marks.splice(r,1)}}},{key:"render",value:function(){Wd(this.element,Ud(this.target,this.container));var t=!0,r=!1,n=void 0;try{for(var s=this.marks[Symbol.iterator](),a;!(t=(a=s.next()).done);t=!0){var o=a.value;o.render()}}catch(l){r=!0,n=l}finally{try{!t&&s.return&&s.return()}finally{if(r)throw n}}}}]),i}();var Bd=oi.Mark=function(){function i(){Tn(this,i),this.element=null}return En(i,[{key:"bind",value:function(t,r){this.element=t,this.container=r}},{key:"unbind",value:function(){var t=this.element;return this.element=null,t}},{key:"render",value:function(){}},{key:"dispatchEvent",value:function(t){!this.element||this.element.dispatchEvent(t)}},{key:"getBoundingClientRect",value:function(){return this.element.getBoundingClientRect()}},{key:"getClientRects",value:function(){for(var t=[],r=this.element.firstChild;r;)t.push(r.getBoundingClientRect()),r=r.nextSibling;return t}},{key:"filteredRanges",value:function(){var t=Array.from(this.range.getClientRects());return t.filter(function(r){for(var n=0;n<t.length;n++){if(t[n]===r)return!0;var s=jd(t[n],r);if(s)return!1}return!0})}}]),i}(),Fd=ia=oi.Highlight=function(i){Vl(e,i);function e(t,r,n,s){Tn(this,e);var a=Zl(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return a.range=t,a.className=r,a.data=n||{},a.attributes=s||{},a}return En(e,[{key:"bind",value:function(r,n){Dd(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"bind",this).call(this,r,n);for(var s in this.data)this.data.hasOwnProperty(s)&&(this.element.dataset[s]=this.data[s]);for(var s in this.attributes)this.attributes.hasOwnProperty(s)&&this.element.setAttribute(s,this.attributes[s]);this.className&&this.element.classList.add(this.className)}},{key:"render",value:function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);for(var r=this.element.ownerDocument.createDocumentFragment(),n=this.filteredRanges(),s=this.element.getBoundingClientRect(),a=this.container.getBoundingClientRect(),o=0,l=n.length;o<l;o++){var h=n[o],u=Rr.default.createElement("rect");u.setAttribute("x",h.left-s.left+a.left),u.setAttribute("y",h.top-s.top+a.top),u.setAttribute("height",h.height),u.setAttribute("width",h.width),r.appendChild(u)}this.element.appendChild(r)}}]),e}(Bd);Hl=oi.Underline=function(i){Vl(e,i);function e(t,r,n,s){return Tn(this,e),Zl(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,r,n,s))}return En(e,[{key:"render",value:function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);for(var r=this.element.ownerDocument.createDocumentFragment(),n=this.filteredRanges(),s=this.element.getBoundingClientRect(),a=this.container.getBoundingClientRect(),o=0,l=n.length;o<l;o++){var h=n[o],u=Rr.default.createElement("rect");u.setAttribute("x",h.left-s.left+a.left),u.setAttribute("y",h.top-s.top+a.top),u.setAttribute("height",h.height),u.setAttribute("width",h.width),u.setAttribute("fill","none");var c=Rr.default.createElement("line");c.setAttribute("x1",h.left-s.left+a.left),c.setAttribute("x2",h.left-s.left+a.left+h.width),c.setAttribute("y1",h.top-s.top+a.top+h.height-1),c.setAttribute("y2",h.top-s.top+a.top+h.height-1),c.setAttribute("stroke-width",1),c.setAttribute("stroke","black"),c.setAttribute("stroke-linecap","square"),r.appendChild(u),r.appendChild(c)}this.element.appendChild(r)}}]),e}(Fd);function Ud(i,e){var t=e.getBoundingClientRect(),r=i.getBoundingClientRect();return{top:r.top-t.top,left:r.left-t.left,height:i.scrollHeight,width:i.scrollWidth}}function Wd(i,e){i.style.setProperty("top",e.top+"px","important"),i.style.setProperty("left",e.left+"px","important"),i.style.setProperty("height",e.height+"px","important"),i.style.setProperty("width",e.width+"px","important")}function jd(i,e){return e.right<=i.right&&e.left>=i.left&&e.top>=i.top&&e.bottom<=i.bottom}class Yl{constructor(e,t){this.settings=xt({ignoreClass:"",axis:void 0,direction:void 0,width:0,height:0,layout:void 0,globalLayoutProperties:{},method:void 0,forceRight:!1,allowScriptedContent:!1,allowPopups:!1},t||{}),this.id="epubjs-view-"+$s(),this.section=e,this.index=e.index,this.element=this.container(this.settings.axis),this.added=!1,this.displayed=!1,this.rendered=!1,this.fixedWidth=0,this.fixedHeight=0,this.epubcfi=new He,this.layout=this.settings.layout,this.pane=void 0,this.highlights={},this.underlines={},this.marks={}}container(e){var t=document.createElement("div");return t.classList.add("epub-view"),t.style.height="0px",t.style.width="0px",t.style.overflow="hidden",t.style.position="relative",t.style.display="block",e&&e=="horizontal"?t.style.flex="none":t.style.flex="initial",t}create(){return this.iframe?this.iframe:(this.element||(this.element=this.createContainer()),this.iframe=document.createElement("iframe"),this.iframe.id=this.id,this.iframe.scrolling="no",this.iframe.style.overflow="hidden",this.iframe.seamless="seamless",this.iframe.style.border="none",this.iframe.sandbox="allow-same-origin",this.settings.allowScriptedContent&&(this.iframe.sandbox+=" allow-scripts"),this.settings.allowPopups&&(this.iframe.sandbox+=" allow-popups"),this.iframe.setAttribute("enable-annotation","true"),this.resizing=!0,this.element.style.visibility="hidden",this.iframe.style.visibility="hidden",this.iframe.style.width="0",this.iframe.style.height="0",this._width=0,this._height=0,this.element.setAttribute("ref",this.index),this.added=!0,this.elementBounds=Vs(this.element),"srcdoc"in this.iframe?this.supportsSrcdoc=!0:this.supportsSrcdoc=!1,this.settings.method||(this.settings.method=this.supportsSrcdoc?"srcdoc":"write"),this.iframe)}render(e,t){return this.create(),this.size(),this.sectionRender||(this.sectionRender=this.section.render(e)),this.sectionRender.then(function(r){return this.load(r)}.bind(this)).then(function(){let r=this.contents.writingMode(),n;return this.settings.flow==="scrolled"?n=r.indexOf("vertical")===0?"horizontal":"vertical":n=r.indexOf("vertical")===0?"vertical":"horizontal",r.indexOf("vertical")===0&&this.settings.flow==="paginated"&&(this.layout.delta=this.layout.height),this.setAxis(n),this.emit(pe.VIEWS.AXIS,n),this.setWritingMode(r),this.emit(pe.VIEWS.WRITING_MODE,r),this.layout.format(this.contents,this.section,this.axis),this.addListeners(),new Promise((s,a)=>{this.expand(),this.settings.forceRight&&(this.element.style.marginLeft=this.width()+"px"),s()})}.bind(this),function(r){return this.emit(pe.VIEWS.LOAD_ERROR,r),new Promise((n,s)=>{s(r)})}.bind(this)).then(function(){this.emit(pe.VIEWS.RENDERED,this.section)}.bind(this))}reset(){this.iframe&&(this.iframe.style.width="0",this.iframe.style.height="0",this._width=0,this._height=0,this._textWidth=void 0,this._contentWidth=void 0,this._textHeight=void 0,this._contentHeight=void 0),this._needsReframe=!0}size(e,t){var r=e||this.settings.width,n=t||this.settings.height;this.layout.name==="pre-paginated"?this.lock("both",r,n):this.settings.axis==="horizontal"?this.lock("height",r,n):this.lock("width",r,n),this.settings.width=r,this.settings.height=n}lock(e,t,r){var n=Ys(this.element),s;this.iframe?s=Ys(this.iframe):s={width:0,height:0},e=="width"&&lt(t)&&(this.lockedWidth=t-n.width-s.width),e=="height"&&lt(r)&&(this.lockedHeight=r-n.height-s.height),e==="both"&&lt(t)&&lt(r)&&(this.lockedWidth=t-n.width-s.width,this.lockedHeight=r-n.height-s.height),this.displayed&&this.iframe&&this.expand()}expand(e){var t=this.lockedWidth,r=this.lockedHeight,n;!this.iframe||this._expanding||(this._expanding=!0,this.layout.name==="pre-paginated"?(t=this.layout.columnWidth,r=this.layout.height):this.settings.axis==="horizontal"?(t=this.contents.textWidth(),t%this.layout.pageWidth>0&&(t=Math.ceil(t/this.layout.pageWidth)*this.layout.pageWidth),this.settings.forceEvenPages&&(n=t/this.layout.pageWidth,this.layout.divisor>1&&this.layout.name==="reflowable"&&n%2>0&&(t+=this.layout.pageWidth))):this.settings.axis==="vertical"&&(r=this.contents.textHeight(),this.settings.flow==="paginated"&&r%this.layout.height>0&&(r=Math.ceil(r/this.layout.height)*this.layout.height)),(this._needsReframe||t!=this._width||r!=this._height)&&this.reframe(t,r),this._expanding=!1)}reframe(e,t){var r;lt(e)&&(this.element.style.width=e+"px",this.iframe.style.width=e+"px",this._width=e),lt(t)&&(this.element.style.height=t+"px",this.iframe.style.height=t+"px",this._height=t);let n=this.prevBounds?e-this.prevBounds.width:e,s=this.prevBounds?t-this.prevBounds.height:t;r={width:e,height:t,widthDelta:n,heightDelta:s},this.pane&&this.pane.render(),requestAnimationFrame(()=>{let a;for(let o in this.marks)this.marks.hasOwnProperty(o)&&(a=this.marks[o],this.placeMark(a.element,a.range))}),this.onResize(this,r),this.emit(pe.VIEWS.RESIZED,r),this.prevBounds=r,this.elementBounds=Vs(this.element)}load(e){var t=new je,r=t.promise;if(!this.iframe)return t.reject(new Error("No Iframe Available")),r;if(this.iframe.onload=function(s){this.onLoad(s,t)}.bind(this),this.settings.method==="blobUrl")this.blobUrl=qs(e,"application/xhtml+xml"),this.iframe.src=this.blobUrl,this.element.appendChild(this.iframe);else if(this.settings.method==="srcdoc")this.iframe.srcdoc=e,this.element.appendChild(this.iframe);else{if(this.element.appendChild(this.iframe),this.document=this.iframe.contentDocument,!this.document)return t.reject(new Error("No Document Available")),r;if(this.iframe.contentDocument.open(),window.MSApp&&MSApp.execUnsafeLocalFunction){var n=this;MSApp.execUnsafeLocalFunction(function(){n.iframe.contentDocument.write(e)})}else this.iframe.contentDocument.write(e);this.iframe.contentDocument.close()}return r}onLoad(e,t){this.window=this.iframe.contentWindow,this.document=this.iframe.contentDocument,this.contents=new Bl(this.document,this.document.body,this.section.cfiBase,this.section.index),this.rendering=!1;var r=this.document.querySelector("link[rel='canonical']");r?r.setAttribute("href",this.section.canonical):(r=this.document.createElement("link"),r.setAttribute("rel","canonical"),r.setAttribute("href",this.section.canonical),this.document.querySelector("head").appendChild(r)),this.contents.on(pe.CONTENTS.EXPAND,()=>{this.displayed&&this.iframe&&(this.expand(),this.contents&&this.layout.format(this.contents))}),this.contents.on(pe.CONTENTS.RESIZE,n=>{this.displayed&&this.iframe&&(this.expand(),this.contents&&this.layout.format(this.contents))}),t.resolve(this.contents)}setLayout(e){this.layout=e,this.contents&&(this.layout.format(this.contents),this.expand())}setAxis(e){this.settings.axis=e,e=="horizontal"?this.element.style.flex="none":this.element.style.flex="initial",this.size()}setWritingMode(e){this.writingMode=e}addListeners(){}removeListeners(e){}display(e){var t=new je;return this.displayed?t.resolve(this):this.render(e).then(function(){this.emit(pe.VIEWS.DISPLAYED,this),this.onDisplayed(this),this.displayed=!0,t.resolve(this)}.bind(this),function(r){t.reject(r,this)}),t.promise}show(){this.element.style.visibility="visible",this.iframe&&(this.iframe.style.visibility="visible",this.iframe.style.transform="translateZ(0)",this.iframe.offsetWidth,this.iframe.style.transform=null),this.emit(pe.VIEWS.SHOWN,this)}hide(){this.element.style.visibility="hidden",this.iframe.style.visibility="hidden",this.stopExpanding=!0,this.emit(pe.VIEWS.HIDDEN,this)}offset(){return{top:this.element.offsetTop,left:this.element.offsetLeft}}width(){return this._width}height(){return this._height}position(){return this.element.getBoundingClientRect()}locationOf(e){this.iframe.getBoundingClientRect();var t=this.contents.locationOf(e,this.settings.ignoreClass);return{left:t.left,top:t.top}}onDisplayed(e){}onResize(e,t){}bounds(e){return(e||!this.elementBounds)&&(this.elementBounds=Vs(this.element)),this.elementBounds}highlight(e,t={},r,n="epubjs-hl",s={}){if(!this.contents)return;const a=Object.assign({fill:"yellow","fill-opacity":"0.3","mix-blend-mode":"multiply"},s);let o=this.contents.range(e),l=()=>{this.emit(pe.VIEWS.MARK_CLICKED,e,t)};t.epubcfi=e,this.pane||(this.pane=new xn(this.iframe,this.element));let h=new ia(o,n,t,a),u;try{u=this.pane.addMark(h)}catch(c){console.error(c);return}return this.highlights[e]={mark:u,element:u.element,listeners:[l,r]},u.element.setAttribute("ref",n),u.element.addEventListener("click",l),u.element.addEventListener("touchstart",l),r&&(u.element.addEventListener("click",r),u.element.addEventListener("touchstart",r)),u}underline(e,t={},r,n="epubjs-ul",s={}){if(!this.contents)return;const a=Object.assign({stroke:"black","stroke-opacity":"0.3","mix-blend-mode":"multiply"},s);let o=this.contents.range(e),l=()=>{this.emit(pe.VIEWS.MARK_CLICKED,e,t)};t.epubcfi=e,this.pane||(this.pane=new xn(this.iframe,this.element));let h=new Hl(o,n,t,a),u=this.pane.addMark(h);return this.underlines[e]={mark:u,element:u.element,listeners:[l,r]},u.element.setAttribute("ref",n),u.element.addEventListener("click",l),u.element.addEventListener("touchstart",l),r&&(u.element.addEventListener("click",r),u.element.addEventListener("touchstart",r)),u}mark(e,t={},r){if(!this.contents)return;if(e in this.marks)return this.marks[e];let n=this.contents.range(e);if(!n)return;let s=n.commonAncestorContainer,a=s.nodeType===1?s:s.parentNode,o=h=>{this.emit(pe.VIEWS.MARK_CLICKED,e,t)};n.collapsed&&s.nodeType===1?(n=new Range,n.selectNodeContents(s)):n.collapsed&&(n=new Range,n.selectNodeContents(a));let l=this.document.createElement("a");return l.setAttribute("ref","epubjs-mk"),l.style.position="absolute",l.dataset.epubcfi=e,t&&Object.keys(t).forEach(h=>{l.dataset[h]=t[h]}),r&&(l.addEventListener("click",r),l.addEventListener("touchstart",r)),l.addEventListener("click",o),l.addEventListener("touchstart",o),this.placeMark(l,n),this.element.appendChild(l),this.marks[e]={element:l,range:n,listeners:[o,r]},a}placeMark(e,t){let r,n,s;if(this.layout.name==="pre-paginated"||this.settings.axis!=="horizontal"){let o=t.getBoundingClientRect();r=o.top,n=o.right}else{let o=t.getClientRects(),l;for(var a=0;a!=o.length;a++)l=o[a],(!s||l.left<s)&&(s=l.left,n=Math.ceil(s/this.layout.props.pageWidth)*this.layout.props.pageWidth-this.layout.gap/2,r=l.top)}e.style.top=`${r}px`,e.style.left=`${n}px`}unhighlight(e){let t;e in this.highlights&&(t=this.highlights[e],this.pane.removeMark(t.mark),t.listeners.forEach(r=>{r&&(t.element.removeEventListener("click",r),t.element.removeEventListener("touchstart",r))}),delete this.highlights[e])}ununderline(e){let t;e in this.underlines&&(t=this.underlines[e],this.pane.removeMark(t.mark),t.listeners.forEach(r=>{r&&(t.element.removeEventListener("click",r),t.element.removeEventListener("touchstart",r))}),delete this.underlines[e])}unmark(e){let t;e in this.marks&&(t=this.marks[e],this.element.removeChild(t.element),t.listeners.forEach(r=>{r&&(t.element.removeEventListener("click",r),t.element.removeEventListener("touchstart",r))}),delete this.marks[e])}destroy(){for(let e in this.highlights)this.unhighlight(e);for(let e in this.underlines)this.ununderline(e);for(let e in this.marks)this.unmark(e);this.blobUrl&&cd(this.blobUrl),this.displayed&&(this.displayed=!1,this.removeListeners(),this.contents.destroy(),this.stopExpanding=!0,this.element.removeChild(this.iframe),this.pane&&(this.pane.element.remove(),this.pane=void 0),this.iframe=void 0,this.contents=void 0,this._textWidth=null,this._textHeight=null,this._width=null,this._height=null)}}Gt(Yl.prototype);function Hd(){var i="reverse",e=$d();return document.body.appendChild(e),e.scrollLeft>0?i="default":typeof Element!="undefined"&&Element.prototype.scrollIntoView?(e.children[0].children[1].scrollIntoView(),e.scrollLeft<0&&(i="negative")):(e.scrollLeft=1,e.scrollLeft===0&&(i="negative")),document.body.removeChild(e),i}function $d(){var i=document.createElement("div");i.dir="rtl",i.style.position="fixed",i.style.width="1px",i.style.height="1px",i.style.top="0px",i.style.left="0px",i.style.overflow="hidden";var e=document.createElement("div");e.style.width="2px";var t=document.createElement("span");t.style.width="1px",t.style.display="inline-block";var r=document.createElement("span");return r.style.width="1px",r.style.display="inline-block",e.appendChild(t),e.appendChild(r),i.appendChild(e),i}function Zd(i){var e=typeof i;return i!=null&&(e=="object"||e=="function")}var ra=Zd,Vd=typeof Kt=="object"&&Kt&&Kt.Object===Object&&Kt,Yd=Vd,Xd=Yd,qd=typeof self=="object"&&self&&self.Object===Object&&self,Kd=Xd||qd||Function("return this")(),Xl=Kd,Gd=Xl,Jd=function(){return Gd.Date.now()},Qd=Jd,ep=/\s/;function tp(i){for(var e=i.length;e--&&ep.test(i.charAt(e)););return e}var ip=tp,rp=ip,np=/^\s+/;function sp(i){return i&&i.slice(0,rp(i)+1).replace(np,"")}var ap=sp,op=Xl,lp=op.Symbol,ql=lp,Kl=ql,Gl=Object.prototype,hp=Gl.hasOwnProperty,fp=Gl.toString,Lr=Kl?Kl.toStringTag:void 0;function up(i){var e=hp.call(i,Lr),t=i[Lr];try{i[Lr]=void 0;var r=!0}catch{}var n=fp.call(i);return r&&(e?i[Lr]=t:delete i[Lr]),n}var cp=up,dp=Object.prototype,pp=dp.toString;function vp(i){return pp.call(i)}var gp=vp,Jl=ql,mp=cp,yp=gp,_p="[object Null]",bp="[object Undefined]",Ql=Jl?Jl.toStringTag:void 0;function wp(i){return i==null?i===void 0?bp:_p:Ql&&Ql in Object(i)?mp(i):yp(i)}var xp=wp;function Ep(i){return i!=null&&typeof i=="object"}var Tp=Ep,Sp=xp,Cp=Tp,kp="[object Symbol]";function Ap(i){return typeof i=="symbol"||Cp(i)&&Sp(i)==kp}var Ip=Ap,Np=ap,eh=ra,Op=Ip,th=0/0,Rp=/^[-+]0x[0-9a-f]+$/i,Lp=/^0b[01]+$/i,Dp=/^0o[0-7]+$/i,Pp=parseInt;function zp(i){if(typeof i=="number")return i;if(Op(i))return th;if(eh(i)){var e=typeof i.valueOf=="function"?i.valueOf():i;i=eh(e)?e+"":e}if(typeof i!="string")return i===0?i:+i;i=Np(i);var t=Lp.test(i);return t||Dp.test(i)?Pp(i.slice(2),t?2:8):Rp.test(i)?th:+i}var Mp=zp,Bp=ra,na=Qd,ih=Mp,Fp="Expected a function",Up=Math.max,Wp=Math.min;function jp(i,e,t){var r,n,s,a,o,l,h=0,u=!1,c=!1,v=!0;if(typeof i!="function")throw new TypeError(Fp);e=ih(e)||0,Bp(t)&&(u=!!t.leading,c="maxWait"in t,s=c?Up(ih(t.maxWait)||0,e):s,v="trailing"in t?!!t.trailing:v);function g(S){var k=r,z=n;return r=n=void 0,h=S,a=i.apply(z,k),a}function I(S){return h=S,o=setTimeout(d,e),u?g(S):a}function w(S){var k=S-l,z=S-h,$=e-k;return c?Wp($,s-z):$}function p(S){var k=S-l,z=S-h;return l===void 0||k>=e||k<0||c&&z>=s}function d(){var S=na();if(p(S))return _(S);o=setTimeout(d,w(S))}function _(S){return o=void 0,v&&r?g(S):(r=n=void 0,a)}function T(){o!==void 0&&clearTimeout(o),h=0,r=l=n=o=void 0}function N(){return o===void 0?a:_(na())}function y(){var S=na(),k=p(S);if(r=arguments,n=this,l=S,k){if(o===void 0)return I(l);if(c)return clearTimeout(o),o=setTimeout(d,e),g(l)}return o===void 0&&(o=setTimeout(d,e)),a}return y.cancel=T,y.flush=N,y}var rh=jp,Hp=rh,$p=ra,Zp="Expected a function";function Vp(i,e,t){var r=!0,n=!0;if(typeof i!="function")throw new TypeError(Zp);return $p(t)&&(r="leading"in t?!!t.leading:r,n="trailing"in t?!!t.trailing:n),Hp(i,e,{leading:r,maxWait:e,trailing:n})}var Yp=Vp;class Xp{constructor(e){this.settings=e||{},this.id="epubjs-container-"+$s(),this.container=this.create(this.settings),this.settings.hidden&&(this.wrapper=this.wrap(this.container))}create(e){let t=e.height,r=e.width,n=e.overflow||!1,s=e.axis||"vertical",a=e.direction;xt(this.settings,e),e.height&&lt(e.height)&&(t=e.height+"px"),e.width&&lt(e.width)&&(r=e.width+"px");let o=document.createElement("div");return o.id=this.id,o.classList.add("epub-container"),o.style.wordSpacing="0",o.style.lineHeight="0",o.style.verticalAlign="top",o.style.position="relative",s==="horizontal"&&(o.style.display="flex",o.style.flexDirection="row",o.style.flexWrap="nowrap"),r&&(o.style.width=r),t&&(o.style.height=t),n&&(n==="scroll"&&s==="vertical"?(o.style["overflow-y"]=n,o.style["overflow-x"]="hidden"):n==="scroll"&&s==="horizontal"?(o.style["overflow-y"]="hidden",o.style["overflow-x"]=n):o.style.overflow=n),a&&(o.dir=a,o.style.direction=a),a&&this.settings.fullsize&&(document.body.style.direction=a),o}wrap(e){var t=document.createElement("div");return t.style.visibility="hidden",t.style.overflow="hidden",t.style.width="0",t.style.height="0",t.appendChild(e),t}getElement(e){var t;if(ad(e)?t=e:typeof e=="string"&&(t=document.getElementById(e)),!t)throw new Error("Not an Element");return t}attachTo(e){var t=this.getElement(e),r;if(!!t)return this.settings.hidden?r=this.wrapper:r=this.container,t.appendChild(r),this.element=t,t}getContainer(){return this.container}onResize(e){(!lt(this.settings.width)||!lt(this.settings.height))&&(this.resizeFunc=Yp(e,50),window.addEventListener("resize",this.resizeFunc,!1))}onOrientationChange(e){this.orientationChangeFunc=e,window.addEventListener("orientationchange",this.orientationChangeFunc,!1)}size(e,t){var r;let n=e||this.settings.width,s=t||this.settings.height;e===null?(r=this.element.getBoundingClientRect(),r.width&&(e=Math.floor(r.width),this.container.style.width=e+"px")):lt(e)?this.container.style.width=e+"px":this.container.style.width=e,t===null?(r=r||this.element.getBoundingClientRect(),r.height&&(t=r.height,this.container.style.height=t+"px")):lt(t)?this.container.style.height=t+"px":this.container.style.height=t,lt(e)||(e=this.container.clientWidth),lt(t)||(t=this.container.clientHeight),this.containerStyles=window.getComputedStyle(this.container),this.containerPadding={left:parseFloat(this.containerStyles["padding-left"])||0,right:parseFloat(this.containerStyles["padding-right"])||0,top:parseFloat(this.containerStyles["padding-top"])||0,bottom:parseFloat(this.containerStyles["padding-bottom"])||0};let a=Xs(),o=window.getComputedStyle(document.body),l={left:parseFloat(o["padding-left"])||0,right:parseFloat(o["padding-right"])||0,top:parseFloat(o["padding-top"])||0,bottom:parseFloat(o["padding-bottom"])||0};return n||(e=a.width-l.left-l.right),(this.settings.fullsize&&!s||!s)&&(t=a.height-l.top-l.bottom),{width:e-this.containerPadding.left-this.containerPadding.right,height:t-this.containerPadding.top-this.containerPadding.bottom}}bounds(){let e;return this.container.style.overflow!=="visible"&&(e=this.container&&this.container.getBoundingClientRect()),!e||!e.width||!e.height?Xs():e}getSheet(){var e=document.createElement("style");return e.appendChild(document.createTextNode("")),document.head.appendChild(e),e.sheet}addStyleRules(e,t){var r="#"+this.id+" ",n="";this.sheet||(this.sheet=this.getSheet()),t.forEach(function(s){for(var a in s)s.hasOwnProperty(a)&&(n+=a+":"+s[a]+";")}),this.sheet.insertRule(r+e+" {"+n+"}",0)}axis(e){e==="horizontal"?(this.container.style.display="flex",this.container.style.flexDirection="row",this.container.style.flexWrap="nowrap"):this.container.style.display="block",this.settings.axis=e}direction(e){this.container&&(this.container.dir=e,this.container.style.direction=e),this.settings.fullsize&&(document.body.style.direction=e),this.settings.dir=e}overflow(e){this.container&&(e==="scroll"&&this.settings.axis==="vertical"?(this.container.style["overflow-y"]=e,this.container.style["overflow-x"]="hidden"):e==="scroll"&&this.settings.axis==="horizontal"?(this.container.style["overflow-y"]="hidden",this.container.style["overflow-x"]=e):this.container.style.overflow=e),this.settings.overflow=e}destroy(){this.element&&(this.settings.hidden,this.element.contains(this.container)&&this.element.removeChild(this.container),window.removeEventListener("resize",this.resizeFunc),window.removeEventListener("orientationChange",this.orientationChangeFunc))}}class qp{constructor(e){this.container=e,this._views=[],this.length=0,this.hidden=!1}all(){return this._views}first(){return this._views[0]}last(){return this._views[this._views.length-1]}indexOf(e){return this._views.indexOf(e)}slice(){return this._views.slice.apply(this._views,arguments)}get(e){return this._views[e]}append(e){return this._views.push(e),this.container&&this.container.appendChild(e.element),this.length++,e}prepend(e){return this._views.unshift(e),this.container&&this.container.insertBefore(e.element,this.container.firstChild),this.length++,e}insert(e,t){return this._views.splice(t,0,e),this.container&&(t<this.container.children.length?this.container.insertBefore(e.element,this.container.children[t]):this.container.appendChild(e.element)),this.length++,e}remove(e){var t=this._views.indexOf(e);t>-1&&this._views.splice(t,1),this.destroy(e),this.length--}destroy(e){e.displayed&&e.destroy(),this.container&&this.container.removeChild(e.element),e=null}forEach(){return this._views.forEach.apply(this._views,arguments)}clear(){var e,t=this.length;if(!!this.length){for(var r=0;r<t;r++)e=this._views[r],this.destroy(e);this._views=[],this.length=0}}find(e){for(var t,r=this.length,n=0;n<r;n++)if(t=this._views[n],t.displayed&&t.section.index==e.index)return t}displayed(){for(var e=[],t,r=this.length,n=0;n<r;n++)t=this._views[n],t.displayed&&e.push(t);return e}show(){for(var e,t=this.length,r=0;r<t;r++)e=this._views[r],e.displayed&&e.show();this.hidden=!1}hide(){for(var e,t=this.length,r=0;r<t;r++)e=this._views[r],e.displayed&&e.hide();this.hidden=!0}}class Sn{constructor(e){this.name="default",this.optsSettings=e.settings,this.View=e.view,this.request=e.request,this.renditionQueue=e.queue,this.q=new Js(this),this.settings=xt(this.settings||{},{infinite:!0,hidden:!1,width:void 0,height:void 0,axis:void 0,writingMode:void 0,flow:"scrolled",ignoreClass:"",fullsize:void 0,allowScriptedContent:!1,allowPopups:!1}),xt(this.settings,e.settings||{}),this.viewSettings={ignoreClass:this.settings.ignoreClass,axis:this.settings.axis,flow:this.settings.flow,layout:this.layout,method:this.settings.method,width:0,height:0,forceEvenPages:!0,allowScriptedContent:this.settings.allowScriptedContent,allowPopups:this.settings.allowPopups},this.rendered=!1}render(e,t){let r=e.tagName;typeof this.settings.fullsize=="undefined"&&r&&(r.toLowerCase()=="body"||r.toLowerCase()=="html")&&(this.settings.fullsize=!0),this.settings.fullsize&&(this.settings.overflow="visible",this.overflow=this.settings.overflow),this.settings.size=t,this.settings.rtlScrollType=Hd(),this.stage=new Xp({width:t.width,height:t.height,overflow:this.overflow,hidden:this.settings.hidden,axis:this.settings.axis,fullsize:this.settings.fullsize,direction:this.settings.direction}),this.stage.attachTo(e),this.container=this.stage.getContainer(),this.views=new qp(this.container),this._bounds=this.bounds(),this._stageSize=this.stage.size(),this.viewSettings.width=this._stageSize.width,this.viewSettings.height=this._stageSize.height,this.stage.onResize(this.onResized.bind(this)),this.stage.onOrientationChange(this.onOrientationChange.bind(this)),this.addEventListeners(),this.layout&&this.updateLayout(),this.rendered=!0}addEventListeners(){var e;window.addEventListener("unload",function(t){this.destroy()}.bind(this)),this.settings.fullsize?e=window:e=this.container,this._onScroll=this.onScroll.bind(this),e.addEventListener("scroll",this._onScroll)}removeEventListeners(){var e;this.settings.fullsize?e=window:e=this.container,e.removeEventListener("scroll",this._onScroll),this._onScroll=void 0}destroy(){clearTimeout(this.orientationTimeout),clearTimeout(this.resizeTimeout),clearTimeout(this.afterScrolled),this.clear(),this.removeEventListeners(),this.stage.destroy(),this.rendered=!1}onOrientationChange(e){let{orientation:t}=window;this.optsSettings.resizeOnOrientationChange&&this.resize(),clearTimeout(this.orientationTimeout),this.orientationTimeout=setTimeout(function(){this.orientationTimeout=void 0,this.optsSettings.resizeOnOrientationChange&&this.resize(),this.emit(pe.MANAGERS.ORIENTATION_CHANGE,t)}.bind(this),500)}onResized(e){this.resize()}resize(e,t,r){let n=this.stage.size(e,t);if(this.winBounds=Xs(),this.orientationTimeout&&this.winBounds.width===this.winBounds.height){this._stageSize=void 0;return}this._stageSize&&this._stageSize.width===n.width&&this._stageSize.height===n.height||(this._stageSize=n,this._bounds=this.bounds(),this.clear(),this.viewSettings.width=this._stageSize.width,this.viewSettings.height=this._stageSize.height,this.updateLayout(),this.emit(pe.MANAGERS.RESIZED,{width:this._stageSize.width,height:this._stageSize.height},r))}createView(e,t){return new this.View(e,xt(this.viewSettings,{forceRight:t}))}handleNextPrePaginated(e,t,r){let n;if(this.layout.name==="pre-paginated"&&this.layout.divisor>1){if(e||t.index===0)return;if(n=t.next(),n&&!n.properties.includes("page-spread-left"))return r.call(this,n)}}display(e,t){var r=new je,n=r.promise;(t===e.href||lt(t))&&(t=void 0);var s=this.views.find(e);if(s&&e&&this.layout.name!=="pre-paginated"){let o=s.offset();if(this.settings.direction==="ltr")this.scrollTo(o.left,o.top,!0);else{let l=s.width();this.scrollTo(o.left+l,o.top,!0)}if(t){let l=s.locationOf(t),h=s.width();this.moveTo(l,h)}return r.resolve(),n}this.clear();let a=!1;return this.layout.name==="pre-paginated"&&this.layout.divisor===2&&e.properties.includes("page-spread-right")&&(a=!0),this.add(e,a).then(function(o){if(t){let l=o.locationOf(t),h=o.width();this.moveTo(l,h)}}.bind(this),o=>{r.reject(o)}).then(function(){return this.handleNextPrePaginated(a,e,this.add)}.bind(this)).then(function(){this.views.show(),r.resolve()}.bind(this)),n}afterDisplayed(e){this.emit(pe.MANAGERS.ADDED,e)}afterResized(e){this.emit(pe.MANAGERS.RESIZE,e.section)}moveTo(e,t){var r=0,n=0;this.isPaginated?(r=Math.floor(e.left/this.layout.delta)*this.layout.delta,r+this.layout.delta>this.container.scrollWidth&&(r=this.container.scrollWidth-this.layout.delta),n=Math.floor(e.top/this.layout.delta)*this.layout.delta,n+this.layout.delta>this.container.scrollHeight&&(n=this.container.scrollHeight-this.layout.delta)):n=e.top,this.settings.direction==="rtl"&&(r=r+this.layout.delta,r=r-t),this.scrollTo(r,n,!0)}add(e,t){var r=this.createView(e,t);return this.views.append(r),r.onDisplayed=this.afterDisplayed.bind(this),r.onResize=this.afterResized.bind(this),r.on(pe.VIEWS.AXIS,n=>{this.updateAxis(n)}),r.on(pe.VIEWS.WRITING_MODE,n=>{this.updateWritingMode(n)}),r.display(this.request)}append(e,t){var r=this.createView(e,t);return this.views.append(r),r.onDisplayed=this.afterDisplayed.bind(this),r.onResize=this.afterResized.bind(this),r.on(pe.VIEWS.AXIS,n=>{this.updateAxis(n)}),r.on(pe.VIEWS.WRITING_MODE,n=>{this.updateWritingMode(n)}),r.display(this.request)}prepend(e,t){var r=this.createView(e,t);return r.on(pe.VIEWS.RESIZED,n=>{this.counter(n)}),this.views.prepend(r),r.onDisplayed=this.afterDisplayed.bind(this),r.onResize=this.afterResized.bind(this),r.on(pe.VIEWS.AXIS,n=>{this.updateAxis(n)}),r.on(pe.VIEWS.WRITING_MODE,n=>{this.updateWritingMode(n)}),r.display(this.request)}counter(e){this.settings.axis==="vertical"?this.scrollBy(0,e.heightDelta,!0):this.scrollBy(e.widthDelta,0,!0)}next(){var e,t;let r=this.settings.direction;if(!!this.views.length&&(this.isPaginated&&this.settings.axis==="horizontal"&&(!r||r==="ltr")?(this.scrollLeft=this.container.scrollLeft,t=this.container.scrollLeft+this.container.offsetWidth+this.layout.delta,t<=this.container.scrollWidth?this.scrollBy(this.layout.delta,0,!0):e=this.views.last().section.next()):this.isPaginated&&this.settings.axis==="horizontal"&&r==="rtl"?(this.scrollLeft=this.container.scrollLeft,this.settings.rtlScrollType==="default"?(this.scrollLeft=Math.floor(this.container.scrollLeft),t=Math.floor(this.container.scrollLeft),t>0?this.scrollBy(this.layout.delta,0,!0):e=this.views.last().section.next()):(t=this.container.scrollLeft+this.layout.delta*-1,t>this.container.scrollWidth*-1?this.scrollBy(this.layout.delta,0,!0):e=this.views.last().section.next())):this.isPaginated&&this.settings.axis==="vertical"?(this.scrollTop=Math.floor(this.container.scrollTop),Math.floor(this.container.scrollTop+this.container.offsetHeight)<this.container.scrollHeight?this.scrollBy(0,this.layout.height,!0):e=this.views.last().section.next()):e=this.views.last().section.next(),e)){this.clear(),this.updateLayout();let n=!1;return this.layout.name==="pre-paginated"&&this.layout.divisor===2&&e.properties.includes("page-spread-right")&&(n=!0),this.append(e,n).then(function(){return this.handleNextPrePaginated(n,e,this.append)}.bind(this),s=>s).then(function(){!this.isPaginated&&this.settings.axis==="horizontal"&&this.settings.direction==="rtl"&&this.settings.rtlScrollType==="default"&&this.scrollTo(this.container.scrollWidth,0,!0),this.views.show()}.bind(this))}}prev(){var e,t;let r=this.settings.direction;if(!!this.views.length&&(this.isPaginated&&this.settings.axis==="horizontal"&&(!r||r==="ltr")?(this.scrollLeft=this.container.scrollLeft,t=this.container.scrollLeft,t>0?this.scrollBy(-this.layout.delta,0,!0):e=this.views.first().section.prev()):this.isPaginated&&this.settings.axis==="horizontal"&&r==="rtl"?(this.scrollLeft=this.container.scrollLeft,this.settings.rtlScrollType==="default"?(t=this.container.scrollLeft+this.container.offsetWidth,t<this.container.scrollWidth?this.scrollBy(-this.layout.delta,0,!0):e=this.views.first().section.prev()):(t=this.container.scrollLeft,t<0?this.scrollBy(-this.layout.delta,0,!0):e=this.views.first().section.prev())):this.isPaginated&&this.settings.axis==="vertical"?(this.scrollTop=this.container.scrollTop,this.container.scrollTop>0?this.scrollBy(0,-this.layout.height,!0):e=this.views.first().section.prev()):e=this.views.first().section.prev(),e)){this.clear(),this.updateLayout();let n=!1;return this.layout.name==="pre-paginated"&&this.layout.divisor===2&&typeof e.prev()!="object"&&(n=!0),this.prepend(e,n).then(function(){var s;if(this.layout.name==="pre-paginated"&&this.layout.divisor>1&&(s=e.prev(),s))return this.prepend(s)}.bind(this),s=>s).then(function(){this.isPaginated&&this.settings.axis==="horizontal"&&(this.settings.direction==="rtl"?this.settings.rtlScrollType==="default"?this.scrollTo(0,0,!0):this.scrollTo(this.container.scrollWidth*-1+this.layout.delta,0,!0):this.scrollTo(this.container.scrollWidth-this.layout.delta,0,!0)),this.views.show()}.bind(this))}}current(){var e=this.visible();return e.length?e[e.length-1]:null}clear(){this.views&&(this.views.hide(),this.scrollTo(0,0,!0),this.views.clear())}currentLocation(){return this.updateLayout(),this.isPaginated&&this.settings.axis==="horizontal"?this.location=this.paginatedLocation():this.location=this.scrolledLocation(),this.location}scrolledLocation(){let e=this.visible(),t=this.container.getBoundingClientRect(),r=t.height<window.innerHeight?t.height:window.innerHeight,n=t.width<window.innerWidth?t.width:window.innerWidth,s=this.settings.axis==="vertical";this.settings.direction;let a=0,o=0;return this.settings.fullsize&&(a=s?window.scrollY:window.scrollX),e.map(h=>{let{index:u,href:c}=h.section,v=h.position(),g=h.width(),I=h.height(),w,p,d,_;s?(w=a+t.top-v.top+o,p=w+r-o,_=this.layout.count(I,r).pages,d=r):(w=a+t.left-v.left+o,p=w+n-o,_=this.layout.count(g,n).pages,d=n);let T=Math.ceil(w/d),N=[],y=Math.ceil(p/d);if(this.settings.direction==="rtl"&&!s){let z=T;T=_-y,y=_-z}N=[];for(var S=T;S<=y;S++){let z=S+1;N.push(z)}let k=this.mapping.page(h.contents,h.section.cfiBase,w,p);return{index:u,href:c,pages:N,totalPages:_,mapping:k}})}paginatedLocation(){let e=this.visible(),t=this.container.getBoundingClientRect(),r=0,n=0;return this.settings.fullsize&&(r=window.scrollX),e.map(a=>{let{index:o,href:l}=a.section,h,u=a.position(),c=a.width();a.height();let v,g,I;this.settings.direction==="rtl"?(h=t.right-r,I=Math.min(Math.abs(h-u.left),this.layout.width)-n,g=u.width-(u.right-h)-n,v=g-I):(h=t.left+r,I=Math.min(u.right-h,this.layout.width)-n,v=h-u.left+n,g=v+I),v=Math.ceil(v),g=Math.ceil(g),n+=I;let w=this.mapping.page(a.contents,a.section.cfiBase,v,g),p=this.layout.count(c).pages,d=Math.floor(v/this.layout.pageWidth),_=[],T=Math.floor(g/this.layout.pageWidth);if(d<0&&(d=0,T=T+1),this.settings.direction==="rtl"){let y=d;d=p-T,T=p-y}for(var N=d+1;N<=T;N++){let y=N;_.push(y)}return{index:o,href:l,pages:_,totalPages:p,mapping:w}})}isVisible(e,t,r,n){var s=e.position(),a=n||this.bounds();return this.settings.axis==="horizontal"&&s.right>a.left-t&&s.left<a.right+r?!0:this.settings.axis==="vertical"&&s.bottom>a.top-t&&s.top<a.bottom+r}visible(){for(var e=this.bounds(),t=this.views.displayed(),r=t.length,n=[],s,a,o=0;o<r;o++)a=t[o],s=this.isVisible(a,0,0,e),s===!0&&n.push(a);return n}scrollBy(e,t,r){let n=this.settings.direction==="rtl"?-1:1;if(r&&(this.ignore=!0),this.settings.fullsize)window.scrollBy(e*n,t*n);else{let s=this.container.scrollLeft+e*n,a=this.container.scrollTop+t;e&&this.container.scrollLeft%e!=0&&(s=Math.round(s/e)*e),t&&this.container.scrollTop%t!=0&&(a=Math.round(a/t)*t),e&&(this.container.scrollLeft=s),t&&(this.container.scrollTop=a)}this.scrolled=!0}scrollTo(e,t,r){r&&(this.ignore=!0),this.settings.fullsize?window.scrollTo(e,t):(this.container.scrollLeft=e,this.container.scrollTop=t),this.scrolled=!0}onScroll(){let e,t;this.settings.fullsize?(e=window.scrollY,t=window.scrollX):(e=this.container.scrollTop,t=this.container.scrollLeft),this.scrollTop=e,this.scrollLeft=t,this.ignore?this.ignore=!1:(this.emit(pe.MANAGERS.SCROLL,{top:e,left:t}),clearTimeout(this.afterScrolled),this.afterScrolled=setTimeout(function(){this.emit(pe.MANAGERS.SCROLLED,{top:this.scrollTop,left:this.scrollLeft})}.bind(this),20))}bounds(){var e;return e=this.stage.bounds(),e}applyLayout(e){this.layout=e,this.updateLayout(),this.views&&this.views.length>0&&this.layout.name==="pre-paginated"&&this.display(this.views.first().section)}updateLayout(){if(!!this.stage){if(this._stageSize=this.stage.size(),this.isPaginated)this.layout.calculate(this._stageSize.width,this._stageSize.height,this.settings.gap),this.settings.offset=this.layout.delta/this.layout.divisor;else{let e,t;this.settings.axis==="vertical"?(e=this._stageSize.width-(this.settings.scrollbarWidth|0),t=this._stageSize.height):(e=this._stageSize.width,t=this._stageSize.height-(this.settings.scrollbarWidth|0)),this.layout.calculate(e,t,void 0,this.settings.axis)}this.viewSettings.width=this.layout.width,this.viewSettings.height=this.layout.height,this.setLayout(this.layout)}}setLayout(e){this.viewSettings.layout=e,this.mapping=new bn(e.props,this.settings.direction,this.settings.axis),this.views&&this.views.forEach(function(t){t&&t.setLayout(e)})}updateWritingMode(e){this.writingMode=e}updateAxis(e,t){!t&&e===this.settings.axis||(this.settings.axis=e,this.stage&&this.stage.axis(e),this.viewSettings.axis=e,this.mapping&&(this.mapping=new bn(this.layout.props,this.settings.direction,this.settings.axis)),this.layout&&(e==="vertical"?this.layout.spread("none"):this.layout.spread(this.layout.settings.spread)))}updateFlow(e,t="auto"){let r=e==="paginated"||e==="auto";this.isPaginated=r,e==="scrolled-doc"||e==="scrolled-continuous"||e==="scrolled"?this.updateAxis("vertical"):this.updateAxis("horizontal"),this.viewSettings.flow=e,this.settings.overflow?this.overflow=this.settings.overflow:this.overflow=r?"hidden":t,this.stage&&this.stage.overflow(this.overflow),this.updateLayout()}getContents(){var e=[];return this.views&&this.views.forEach(function(t){const r=t&&t.contents;r&&e.push(r)}),e}direction(e="ltr"){this.settings.direction=e,this.stage&&this.stage.direction(e),this.viewSettings.direction=e,this.updateLayout()}isRendered(){return this.rendered}}Gt(Sn.prototype);const Kp=Math.PI/2,Gp={easeOutSine:function(i){return Math.sin(i*Kp)},easeInOutSine:function(i){return-.5*(Math.cos(Math.PI*i)-1)},easeInOutQuint:function(i){return(i/=.5)<1?.5*Math.pow(i,5):.5*(Math.pow(i-2,5)+2)},easeInCubic:function(i){return Math.pow(i,3)}};class sa{constructor(e,t){this.settings=xt({duration:80,minVelocity:.2,minDistance:10,easing:Gp.easeInCubic},t||{}),this.supportsTouch=this.supportsTouch(),this.supportsTouch&&this.setup(e)}setup(e){this.manager=e,this.layout=this.manager.layout,this.fullsize=this.manager.settings.fullsize,this.fullsize?(this.element=this.manager.stage.element,this.scroller=window,this.disableScroll()):(this.element=this.manager.stage.container,this.scroller=this.element,this.element.style.WebkitOverflowScrolling="touch"),this.manager.settings.offset=this.layout.width,this.manager.settings.afterScrolledTimeout=this.settings.duration*2,this.isVertical=this.manager.settings.axis==="vertical",!(!this.manager.isPaginated||this.isVertical)&&(this.touchCanceler=!1,this.resizeCanceler=!1,this.snapping=!1,this.scrollLeft,this.scrollTop,this.startTouchX=void 0,this.startTouchY=void 0,this.startTime=void 0,this.endTouchX=void 0,this.endTouchY=void 0,this.endTime=void 0,this.addListeners())}supportsTouch(){return!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)}disableScroll(){this.element.style.overflow="hidden"}enableScroll(){this.element.style.overflow=""}addListeners(){this._onResize=this.onResize.bind(this),window.addEventListener("resize",this._onResize),this._onScroll=this.onScroll.bind(this),this.scroller.addEventListener("scroll",this._onScroll),this._onTouchStart=this.onTouchStart.bind(this),this.scroller.addEventListener("touchstart",this._onTouchStart,{passive:!0}),this.on("touchstart",this._onTouchStart),this._onTouchMove=this.onTouchMove.bind(this),this.scroller.addEventListener("touchmove",this._onTouchMove,{passive:!0}),this.on("touchmove",this._onTouchMove),this._onTouchEnd=this.onTouchEnd.bind(this),this.scroller.addEventListener("touchend",this._onTouchEnd,{passive:!0}),this.on("touchend",this._onTouchEnd),this._afterDisplayed=this.afterDisplayed.bind(this),this.manager.on(pe.MANAGERS.ADDED,this._afterDisplayed)}removeListeners(){window.removeEventListener("resize",this._onResize),this._onResize=void 0,this.scroller.removeEventListener("scroll",this._onScroll),this._onScroll=void 0,this.scroller.removeEventListener("touchstart",this._onTouchStart,{passive:!0}),this.off("touchstart",this._onTouchStart),this._onTouchStart=void 0,this.scroller.removeEventListener("touchmove",this._onTouchMove,{passive:!0}),this.off("touchmove",this._onTouchMove),this._onTouchMove=void 0,this.scroller.removeEventListener("touchend",this._onTouchEnd,{passive:!0}),this.off("touchend",this._onTouchEnd),this._onTouchEnd=void 0,this.manager.off(pe.MANAGERS.ADDED,this._afterDisplayed),this._afterDisplayed=void 0}afterDisplayed(e){let t=e.contents;["touchstart","touchmove","touchend"].forEach(r=>{t.on(r,n=>this.triggerViewEvent(n,t))})}triggerViewEvent(e,t){this.emit(e.type,e,t)}onScroll(e){this.scrollLeft=this.fullsize?window.scrollX:this.scroller.scrollLeft,this.scrollTop=this.fullsize?window.scrollY:this.scroller.scrollTop}onResize(e){this.resizeCanceler=!0}onTouchStart(e){let{screenX:t,screenY:r}=e.touches[0];this.fullsize&&this.enableScroll(),this.touchCanceler=!0,this.startTouchX||(this.startTouchX=t,this.startTouchY=r,this.startTime=this.now()),this.endTouchX=t,this.endTouchY=r,this.endTime=this.now()}onTouchMove(e){let{screenX:t,screenY:r}=e.touches[0],n=Math.abs(r-this.endTouchY);this.touchCanceler=!0,!this.fullsize&&n<10&&(this.element.scrollLeft-=t-this.endTouchX),this.endTouchX=t,this.endTouchY=r,this.endTime=this.now()}onTouchEnd(e){this.fullsize&&this.disableScroll(),this.touchCanceler=!1;let t=this.wasSwiped();t!==0?this.snap(t):this.snap(),this.startTouchX=void 0,this.startTouchY=void 0,this.startTime=void 0,this.endTouchX=void 0,this.endTouchY=void 0,this.endTime=void 0}wasSwiped(){let e=this.layout.pageWidth*this.layout.divisor,t=this.endTouchX-this.startTouchX,r=Math.abs(t),n=this.endTime-this.startTime,s=t/n,a=this.settings.minVelocity;if(r<=this.settings.minDistance||r>=e)return 0;if(s>a)return-1;if(s<-a)return 1}needsSnap(){let e=this.scrollLeft,t=this.layout.pageWidth*this.layout.divisor;return e%t!=0}snap(e=0){let t=this.scrollLeft,r=this.layout.pageWidth*this.layout.divisor,n=Math.round(t/r)*r;return e&&(n+=e*r),this.smoothScrollTo(n)}smoothScrollTo(e){const t=new je,r=this.scrollLeft,n=this.now(),s=this.settings.duration,a=this.settings.easing;this.snapping=!0;function o(){const l=this.now(),h=Math.min(1,(l-n)/s);if(a(h),this.touchCanceler||this.resizeCanceler){this.resizeCanceler=!1,this.snapping=!1,t.resolve();return}h<1?(window.requestAnimationFrame(o.bind(this)),this.scrollTo(r+(e-r)*h,0)):(this.scrollTo(e,0),this.snapping=!1,t.resolve())}return o.call(this),t.promise}scrollTo(e=0,t=0){this.fullsize?window.scroll(e,t):(this.scroller.scrollLeft=e,this.scroller.scrollTop=t)}now(){return"now"in window.performance?performance.now():new Date().getTime()}destroy(){!this.scroller||(this.fullsize&&this.enableScroll(),this.removeListeners(),this.scroller=void 0)}}Gt(sa.prototype);class Jp extends Sn{constructor(e){super(e);this.name="continuous",this.settings=xt(this.settings||{},{infinite:!0,overflow:void 0,axis:void 0,writingMode:void 0,flow:"scrolled",offset:500,offsetDelta:250,width:void 0,height:void 0,snap:!1,afterScrolledTimeout:10,allowScriptedContent:!1,allowPopups:!1}),xt(this.settings,e.settings||{}),e.settings.gap!="undefined"&&e.settings.gap===0&&(this.settings.gap=e.settings.gap),this.viewSettings={ignoreClass:this.settings.ignoreClass,axis:this.settings.axis,flow:this.settings.flow,layout:this.layout,width:0,height:0,forceEvenPages:!1,allowScriptedContent:this.settings.allowScriptedContent,allowPopups:this.settings.allowPopups},this.scrollTop=0,this.scrollLeft=0}display(e,t){return Sn.prototype.display.call(this,e,t).then(function(){return this.fill()}.bind(this))}fill(e){var t=e||new je;return this.q.enqueue(()=>this.check()).then(r=>{r?this.fill(t):t.resolve()}),t.promise}moveTo(e){var t=0,r=0;this.isPaginated?(t=Math.floor(e.left/this.layout.delta)*this.layout.delta,t+this.settings.offsetDelta):(r=e.top,e.top+this.settings.offsetDelta),(t>0||r>0)&&this.scrollBy(t,r,!0)}afterResized(e){this.emit(pe.MANAGERS.RESIZE,e.section)}removeShownListeners(e){e.onDisplayed=function(){}}add(e){var t=this.createView(e);return this.views.append(t),t.on(pe.VIEWS.RESIZED,r=>{t.expanded=!0}),t.on(pe.VIEWS.AXIS,r=>{this.updateAxis(r)}),t.on(pe.VIEWS.WRITING_MODE,r=>{this.updateWritingMode(r)}),t.onDisplayed=this.afterDisplayed.bind(this),t.onResize=this.afterResized.bind(this),t.display(this.request)}append(e){var t=this.createView(e);return t.on(pe.VIEWS.RESIZED,r=>{t.expanded=!0}),t.on(pe.VIEWS.AXIS,r=>{this.updateAxis(r)}),t.on(pe.VIEWS.WRITING_MODE,r=>{this.updateWritingMode(r)}),this.views.append(t),t.onDisplayed=this.afterDisplayed.bind(this),t}prepend(e){var t=this.createView(e);return t.on(pe.VIEWS.RESIZED,r=>{this.counter(r),t.expanded=!0}),t.on(pe.VIEWS.AXIS,r=>{this.updateAxis(r)}),t.on(pe.VIEWS.WRITING_MODE,r=>{this.updateWritingMode(r)}),this.views.prepend(t),t.onDisplayed=this.afterDisplayed.bind(this),t}counter(e){this.settings.axis==="vertical"?this.scrollBy(0,e.heightDelta,!0):this.scrollBy(e.widthDelta,0,!0)}update(e){for(var t=this.bounds(),r=this.views.all(),n=r.length,s=typeof e!="undefined"?e:this.settings.offset||0,a,o,l=new je,h=[],u=0;u<n;u++)if(o=r[u],a=this.isVisible(o,s,s,t),a===!0)if(o.displayed)o.show();else{let c=o.display(this.request).then(function(v){v.show()},v=>{o.hide()});h.push(c)}else this.q.enqueue(o.destroy.bind(o)),clearTimeout(this.trimTimeout),this.trimTimeout=setTimeout(function(){this.q.enqueue(this.trim.bind(this))}.bind(this),250);return h.length?Promise.all(h).catch(c=>{l.reject(c)}):(l.resolve(),l.promise)}check(e,t){var r=new je,n=[],s=this.settings.axis==="horizontal",a=this.settings.offset||0;e&&s&&(a=e),t&&!s&&(a=t);var o=this._bounds;let l=s?this.scrollLeft:this.scrollTop,h=s?Math.floor(o.width):o.height,u=s?this.container.scrollWidth:this.container.scrollHeight,c=this.writingMode&&this.writingMode.indexOf("vertical")===0?"vertical":"horizontal",v=this.settings.rtlScrollType,g=this.settings.direction==="rtl";this.settings.fullsize?(s&&g&&v==="negative"||!s&&g&&v==="default")&&(l=l*-1):(g&&v==="default"&&c==="horizontal"&&(l=u-h-l),g&&v==="negative"&&c==="horizontal"&&(l=l*-1));let I=()=>{let T=this.views.first(),N=T&&T.section.prev();N&&n.push(this.prepend(N))},w=()=>{let T=this.views.last(),N=T&&T.section.next();N&&n.push(this.append(N))},p=l+h+a,d=l-a;p>=u&&w(),d<0&&I();let _=n.map(T=>T.display(this.request));return n.length?Promise.all(_).then(()=>this.check()).then(()=>this.update(a),T=>T):(this.q.enqueue(function(){this.update()}.bind(this)),r.resolve(!1),r.promise)}trim(){for(var e=new je,t=this.views.displayed(),r=t[0],n=t[t.length-1],s=this.views.indexOf(r),a=this.views.indexOf(n),o=this.views.slice(0,s),l=this.views.slice(a+1),h=0;h<o.length-1;h++)this.erase(o[h],o);for(var u=1;u<l.length;u++)this.erase(l[u]);return e.resolve(),e.promise}erase(e,t){var r,n;this.settings.fullsize?(r=window.scrollY,n=window.scrollX):(r=this.container.scrollTop,n=this.container.scrollLeft);var s=e.bounds();this.views.remove(e),t&&(this.settings.axis==="vertical"?this.scrollTo(0,r-s.height,!0):this.settings.direction==="rtl"?this.settings.fullsize?this.scrollTo(n+Math.floor(s.width),0,!0):this.scrollTo(n,0,!0):this.scrollTo(n-Math.floor(s.width),0,!0))}addEventListeners(e){window.addEventListener("unload",function(t){this.ignore=!0,this.destroy()}.bind(this)),this.addScrollListeners(),this.isPaginated&&this.settings.snap&&(this.snapper=new sa(this,this.settings.snap&&typeof this.settings.snap=="object"&&this.settings.snap))}addScrollListeners(){var e;this.tick=xl;let t=this.settings.direction==="rtl"&&this.settings.rtlScrollType==="default"?-1:1;this.scrollDeltaVert=0,this.scrollDeltaHorz=0,this.settings.fullsize?(e=window,this.scrollTop=window.scrollY*t,this.scrollLeft=window.scrollX*t):(e=this.container,this.scrollTop=this.container.scrollTop,this.scrollLeft=this.container.scrollLeft),this._onScroll=this.onScroll.bind(this),e.addEventListener("scroll",this._onScroll),this._scrolled=rh(this.scrolled.bind(this),30),this.didScroll=!1}removeEventListeners(){var e;this.settings.fullsize?e=window:e=this.container,e.removeEventListener("scroll",this._onScroll),this._onScroll=void 0}onScroll(){let e,t,r=this.settings.direction==="rtl"&&this.settings.rtlScrollType==="default"?-1:1;this.settings.fullsize?(e=window.scrollY*r,t=window.scrollX*r):(e=this.container.scrollTop,t=this.container.scrollLeft),this.scrollTop=e,this.scrollLeft=t,this.ignore?this.ignore=!1:this._scrolled(),this.scrollDeltaVert+=Math.abs(e-this.prevScrollTop),this.scrollDeltaHorz+=Math.abs(t-this.prevScrollLeft),this.prevScrollTop=e,this.prevScrollLeft=t,clearTimeout(this.scrollTimeout),this.scrollTimeout=setTimeout(function(){this.scrollDeltaVert=0,this.scrollDeltaHorz=0}.bind(this),150),clearTimeout(this.afterScrolled),this.didScroll=!1}scrolled(){this.q.enqueue(function(){return this.check()}.bind(this)),this.emit(pe.MANAGERS.SCROLL,{top:this.scrollTop,left:this.scrollLeft}),clearTimeout(this.afterScrolled),this.afterScrolled=setTimeout(function(){this.snapper&&this.snapper.supportsTouch&&this.snapper.needsSnap()||this.emit(pe.MANAGERS.SCROLLED,{top:this.scrollTop,left:this.scrollLeft})}.bind(this),this.settings.afterScrolledTimeout)}next(){let e=this.layout.props.name==="pre-paginated"&&this.layout.props.spread?this.layout.props.delta*2:this.layout.props.delta;!this.views.length||(this.isPaginated&&this.settings.axis==="horizontal"?this.scrollBy(e,0,!0):this.scrollBy(0,this.layout.height,!0),this.q.enqueue(function(){return this.check()}.bind(this)))}prev(){let e=this.layout.props.name==="pre-paginated"&&this.layout.props.spread?this.layout.props.delta*2:this.layout.props.delta;!this.views.length||(this.isPaginated&&this.settings.axis==="horizontal"?this.scrollBy(-e,0,!0):this.scrollBy(0,-this.layout.height,!0),this.q.enqueue(function(){return this.check()}.bind(this)))}updateFlow(e){this.rendered&&this.snapper&&(this.snapper.destroy(),this.snapper=void 0),super.updateFlow(e,"scroll"),this.rendered&&this.isPaginated&&this.settings.snap&&(this.snapper=new sa(this,this.settings.snap&&typeof this.settings.snap=="object"&&this.settings.snap))}destroy(){super.destroy(),this.snapper&&this.snapper.destroy()}}class nh{constructor(e,t){this.settings=xt(this.settings||{},{width:null,height:null,ignoreClass:"",manager:"default",view:"iframe",flow:null,layout:null,spread:null,minSpreadWidth:800,stylesheet:null,resizeOnOrientationChange:!0,script:null,snap:!1,defaultDirection:"ltr",allowScriptedContent:!1,allowPopups:!1}),xt(this.settings,t),typeof this.settings.manager=="object"&&(this.manager=this.settings.manager),this.book=e,this.hooks={},this.hooks.display=new $t(this),this.hooks.serialize=new $t(this),this.hooks.content=new $t(this),this.hooks.unloaded=new $t(this),this.hooks.layout=new $t(this),this.hooks.render=new $t(this),this.hooks.show=new $t(this),this.hooks.content.register(this.handleLinks.bind(this)),this.hooks.content.register(this.passEvents.bind(this)),this.hooks.content.register(this.adjustImages.bind(this)),this.book.spine.hooks.content.register(this.injectIdentifier.bind(this)),this.settings.stylesheet&&this.book.spine.hooks.content.register(this.injectStylesheet.bind(this)),this.settings.script&&this.book.spine.hooks.content.register(this.injectScript.bind(this)),this.themes=new Id(this),this.annotations=new Rd(this),this.epubcfi=new He,this.q=new Js(this),this.location=void 0,this.q.enqueue(this.book.opened),this.starting=new je,this.started=this.starting.promise,this.q.enqueue(this.start)}setManager(e){this.manager=e}requireManager(e){var t;return typeof e=="string"&&e==="default"?t=Sn:typeof e=="string"&&e==="continuous"?t=Jp:t=e,t}requireView(e){var t;return typeof e=="string"&&e==="iframe"?t=Yl:t=e,t}start(){switch(!this.settings.layout&&(this.book.package.metadata.layout==="pre-paginated"||this.book.displayOptions.fixedLayout==="true")&&(this.settings.layout="pre-paginated"),this.book.package.metadata.spread){case"none":this.settings.spread="none";break;case"both":this.settings.spread=!0;break}this.manager||(this.ViewManager=this.requireManager(this.settings.manager),this.View=this.requireView(this.settings.view),this.manager=new this.ViewManager({view:this.View,queue:this.q,request:this.book.load.bind(this.book),settings:this.settings})),this.direction(this.book.package.metadata.direction||this.settings.defaultDirection),this.settings.globalLayoutProperties=this.determineLayoutProperties(this.book.package.metadata),this.flow(this.settings.globalLayoutProperties.flow),this.layout(this.settings.globalLayoutProperties),this.manager.on(pe.MANAGERS.ADDED,this.afterDisplayed.bind(this)),this.manager.on(pe.MANAGERS.REMOVED,this.afterRemoved.bind(this)),this.manager.on(pe.MANAGERS.RESIZED,this.onResized.bind(this)),this.manager.on(pe.MANAGERS.ORIENTATION_CHANGE,this.onOrientationChange.bind(this)),this.manager.on(pe.MANAGERS.SCROLLED,this.reportLocation.bind(this)),this.emit(pe.RENDITION.STARTED),this.starting.resolve()}attachTo(e){return this.q.enqueue(function(){this.manager.render(e,{width:this.settings.width,height:this.settings.height}),this.emit(pe.RENDITION.ATTACHED)}.bind(this))}display(e){return this.displaying&&this.displaying.resolve(),this.q.enqueue(this._display,e)}_display(e){if(!!this.book){this.epubcfi.isCfiString(e);var t=new je,r=t.promise,n;return this.displaying=t,this.book.locations.length()&&od(e)&&(e=this.book.locations.cfiFromPercentage(parseFloat(e))),n=this.book.spine.get(e),n?(this.manager.display(n,e).then(()=>{t.resolve(n),this.displaying=void 0,this.emit(pe.RENDITION.DISPLAYED,n),this.reportLocation()},s=>{this.emit(pe.RENDITION.DISPLAY_ERROR,s)}),r):(t.reject(new Error("No Section Found")),r)}}afterDisplayed(e){e.on(pe.VIEWS.MARK_CLICKED,(t,r)=>this.triggerMarkEvent(t,r,e.contents)),this.hooks.render.trigger(e,this).then(()=>{e.contents?this.hooks.content.trigger(e.contents,this).then(()=>{this.emit(pe.RENDITION.RENDERED,e.section,e)}):this.emit(pe.RENDITION.RENDERED,e.section,e)})}afterRemoved(e){this.hooks.unloaded.trigger(e,this).then(()=>{this.emit(pe.RENDITION.REMOVED,e.section,e)})}onResized(e,t){this.emit(pe.RENDITION.RESIZED,{width:e.width,height:e.height},t),this.location&&this.location.start&&this.display(t||this.location.start.cfi)}onOrientationChange(e){this.emit(pe.RENDITION.ORIENTATION_CHANGE,e)}moveTo(e){this.manager.moveTo(e)}resize(e,t,r){e&&(this.settings.width=e),t&&(this.settings.height=t),this.manager.resize(e,t,r)}clear(){this.manager.clear()}next(){return this.q.enqueue(this.manager.next.bind(this.manager)).then(this.reportLocation.bind(this))}prev(){return this.q.enqueue(this.manager.prev.bind(this.manager)).then(this.reportLocation.bind(this))}determineLayoutProperties(e){var t,r=this.settings.layout||e.layout||"reflowable",n=this.settings.spread||e.spread||"auto",s=this.settings.orientation||e.orientation||"auto",a=this.settings.flow||e.flow||"auto",o=e.viewport||"",l=this.settings.minSpreadWidth||e.minSpreadWidth||800,h=this.settings.direction||e.direction||"ltr";return(this.settings.width===0||this.settings.width>0)&&(this.settings.height===0||this.settings.height>0),t={layout:r,spread:n,orientation:s,flow:a,viewport:o,minSpreadWidth:l,direction:h},t}flow(e){var t=e;(e==="scrolled"||e==="scrolled-doc"||e==="scrolled-continuous")&&(t="scrolled"),(e==="auto"||e==="paginated")&&(t="paginated"),this.settings.flow=e,this._layout&&this._layout.flow(t),this.manager&&this._layout&&this.manager.applyLayout(this._layout),this.manager&&this.manager.updateFlow(t),this.manager&&this.manager.isRendered()&&this.location&&(this.manager.clear(),this.display(this.location.start.cfi))}layout(e){return e&&(this._layout=new Pl(e),this._layout.spread(e.spread,this.settings.minSpreadWidth),this._layout.on(pe.LAYOUT.UPDATED,(t,r)=>{this.emit(pe.RENDITION.LAYOUT,t,r)})),this.manager&&this._layout&&this.manager.applyLayout(this._layout),this._layout}spread(e,t){this.settings.spread=e,t&&(this.settings.minSpreadWidth=t),this._layout&&this._layout.spread(e,t),this.manager&&this.manager.isRendered()&&this.manager.updateLayout()}direction(e){this.settings.direction=e||"ltr",this.manager&&this.manager.direction(this.settings.direction),this.manager&&this.manager.isRendered()&&this.location&&(this.manager.clear(),this.display(this.location.start.cfi))}reportLocation(){return this.q.enqueue(function(){requestAnimationFrame(function(){var r=this.manager.currentLocation();if(r&&r.then&&typeof r.then=="function")r.then(function(n){let s=this.located(n);!s||!s.start||!s.end||(this.location=s,this.emit(pe.RENDITION.LOCATION_CHANGED,{index:this.location.start.index,href:this.location.start.href,start:this.location.start.cfi,end:this.location.end.cfi,percentage:this.location.start.percentage}),this.emit(pe.RENDITION.RELOCATED,this.location))}.bind(this));else if(r){let n=this.located(r);if(!n||!n.start||!n.end)return;this.location=n,this.emit(pe.RENDITION.LOCATION_CHANGED,{index:this.location.start.index,href:this.location.start.href,start:this.location.start.cfi,end:this.location.end.cfi,percentage:this.location.start.percentage}),this.emit(pe.RENDITION.RELOCATED,this.location)}}.bind(this))}.bind(this))}currentLocation(){var e=this.manager.currentLocation();if(e&&e.then&&typeof e.then=="function")e.then(function(t){return this.located(t)}.bind(this));else if(e)return this.located(e)}located(e){if(!e.length)return{};let t=e[0],r=e[e.length-1],n={start:{index:t.index,href:t.href,cfi:t.mapping.start,displayed:{page:t.pages[0]||1,total:t.totalPages}},end:{index:r.index,href:r.href,cfi:r.mapping.end,displayed:{page:r.pages[r.pages.length-1]||1,total:r.totalPages}}},s=this.book.locations.locationFromCfi(t.mapping.start),a=this.book.locations.locationFromCfi(r.mapping.end);s!=null&&(n.start.location=s,n.start.percentage=this.book.locations.percentageFromLocation(s)),a!=null&&(n.end.location=a,n.end.percentage=this.book.locations.percentageFromLocation(a));let o=this.book.pageList.pageFromCfi(t.mapping.start),l=this.book.pageList.pageFromCfi(r.mapping.end);return o!=-1&&(n.start.page=o),l!=-1&&(n.end.page=l),r.index===this.book.spine.last().index&&n.end.displayed.page>=n.end.displayed.total&&(n.atEnd=!0),t.index===this.book.spine.first().index&&n.start.displayed.page===1&&(n.atStart=!0),n}destroy(){this.manager&&this.manager.destroy(),this.book=void 0}passEvents(e){_n.forEach(t=>{e.on(t,r=>this.triggerViewEvent(r,e))}),e.on(pe.CONTENTS.SELECTED,t=>this.triggerSelectedEvent(t,e))}triggerViewEvent(e,t){this.emit(e.type,e,t)}triggerSelectedEvent(e,t){this.emit(pe.RENDITION.SELECTED,e,t)}triggerMarkEvent(e,t,r){this.emit(pe.RENDITION.MARK_CLICKED,e,t,r)}getRange(e,t){var r=new He(e),n=this.manager.visible().filter(function(s){if(r.spinePos===s.index)return!0});if(n.length)return n[0].contents.range(r,t)}adjustImages(e){if(this._layout.name==="pre-paginated")return new Promise(function(s){s()});let t=e.window.getComputedStyle(e.content,null),r=(e.content.offsetHeight-(parseFloat(t.paddingTop)+parseFloat(t.paddingBottom)))*.95,n=parseFloat(t.paddingLeft)+parseFloat(t.paddingRight);return e.addStylesheetRules({img:{"max-width":(this._layout.columnWidth?this._layout.columnWidth-n+"px":"100%")+"!important","max-height":r+"px!important","object-fit":"contain","page-break-inside":"avoid","break-inside":"avoid","box-sizing":"border-box"},svg:{"max-width":(this._layout.columnWidth?this._layout.columnWidth-n+"px":"100%")+"!important","max-height":r+"px!important","page-break-inside":"avoid","break-inside":"avoid"}}),new Promise(function(s,a){setTimeout(function(){s()},1)})}getContents(){return this.manager?this.manager.getContents():[]}views(){return(this.manager?this.manager.views:void 0)||[]}handleLinks(e){e&&e.on(pe.CONTENTS.LINK_CLICKED,t=>{let r=this.book.path.relative(t);this.display(r)})}injectStylesheet(e,t){let r=e.createElement("link");r.setAttribute("type","text/css"),r.setAttribute("rel","stylesheet"),r.setAttribute("href",this.settings.stylesheet),e.getElementsByTagName("head")[0].appendChild(r)}injectScript(e,t){let r=e.createElement("script");r.setAttribute("type","text/javascript"),r.setAttribute("src",this.settings.script),r.textContent=" ",e.getElementsByTagName("head")[0].appendChild(r)}injectIdentifier(e,t){let r=this.book.packaging.metadata.identifier,n=e.createElement("meta");n.setAttribute("name","dc.relation.ispartof"),r&&n.setAttribute("content",r),e.getElementsByTagName("head")[0].appendChild(n)}}Gt(nh.prototype);var sh={exports:{}};/*!

JSZip v3.9.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/master/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/master/LICENSE
*/(function(i,e){(function(t){i.exports=t()})(function(){return function t(r,n,s){function a(h,u){if(!n[h]){if(!r[h]){var c=typeof di=="function"&&di;if(!u&&c)return c(h,!0);if(o)return o(h,!0);var v=new Error("Cannot find module '"+h+"'");throw v.code="MODULE_NOT_FOUND",v}var g=n[h]={exports:{}};r[h][0].call(g.exports,function(I){var w=r[h][1][I];return a(w||I)},g,g.exports,t,r,n,s)}return n[h].exports}for(var o=typeof di=="function"&&di,l=0;l<s.length;l++)a(s[l]);return a}({1:[function(t,r,n){var s=t("./utils"),a=t("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.encode=function(l){for(var h=[],u,c,v,g,I,w,p,d=0,_=l.length,T=_,N=s.getTypeOf(l)!=="string";d<l.length;)T=_-d,N?(u=l[d++],c=d<_?l[d++]:0,v=d<_?l[d++]:0):(u=l.charCodeAt(d++),c=d<_?l.charCodeAt(d++):0,v=d<_?l.charCodeAt(d++):0),g=u>>2,I=(u&3)<<4|c>>4,w=T>1?(c&15)<<2|v>>6:64,p=T>2?v&63:64,h.push(o.charAt(g)+o.charAt(I)+o.charAt(w)+o.charAt(p));return h.join("")},n.decode=function(l){var h,u,c,v,g,I,w,p=0,d=0,_="data:";if(l.substr(0,_.length)===_)throw new Error("Invalid base64 input, it looks like a data url.");l=l.replace(/[^A-Za-z0-9\+\/\=]/g,"");var T=l.length*3/4;if(l.charAt(l.length-1)===o.charAt(64)&&T--,l.charAt(l.length-2)===o.charAt(64)&&T--,T%1!=0)throw new Error("Invalid base64 input, bad content length.");var N;for(a.uint8array?N=new Uint8Array(T|0):N=new Array(T|0);p<l.length;)v=o.indexOf(l.charAt(p++)),g=o.indexOf(l.charAt(p++)),I=o.indexOf(l.charAt(p++)),w=o.indexOf(l.charAt(p++)),h=v<<2|g>>4,u=(g&15)<<4|I>>2,c=(I&3)<<6|w,N[d++]=h,I!==64&&(N[d++]=u),w!==64&&(N[d++]=c);return N}},{"./support":30,"./utils":32}],2:[function(t,r,n){var s=t("./external"),a=t("./stream/DataWorker"),o=t("./stream/Crc32Probe"),l=t("./stream/DataLengthProbe");function h(u,c,v,g,I){this.compressedSize=u,this.uncompressedSize=c,this.crc32=v,this.compression=g,this.compressedContent=I}h.prototype={getContentWorker:function(){var u=new a(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),c=this;return u.on("end",function(){if(this.streamInfo.data_length!==c.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),u},getCompressedWorker:function(){return new a(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},h.createWorkerFrom=function(u,c,v){return u.pipe(new o).pipe(new l("uncompressedSize")).pipe(c.compressWorker(v)).pipe(new l("compressedSize")).withStreamInfo("compression",c)},r.exports=h},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,r,n){var s=t("./stream/GenericWorker");n.STORE={magic:"\0\0",compressWorker:function(a){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},n.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,r,n){var s=t("./utils");function a(){for(var u,c=[],v=0;v<256;v++){u=v;for(var g=0;g<8;g++)u=u&1?3988292384^u>>>1:u>>>1;c[v]=u}return c}var o=a();function l(u,c,v,g){var I=o,w=g+v;u=u^-1;for(var p=g;p<w;p++)u=u>>>8^I[(u^c[p])&255];return u^-1}function h(u,c,v,g){var I=o,w=g+v;u=u^-1;for(var p=g;p<w;p++)u=u>>>8^I[(u^c.charCodeAt(p))&255];return u^-1}r.exports=function(c,v){if(typeof c=="undefined"||!c.length)return 0;var g=s.getTypeOf(c)!=="string";return g?l(v|0,c,c.length,0):h(v|0,c,c.length,0)}},{"./utils":32}],5:[function(t,r,n){n.base64=!1,n.binary=!1,n.dir=!1,n.createFolders=!0,n.date=null,n.compression=null,n.compressionOptions=null,n.comment=null,n.unixPermissions=null,n.dosPermissions=null},{}],6:[function(t,r,n){var s=null;typeof Promise!="undefined"?s=Promise:s=t("lie"),r.exports={Promise:s}},{lie:37}],7:[function(t,r,n){var s=typeof Uint8Array!="undefined"&&typeof Uint16Array!="undefined"&&typeof Uint32Array!="undefined",a=t("pako"),o=t("./utils"),l=t("./stream/GenericWorker"),h=s?"uint8array":"array";n.magic="\b\0";function u(c,v){l.call(this,"FlateWorker/"+c),this._pako=null,this._pakoAction=c,this._pakoOptions=v,this.meta={}}o.inherits(u,l),u.prototype.processChunk=function(c){this.meta=c.meta,this._pako===null&&this._createPako(),this._pako.push(o.transformTo(h,c.data),!1)},u.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},u.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},u.prototype._createPako=function(){this._pako=new a[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var c=this;this._pako.onData=function(v){c.push({data:v,meta:c.meta})}},n.compressWorker=function(c){return new u("Deflate",c)},n.uncompressWorker=function(){return new u("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,r,n){var s=t("../utils"),a=t("../stream/GenericWorker"),o=t("../utf8"),l=t("../crc32"),h=t("../signature"),u=function(d,_){var T="",N;for(N=0;N<_;N++)T+=String.fromCharCode(d&255),d=d>>>8;return T},c=function(d,_){var T=d;return d||(T=_?16893:33204),(T&65535)<<16},v=function(d,_){return(d||0)&63},g=function(d,_,T,N,y,S){var k=d.file,z=d.compression,$=S!==o.utf8encode,U=s.transformTo("string",S(k.name)),J=s.transformTo("string",o.utf8encode(k.name)),Y=k.comment,ce=s.transformTo("string",S(Y)),Se=s.transformTo("string",o.utf8encode(Y)),Ee=J.length!==k.name.length,ve=Se.length!==Y.length,he,ae,Ae="",Ye="",Me="",be=k.dir,Re=k.date,Be={crc32:0,compressedSize:0,uncompressedSize:0};(!_||T)&&(Be.crc32=d.crc32,Be.compressedSize=d.compressedSize,Be.uncompressedSize=d.uncompressedSize);var ht=0;_&&(ht|=8),!$&&(Ee||ve)&&(ht|=2048);var tt=0,$e=0;be&&(tt|=16),y==="UNIX"?($e=798,tt|=c(k.unixPermissions,be)):($e=20,tt|=v(k.dosPermissions)),he=Re.getUTCHours(),he=he<<6,he=he|Re.getUTCMinutes(),he=he<<5,he=he|Re.getUTCSeconds()/2,ae=Re.getUTCFullYear()-1980,ae=ae<<4,ae=ae|Re.getUTCMonth()+1,ae=ae<<5,ae=ae|Re.getUTCDate(),Ee&&(Ye=u(1,1)+u(l(U),4)+J,Ae+="up"+u(Ye.length,2)+Ye),ve&&(Me=u(1,1)+u(l(ce),4)+Se,Ae+="uc"+u(Me.length,2)+Me);var Ie="";Ie+=`
\0`,Ie+=u(ht,2),Ie+=z.magic,Ie+=u(he,2),Ie+=u(ae,2),Ie+=u(Be.crc32,4),Ie+=u(Be.compressedSize,4),Ie+=u(Be.uncompressedSize,4),Ie+=u(U.length,2),Ie+=u(Ae.length,2);var it=h.LOCAL_FILE_HEADER+Ie+U+Ae,qe=h.CENTRAL_FILE_HEADER+u($e,2)+Ie+u(ce.length,2)+"\0\0\0\0"+u(tt,4)+u(N,4)+U+Ae+ce;return{fileRecord:it,dirRecord:qe}},I=function(d,_,T,N,y){var S="",k=s.transformTo("string",y(N));return S=h.CENTRAL_DIRECTORY_END+"\0\0\0\0"+u(d,2)+u(d,2)+u(_,4)+u(T,4)+u(k.length,2)+k,S},w=function(d){var _="";return _=h.DATA_DESCRIPTOR+u(d.crc32,4)+u(d.compressedSize,4)+u(d.uncompressedSize,4),_};function p(d,_,T,N){a.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=_,this.zipPlatform=T,this.encodeFileName=N,this.streamFiles=d,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}s.inherits(p,a),p.prototype.push=function(d){var _=d.meta.percent||0,T=this.entriesCount,N=this._sources.length;this.accumulate?this.contentBuffer.push(d):(this.bytesWritten+=d.data.length,a.prototype.push.call(this,{data:d.data,meta:{currentFile:this.currentFile,percent:T?(_+100*(T-N-1))/T:100}}))},p.prototype.openedSource=function(d){this.currentSourceOffset=this.bytesWritten,this.currentFile=d.file.name;var _=this.streamFiles&&!d.file.dir;if(_){var T=g(d,_,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:T.fileRecord,meta:{percent:0}})}else this.accumulate=!0},p.prototype.closedSource=function(d){this.accumulate=!1;var _=this.streamFiles&&!d.file.dir,T=g(d,_,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(T.dirRecord),_)this.push({data:w(d),meta:{percent:100}});else for(this.push({data:T.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},p.prototype.flush=function(){for(var d=this.bytesWritten,_=0;_<this.dirRecords.length;_++)this.push({data:this.dirRecords[_],meta:{percent:100}});var T=this.bytesWritten-d,N=I(this.dirRecords.length,T,d,this.zipComment,this.encodeFileName);this.push({data:N,meta:{percent:100}})},p.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},p.prototype.registerPrevious=function(d){this._sources.push(d);var _=this;return d.on("data",function(T){_.processChunk(T)}),d.on("end",function(){_.closedSource(_.previous.streamInfo),_._sources.length?_.prepareNextSource():_.end()}),d.on("error",function(T){_.error(T)}),this},p.prototype.resume=function(){if(!a.prototype.resume.call(this))return!1;if(!this.previous&&this._sources.length)return this.prepareNextSource(),!0;if(!this.previous&&!this._sources.length&&!this.generatedError)return this.end(),!0},p.prototype.error=function(d){var _=this._sources;if(!a.prototype.error.call(this,d))return!1;for(var T=0;T<_.length;T++)try{_[T].error(d)}catch{}return!0},p.prototype.lock=function(){a.prototype.lock.call(this);for(var d=this._sources,_=0;_<d.length;_++)d[_].lock()},r.exports=p},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,r,n){var s=t("../compressions"),a=t("./ZipFileWorker"),o=function(l,h){var u=l||h,c=s[u];if(!c)throw new Error(u+" is not a valid compression method !");return c};n.generateWorker=function(l,h,u){var c=new a(h.streamFiles,u,h.platform,h.encodeFileName),v=0;try{l.forEach(function(g,I){v++;var w=o(I.options.compression,h.compression),p=I.options.compressionOptions||h.compressionOptions||{},d=I.dir,_=I.date;I._compressWorker(w,p).withStreamInfo("file",{name:g,dir:d,date:_,comment:I.comment||"",unixPermissions:I.unixPermissions,dosPermissions:I.dosPermissions}).pipe(c)}),c.entriesCount=v}catch(g){c.error(g)}return c}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,r,n){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var a=new s;for(var o in this)typeof this[o]!="function"&&(a[o]=this[o]);return a}}s.prototype=t("./object"),s.prototype.loadAsync=t("./load"),s.support=t("./support"),s.defaults=t("./defaults"),s.version="3.9.1",s.loadAsync=function(a,o){return new s().loadAsync(a,o)},s.external=t("./external"),r.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,r,n){var s=t("./utils"),a=t("./external"),o=t("./utf8"),l=t("./zipEntries"),h=t("./stream/Crc32Probe"),u=t("./nodejsUtils");function c(v){return new a.Promise(function(g,I){var w=v.decompressed.getContentWorker().pipe(new h);w.on("error",function(p){I(p)}).on("end",function(){w.streamInfo.crc32!==v.decompressed.crc32?I(new Error("Corrupted zip : CRC32 mismatch")):g()}).resume()})}r.exports=function(v,g){var I=this;return g=s.extend(g||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),u.isNode&&u.isStream(v)?a.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",v,!0,g.optimizedBinaryString,g.base64).then(function(w){var p=new l(g);return p.load(w),p}).then(function(p){var d=[a.Promise.resolve(p)],_=p.files;if(g.checkCRC32)for(var T=0;T<_.length;T++)d.push(c(_[T]));return a.Promise.all(d)}).then(function(p){for(var d=p.shift(),_=d.files,T=0;T<_.length;T++){var N=_[T],y=N.fileNameStr,S=s.resolve(N.fileNameStr);I.file(S,N.decompressed,{binary:!0,optimizedBinaryString:!0,date:N.date,dir:N.dir,comment:N.fileCommentStr.length?N.fileCommentStr:null,unixPermissions:N.unixPermissions,dosPermissions:N.dosPermissions,createFolders:g.createFolders}),N.dir||(I.file(S).unsafeOriginalName=y)}return d.zipComment.length&&(I.comment=d.zipComment),I})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,r,n){var s=t("../utils"),a=t("../stream/GenericWorker");function o(l,h){a.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(h)}s.inherits(o,a),o.prototype._bindStream=function(l){var h=this;this._stream=l,l.pause(),l.on("data",function(u){h.push({data:u,meta:{percent:0}})}).on("error",function(u){h.isPaused?this.generatedError=u:h.error(u)}).on("end",function(){h.isPaused?h._upstreamEnded=!0:h.end()})},o.prototype.pause=function(){return a.prototype.pause.call(this)?(this._stream.pause(),!0):!1},o.prototype.resume=function(){return a.prototype.resume.call(this)?(this._upstreamEnded?this.end():this._stream.resume(),!0):!1},r.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,r,n){var s=t("readable-stream").Readable,a=t("../utils");a.inherits(o,s);function o(l,h,u){s.call(this,h),this._helper=l;var c=this;l.on("data",function(v,g){c.push(v)||c._helper.pause(),u&&u(g)}).on("error",function(v){c.emit("error",v)}).on("end",function(){c.push(null)})}o.prototype._read=function(){this._helper.resume()},r.exports=o},{"../utils":32,"readable-stream":16}],14:[function(t,r,n){r.exports={isNode:typeof Buffer!="undefined",newBufferFrom:function(s,a){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(s,a);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new Buffer(s,a)},allocBuffer:function(s){if(Buffer.alloc)return Buffer.alloc(s);var a=new Buffer(s);return a.fill(0),a},isBuffer:function(s){return Buffer.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(t,r,n){var s=t("./utf8"),a=t("./utils"),o=t("./stream/GenericWorker"),l=t("./stream/StreamHelper"),h=t("./defaults"),u=t("./compressedObject"),c=t("./zipObject"),v=t("./generate"),g=t("./nodejsUtils"),I=t("./nodejs/NodejsStreamInputAdapter"),w=function(y,S,k){var z=a.getTypeOf(S),$,U=a.extend(k||{},h);U.date=U.date||new Date,U.compression!==null&&(U.compression=U.compression.toUpperCase()),typeof U.unixPermissions=="string"&&(U.unixPermissions=parseInt(U.unixPermissions,8)),U.unixPermissions&&U.unixPermissions&16384&&(U.dir=!0),U.dosPermissions&&U.dosPermissions&16&&(U.dir=!0),U.dir&&(y=d(y)),U.createFolders&&($=p(y))&&_.call(this,$,!0);var J=z==="string"&&U.binary===!1&&U.base64===!1;(!k||typeof k.binary=="undefined")&&(U.binary=!J);var Y=S instanceof u&&S.uncompressedSize===0;(Y||U.dir||!S||S.length===0)&&(U.base64=!1,U.binary=!0,S="",U.compression="STORE",z="string");var ce=null;S instanceof u||S instanceof o?ce=S:g.isNode&&g.isStream(S)?ce=new I(y,S):ce=a.prepareContent(y,S,U.binary,U.optimizedBinaryString,U.base64);var Se=new c(y,ce,U);this.files[y]=Se},p=function(y){y.slice(-1)==="/"&&(y=y.substring(0,y.length-1));var S=y.lastIndexOf("/");return S>0?y.substring(0,S):""},d=function(y){return y.slice(-1)!=="/"&&(y+="/"),y},_=function(y,S){return S=typeof S!="undefined"?S:h.createFolders,y=d(y),this.files[y]||w.call(this,y,null,{dir:!0,createFolders:S}),this.files[y]};function T(y){return Object.prototype.toString.call(y)==="[object RegExp]"}var N={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(y){var S,k,z;for(S in this.files)z=this.files[S],k=S.slice(this.root.length,S.length),k&&S.slice(0,this.root.length)===this.root&&y(k,z)},filter:function(y){var S=[];return this.forEach(function(k,z){y(k,z)&&S.push(z)}),S},file:function(y,S,k){if(arguments.length===1)if(T(y)){var z=y;return this.filter(function(U,J){return!J.dir&&z.test(U)})}else{var $=this.files[this.root+y];return $&&!$.dir?$:null}else y=this.root+y,w.call(this,y,S,k);return this},folder:function(y){if(!y)return this;if(T(y))return this.filter(function($,U){return U.dir&&y.test($)});var S=this.root+y,k=_.call(this,S),z=this.clone();return z.root=k.name,z},remove:function(y){y=this.root+y;var S=this.files[y];if(S||(y.slice(-1)!=="/"&&(y+="/"),S=this.files[y]),S&&!S.dir)delete this.files[y];else for(var k=this.filter(function($,U){return U.name.slice(0,y.length)===y}),z=0;z<k.length;z++)delete this.files[k[z].name];return this},generate:function(y){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(y){var S,k={};try{if(k=a.extend(y||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:s.utf8encode}),k.type=k.type.toLowerCase(),k.compression=k.compression.toUpperCase(),k.type==="binarystring"&&(k.type="string"),!k.type)throw new Error("No output type specified.");a.checkSupport(k.type),(k.platform==="darwin"||k.platform==="freebsd"||k.platform==="linux"||k.platform==="sunos")&&(k.platform="UNIX"),k.platform==="win32"&&(k.platform="DOS");var z=k.comment||this.comment||"";S=v.generateWorker(this,k,z)}catch($){S=new o("error"),S.error($)}return new l(S,k.type||"string",k.mimeType)},generateAsync:function(y,S){return this.generateInternalStream(y).accumulate(S)},generateNodeStream:function(y,S){return y=y||{},y.type||(y.type="nodebuffer"),this.generateInternalStream(y).toNodejsStream(S)}};r.exports=N},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,r,n){r.exports=t("stream")},{stream:void 0}],17:[function(t,r,n){var s=t("./DataReader"),a=t("../utils");function o(l){s.call(this,l);for(var h=0;h<this.data.length;h++)l[h]=l[h]&255}a.inherits(o,s),o.prototype.byteAt=function(l){return this.data[this.zero+l]},o.prototype.lastIndexOfSignature=function(l){for(var h=l.charCodeAt(0),u=l.charCodeAt(1),c=l.charCodeAt(2),v=l.charCodeAt(3),g=this.length-4;g>=0;--g)if(this.data[g]===h&&this.data[g+1]===u&&this.data[g+2]===c&&this.data[g+3]===v)return g-this.zero;return-1},o.prototype.readAndCheckSignature=function(l){var h=l.charCodeAt(0),u=l.charCodeAt(1),c=l.charCodeAt(2),v=l.charCodeAt(3),g=this.readData(4);return h===g[0]&&u===g[1]&&c===g[2]&&v===g[3]},o.prototype.readData=function(l){if(this.checkOffset(l),l===0)return[];var h=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,h},r.exports=o},{"../utils":32,"./DataReader":18}],18:[function(t,r,n){var s=t("../utils");function a(o){this.data=o,this.length=o.length,this.index=0,this.zero=0}a.prototype={checkOffset:function(o){this.checkIndex(this.index+o)},checkIndex:function(o){if(this.length<this.zero+o||o<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+o+"). Corrupted zip ?")},setIndex:function(o){this.checkIndex(o),this.index=o},skip:function(o){this.setIndex(this.index+o)},byteAt:function(o){},readInt:function(o){var l=0,h;for(this.checkOffset(o),h=this.index+o-1;h>=this.index;h--)l=(l<<8)+this.byteAt(h);return this.index+=o,l},readString:function(o){return s.transformTo("string",this.readData(o))},readData:function(o){},lastIndexOfSignature:function(o){},readAndCheckSignature:function(o){},readDate:function(){var o=this.readInt(4);return new Date(Date.UTC((o>>25&127)+1980,(o>>21&15)-1,o>>16&31,o>>11&31,o>>5&63,(o&31)<<1))}},r.exports=a},{"../utils":32}],19:[function(t,r,n){var s=t("./Uint8ArrayReader"),a=t("../utils");function o(l){s.call(this,l)}a.inherits(o,s),o.prototype.readData=function(l){this.checkOffset(l);var h=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,h},r.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,r,n){var s=t("./DataReader"),a=t("../utils");function o(l){s.call(this,l)}a.inherits(o,s),o.prototype.byteAt=function(l){return this.data.charCodeAt(this.zero+l)},o.prototype.lastIndexOfSignature=function(l){return this.data.lastIndexOf(l)-this.zero},o.prototype.readAndCheckSignature=function(l){var h=this.readData(4);return l===h},o.prototype.readData=function(l){this.checkOffset(l);var h=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,h},r.exports=o},{"../utils":32,"./DataReader":18}],21:[function(t,r,n){var s=t("./ArrayReader"),a=t("../utils");function o(l){s.call(this,l)}a.inherits(o,s),o.prototype.readData=function(l){if(this.checkOffset(l),l===0)return new Uint8Array(0);var h=this.data.subarray(this.zero+this.index,this.zero+this.index+l);return this.index+=l,h},r.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(t,r,n){var s=t("../utils"),a=t("../support"),o=t("./ArrayReader"),l=t("./StringReader"),h=t("./NodeBufferReader"),u=t("./Uint8ArrayReader");r.exports=function(c){var v=s.getTypeOf(c);return s.checkSupport(v),v==="string"&&!a.uint8array?new l(c):v==="nodebuffer"?new h(c):a.uint8array?new u(s.transformTo("uint8array",c)):new o(s.transformTo("array",c))}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,r,n){n.LOCAL_FILE_HEADER="PK",n.CENTRAL_FILE_HEADER="PK",n.CENTRAL_DIRECTORY_END="PK",n.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",n.ZIP64_CENTRAL_DIRECTORY_END="PK",n.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,r,n){var s=t("./GenericWorker"),a=t("../utils");function o(l){s.call(this,"ConvertWorker to "+l),this.destType=l}a.inherits(o,s),o.prototype.processChunk=function(l){this.push({data:a.transformTo(this.destType,l.data),meta:l.meta})},r.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(t,r,n){var s=t("./GenericWorker"),a=t("../crc32"),o=t("../utils");function l(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}o.inherits(l,s),l.prototype.processChunk=function(h){this.streamInfo.crc32=a(h.data,this.streamInfo.crc32||0),this.push(h)},r.exports=l},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,r,n){var s=t("../utils"),a=t("./GenericWorker");function o(l){a.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}s.inherits(o,a),o.prototype.processChunk=function(l){if(l){var h=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=h+l.data.length}a.prototype.processChunk.call(this,l)},r.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(t,r,n){var s=t("../utils"),a=t("./GenericWorker"),o=16*1024;function l(h){a.call(this,"DataWorker");var u=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,h.then(function(c){u.dataIsReady=!0,u.data=c,u.max=c&&c.length||0,u.type=s.getTypeOf(c),u.isPaused||u._tickAndRepeat()},function(c){u.error(c)})}s.inherits(l,a),l.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this.data=null},l.prototype.resume=function(){return a.prototype.resume.call(this)?(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0):!1},l.prototype._tickAndRepeat=function(){this._tickScheduled=!1,!(this.isPaused||this.isFinished)&&(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},l.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var h=o,u=null,c=Math.min(this.max,this.index+h);if(this.index>=this.max)return this.end();switch(this.type){case"string":u=this.data.substring(this.index,c);break;case"uint8array":u=this.data.subarray(this.index,c);break;case"array":case"nodebuffer":u=this.data.slice(this.index,c);break}return this.index=c,this.push({data:u,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=l},{"../utils":32,"./GenericWorker":28}],28:[function(t,r,n){function s(a){this.name=a||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(a){this.emit("data",a)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(a){this.emit("error",a)}return!0},error:function(a){return this.isFinished?!1:(this.isPaused?this.generatedError=a:(this.isFinished=!0,this.emit("error",a),this.previous&&this.previous.error(a),this.cleanUp()),!0)},on:function(a,o){return this._listeners[a].push(o),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(a,o){if(this._listeners[a])for(var l=0;l<this._listeners[a].length;l++)this._listeners[a][l].call(this,o)},pipe:function(a){return a.registerPrevious(this)},registerPrevious:function(a){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=a.streamInfo,this.mergeStreamInfo(),this.previous=a;var o=this;return a.on("data",function(l){o.processChunk(l)}),a.on("end",function(){o.end()}),a.on("error",function(l){o.error(l)}),this},pause:function(){return this.isPaused||this.isFinished?!1:(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;this.isPaused=!1;var a=!1;return this.generatedError&&(this.error(this.generatedError),a=!0),this.previous&&this.previous.resume(),!a},flush:function(){},processChunk:function(a){this.push(a)},withStreamInfo:function(a,o){return this.extraStreamInfo[a]=o,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var a in this.extraStreamInfo)!this.extraStreamInfo.hasOwnProperty(a)||(this.streamInfo[a]=this.extraStreamInfo[a])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var a="Worker "+this.name;return this.previous?this.previous+" -> "+a:a}},r.exports=s},{}],29:[function(t,r,n){var s=t("../utils"),a=t("./ConvertWorker"),o=t("./GenericWorker"),l=t("../base64"),h=t("../support"),u=t("../external"),c=null;if(h.nodestream)try{c=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function v(p,d,_){switch(p){case"blob":return s.newBlob(s.transformTo("arraybuffer",d),_);case"base64":return l.encode(d);default:return s.transformTo(p,d)}}function g(p,d){var _,T=0,N=null,y=0;for(_=0;_<d.length;_++)y+=d[_].length;switch(p){case"string":return d.join("");case"array":return Array.prototype.concat.apply([],d);case"uint8array":for(N=new Uint8Array(y),_=0;_<d.length;_++)N.set(d[_],T),T+=d[_].length;return N;case"nodebuffer":return Buffer.concat(d);default:throw new Error("concat : unsupported type '"+p+"'")}}function I(p,d){return new u.Promise(function(_,T){var N=[],y=p._internalType,S=p._outputType,k=p._mimeType;p.on("data",function(z,$){N.push(z),d&&d($)}).on("error",function(z){N=[],T(z)}).on("end",function(){try{var z=v(S,g(y,N),k);_(z)}catch($){T($)}N=[]}).resume()})}function w(p,d,_){var T=d;switch(d){case"blob":case"arraybuffer":T="uint8array";break;case"base64":T="string";break}try{this._internalType=T,this._outputType=d,this._mimeType=_,s.checkSupport(T),this._worker=p.pipe(new a(T)),p.lock()}catch(N){this._worker=new o("error"),this._worker.error(N)}}w.prototype={accumulate:function(p){return I(this,p)},on:function(p,d){var _=this;return p==="data"?this._worker.on(p,function(T){d.call(_,T.data,T.meta)}):this._worker.on(p,function(){s.delay(d,arguments,_)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(p){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new c(this,{objectMode:this._outputType!=="nodebuffer"},p)}},r.exports=w},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,r,n){if(n.base64=!0,n.array=!0,n.string=!0,n.arraybuffer=typeof ArrayBuffer!="undefined"&&typeof Uint8Array!="undefined",n.nodebuffer=typeof Buffer!="undefined",n.uint8array=typeof Uint8Array!="undefined",typeof ArrayBuffer=="undefined")n.blob=!1;else{var s=new ArrayBuffer(0);try{n.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var a=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder,o=new a;o.append(s),n.blob=o.getBlob("application/zip").size===0}catch{n.blob=!1}}}try{n.nodestream=!!t("readable-stream").Readable}catch{n.nodestream=!1}},{"readable-stream":16}],31:[function(t,r,n){for(var s=t("./utils"),a=t("./support"),o=t("./nodejsUtils"),l=t("./stream/GenericWorker"),h=new Array(256),u=0;u<256;u++)h[u]=u>=252?6:u>=248?5:u>=240?4:u>=224?3:u>=192?2:1;h[254]=h[254]=1;var c=function(p){var d,_,T,N,y,S=p.length,k=0;for(N=0;N<S;N++)_=p.charCodeAt(N),(_&64512)==55296&&N+1<S&&(T=p.charCodeAt(N+1),(T&64512)==56320&&(_=65536+(_-55296<<10)+(T-56320),N++)),k+=_<128?1:_<2048?2:_<65536?3:4;for(a.uint8array?d=new Uint8Array(k):d=new Array(k),y=0,N=0;y<k;N++)_=p.charCodeAt(N),(_&64512)==55296&&N+1<S&&(T=p.charCodeAt(N+1),(T&64512)==56320&&(_=65536+(_-55296<<10)+(T-56320),N++)),_<128?d[y++]=_:_<2048?(d[y++]=192|_>>>6,d[y++]=128|_&63):_<65536?(d[y++]=224|_>>>12,d[y++]=128|_>>>6&63,d[y++]=128|_&63):(d[y++]=240|_>>>18,d[y++]=128|_>>>12&63,d[y++]=128|_>>>6&63,d[y++]=128|_&63);return d},v=function(p,d){var _;for(d=d||p.length,d>p.length&&(d=p.length),_=d-1;_>=0&&(p[_]&192)==128;)_--;return _<0||_===0?d:_+h[p[_]]>d?_:d},g=function(p){var d,_,T,N,y=p.length,S=new Array(y*2);for(_=0,d=0;d<y;){if(T=p[d++],T<128){S[_++]=T;continue}if(N=h[T],N>4){S[_++]=65533,d+=N-1;continue}for(T&=N===2?31:N===3?15:7;N>1&&d<y;)T=T<<6|p[d++]&63,N--;if(N>1){S[_++]=65533;continue}T<65536?S[_++]=T:(T-=65536,S[_++]=55296|T>>10&1023,S[_++]=56320|T&1023)}return S.length!==_&&(S.subarray?S=S.subarray(0,_):S.length=_),s.applyFromCharCode(S)};n.utf8encode=function(d){return a.nodebuffer?o.newBufferFrom(d,"utf-8"):c(d)},n.utf8decode=function(d){return a.nodebuffer?s.transformTo("nodebuffer",d).toString("utf-8"):(d=s.transformTo(a.uint8array?"uint8array":"array",d),g(d))};function I(){l.call(this,"utf-8 decode"),this.leftOver=null}s.inherits(I,l),I.prototype.processChunk=function(p){var d=s.transformTo(a.uint8array?"uint8array":"array",p.data);if(this.leftOver&&this.leftOver.length){if(a.uint8array){var _=d;d=new Uint8Array(_.length+this.leftOver.length),d.set(this.leftOver,0),d.set(_,this.leftOver.length)}else d=this.leftOver.concat(d);this.leftOver=null}var T=v(d),N=d;T!==d.length&&(a.uint8array?(N=d.subarray(0,T),this.leftOver=d.subarray(T,d.length)):(N=d.slice(0,T),this.leftOver=d.slice(T,d.length))),this.push({data:n.utf8decode(N),meta:p.meta})},I.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:n.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},n.Utf8DecodeWorker=I;function w(){l.call(this,"utf-8 encode")}s.inherits(w,l),w.prototype.processChunk=function(p){this.push({data:n.utf8encode(p.data),meta:p.meta})},n.Utf8EncodeWorker=w},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,r,n){var s=t("./support"),a=t("./base64"),o=t("./nodejsUtils"),l=t("set-immediate-shim"),h=t("./external");function u(d){var _=null;return s.uint8array?_=new Uint8Array(d.length):_=new Array(d.length),v(d,_)}n.newBlob=function(d,_){n.checkSupport("blob");try{return new Blob([d],{type:_})}catch{try{var T=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder,N=new T;return N.append(d),N.getBlob(_)}catch{throw new Error("Bug : can't construct the Blob.")}}};function c(d){return d}function v(d,_){for(var T=0;T<d.length;++T)_[T]=d.charCodeAt(T)&255;return _}var g={stringifyByChunk:function(d,_,T){var N=[],y=0,S=d.length;if(S<=T)return String.fromCharCode.apply(null,d);for(;y<S;)_==="array"||_==="nodebuffer"?N.push(String.fromCharCode.apply(null,d.slice(y,Math.min(y+T,S)))):N.push(String.fromCharCode.apply(null,d.subarray(y,Math.min(y+T,S)))),y+=T;return N.join("")},stringifyByChar:function(d){for(var _="",T=0;T<d.length;T++)_+=String.fromCharCode(d[T]);return _},applyCanBeUsed:{uint8array:function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,o.allocBuffer(1)).length===1}catch{return!1}}()}};function I(d){var _=65536,T=n.getTypeOf(d),N=!0;if(T==="uint8array"?N=g.applyCanBeUsed.uint8array:T==="nodebuffer"&&(N=g.applyCanBeUsed.nodebuffer),N)for(;_>1;)try{return g.stringifyByChunk(d,T,_)}catch{_=Math.floor(_/2)}return g.stringifyByChar(d)}n.applyFromCharCode=I;function w(d,_){for(var T=0;T<d.length;T++)_[T]=d[T];return _}var p={};p.string={string:c,array:function(d){return v(d,new Array(d.length))},arraybuffer:function(d){return p.string.uint8array(d).buffer},uint8array:function(d){return v(d,new Uint8Array(d.length))},nodebuffer:function(d){return v(d,o.allocBuffer(d.length))}},p.array={string:I,array:c,arraybuffer:function(d){return new Uint8Array(d).buffer},uint8array:function(d){return new Uint8Array(d)},nodebuffer:function(d){return o.newBufferFrom(d)}},p.arraybuffer={string:function(d){return I(new Uint8Array(d))},array:function(d){return w(new Uint8Array(d),new Array(d.byteLength))},arraybuffer:c,uint8array:function(d){return new Uint8Array(d)},nodebuffer:function(d){return o.newBufferFrom(new Uint8Array(d))}},p.uint8array={string:I,array:function(d){return w(d,new Array(d.length))},arraybuffer:function(d){return d.buffer},uint8array:c,nodebuffer:function(d){return o.newBufferFrom(d)}},p.nodebuffer={string:I,array:function(d){return w(d,new Array(d.length))},arraybuffer:function(d){return p.nodebuffer.uint8array(d).buffer},uint8array:function(d){return w(d,new Uint8Array(d.length))},nodebuffer:c},n.transformTo=function(d,_){if(_||(_=""),!d)return _;n.checkSupport(d);var T=n.getTypeOf(_),N=p[T][d](_);return N},n.resolve=function(d){for(var _=d.split("/"),T=[],N=0;N<_.length;N++){var y=_[N];y==="."||y===""&&N!==0&&N!==_.length-1||(y===".."?T.pop():T.push(y))}return T.join("/")},n.getTypeOf=function(d){if(typeof d=="string")return"string";if(Object.prototype.toString.call(d)==="[object Array]")return"array";if(s.nodebuffer&&o.isBuffer(d))return"nodebuffer";if(s.uint8array&&d instanceof Uint8Array)return"uint8array";if(s.arraybuffer&&d instanceof ArrayBuffer)return"arraybuffer"},n.checkSupport=function(d){var _=s[d.toLowerCase()];if(!_)throw new Error(d+" is not supported by this platform")},n.MAX_VALUE_16BITS=65535,n.MAX_VALUE_32BITS=-1,n.pretty=function(d){var _="",T,N;for(N=0;N<(d||"").length;N++)T=d.charCodeAt(N),_+="\\x"+(T<16?"0":"")+T.toString(16).toUpperCase();return _},n.delay=function(d,_,T){l(function(){d.apply(T||null,_||[])})},n.inherits=function(d,_){var T=function(){};T.prototype=_.prototype,d.prototype=new T},n.extend=function(){var d={},_,T;for(_=0;_<arguments.length;_++)for(T in arguments[_])arguments[_].hasOwnProperty(T)&&typeof d[T]=="undefined"&&(d[T]=arguments[_][T]);return d},n.prepareContent=function(d,_,T,N,y){var S=h.Promise.resolve(_).then(function(k){var z=s.blob&&(k instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(k))!==-1);return z&&typeof FileReader!="undefined"?new h.Promise(function($,U){var J=new FileReader;J.onload=function(Y){$(Y.target.result)},J.onerror=function(Y){U(Y.target.error)},J.readAsArrayBuffer(k)}):k});return S.then(function(k){var z=n.getTypeOf(k);return z?(z==="arraybuffer"?k=n.transformTo("uint8array",k):z==="string"&&(y?k=a.decode(k):T&&N!==!0&&(k=u(k))),k):h.Promise.reject(new Error("Can't read the data of '"+d+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,"set-immediate-shim":54}],33:[function(t,r,n){var s=t("./reader/readerFor"),a=t("./utils"),o=t("./signature"),l=t("./zipEntry");t("./utf8");var h=t("./support");function u(c){this.files=[],this.loadOptions=c}u.prototype={checkSignature:function(c){if(!this.reader.readAndCheckSignature(c)){this.reader.index-=4;var v=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+a.pretty(v)+", expected "+a.pretty(c)+")")}},isSignature:function(c,v){var g=this.reader.index;this.reader.setIndex(c);var I=this.reader.readString(4),w=I===v;return this.reader.setIndex(g),w},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var c=this.reader.readData(this.zipCommentLength),v=h.uint8array?"uint8array":"array",g=a.transformTo(v,c);this.zipComment=this.loadOptions.decodeFileName(g)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var c=this.zip64EndOfCentralSize-44,v=0,g,I,w;v<c;)g=this.reader.readInt(2),I=this.reader.readInt(4),w=this.reader.readData(I),this.zip64ExtensibleData[g]={id:g,length:I,value:w}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var c,v;for(c=0;c<this.files.length;c++)v=this.files[c],this.reader.setIndex(v.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),v.readLocalPart(this.reader),v.handleUTF8(),v.processAttributes()},readCentralDir:function(){var c;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)c=new l({zip64:this.zip64},this.loadOptions),c.readCentralPart(this.reader),this.files.push(c);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var c=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(c<0){var v=!this.isSignature(0,o.LOCAL_FILE_HEADER);throw v?new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html"):new Error("Corrupted zip: can't find end of central directory")}this.reader.setIndex(c);var g=c;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===a.MAX_VALUE_16BITS||this.diskWithCentralDirStart===a.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===a.MAX_VALUE_16BITS||this.centralDirRecords===a.MAX_VALUE_16BITS||this.centralDirSize===a.MAX_VALUE_32BITS||this.centralDirOffset===a.MAX_VALUE_32BITS){if(this.zip64=!0,c=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),c<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(c),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var I=this.centralDirOffset+this.centralDirSize;this.zip64&&(I+=20,I+=12+this.zip64EndOfCentralSize);var w=g-I;if(w>0)this.isSignature(g,o.CENTRAL_FILE_HEADER)||(this.reader.zero=w);else if(w<0)throw new Error("Corrupted zip: missing "+Math.abs(w)+" bytes.")},prepareReader:function(c){this.reader=s(c)},load:function(c){this.prepareReader(c),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=u},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utf8":31,"./utils":32,"./zipEntry":34}],34:[function(t,r,n){var s=t("./reader/readerFor"),a=t("./utils"),o=t("./compressedObject"),l=t("./crc32"),h=t("./utf8"),u=t("./compressions"),c=t("./support"),v=0,g=3,I=function(p){for(var d in u)if(!!u.hasOwnProperty(d)&&u[d].magic===p)return u[d];return null};function w(p,d){this.options=p,this.loadOptions=d}w.prototype={isEncrypted:function(){return(this.bitFlag&1)==1},useUTF8:function(){return(this.bitFlag&2048)==2048},readLocalPart:function(p){var d,_;if(p.skip(22),this.fileNameLength=p.readInt(2),_=p.readInt(2),this.fileName=p.readData(this.fileNameLength),p.skip(_),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(d=I(this.compressionMethod),d===null)throw new Error("Corrupted zip : compression "+a.pretty(this.compressionMethod)+" unknown (inner file : "+a.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,d,p.readData(this.compressedSize))},readCentralPart:function(p){this.versionMadeBy=p.readInt(2),p.skip(2),this.bitFlag=p.readInt(2),this.compressionMethod=p.readString(2),this.date=p.readDate(),this.crc32=p.readInt(4),this.compressedSize=p.readInt(4),this.uncompressedSize=p.readInt(4);var d=p.readInt(2);if(this.extraFieldsLength=p.readInt(2),this.fileCommentLength=p.readInt(2),this.diskNumberStart=p.readInt(2),this.internalFileAttributes=p.readInt(2),this.externalFileAttributes=p.readInt(4),this.localHeaderOffset=p.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");p.skip(d),this.readExtraFields(p),this.parseZIP64ExtraField(p),this.fileComment=p.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var p=this.versionMadeBy>>8;this.dir=!!(this.externalFileAttributes&16),p===v&&(this.dosPermissions=this.externalFileAttributes&63),p===g&&(this.unixPermissions=this.externalFileAttributes>>16&65535),!this.dir&&this.fileNameStr.slice(-1)==="/"&&(this.dir=!0)},parseZIP64ExtraField:function(p){if(!!this.extraFields[1]){var d=s(this.extraFields[1].value);this.uncompressedSize===a.MAX_VALUE_32BITS&&(this.uncompressedSize=d.readInt(8)),this.compressedSize===a.MAX_VALUE_32BITS&&(this.compressedSize=d.readInt(8)),this.localHeaderOffset===a.MAX_VALUE_32BITS&&(this.localHeaderOffset=d.readInt(8)),this.diskNumberStart===a.MAX_VALUE_32BITS&&(this.diskNumberStart=d.readInt(4))}},readExtraFields:function(p){var d=p.index+this.extraFieldsLength,_,T,N;for(this.extraFields||(this.extraFields={});p.index+4<d;)_=p.readInt(2),T=p.readInt(2),N=p.readData(T),this.extraFields[_]={id:_,length:T,value:N};p.setIndex(d)},handleUTF8:function(){var p=c.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=h.utf8decode(this.fileName),this.fileCommentStr=h.utf8decode(this.fileComment);else{var d=this.findExtraFieldUnicodePath();if(d!==null)this.fileNameStr=d;else{var _=a.transformTo(p,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(_)}var T=this.findExtraFieldUnicodeComment();if(T!==null)this.fileCommentStr=T;else{var N=a.transformTo(p,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(N)}}},findExtraFieldUnicodePath:function(){var p=this.extraFields[28789];if(p){var d=s(p.value);return d.readInt(1)!==1||l(this.fileName)!==d.readInt(4)?null:h.utf8decode(d.readData(p.length-5))}return null},findExtraFieldUnicodeComment:function(){var p=this.extraFields[25461];if(p){var d=s(p.value);return d.readInt(1)!==1||l(this.fileComment)!==d.readInt(4)?null:h.utf8decode(d.readData(p.length-5))}return null}},r.exports=w},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,r,n){var s=t("./stream/StreamHelper"),a=t("./stream/DataWorker"),o=t("./utf8"),l=t("./compressedObject"),h=t("./stream/GenericWorker"),u=function(I,w,p){this.name=I,this.dir=p.dir,this.date=p.date,this.comment=p.comment,this.unixPermissions=p.unixPermissions,this.dosPermissions=p.dosPermissions,this._data=w,this._dataBinary=p.binary,this.options={compression:p.compression,compressionOptions:p.compressionOptions}};u.prototype={internalStream:function(I){var w=null,p="string";try{if(!I)throw new Error("No output type specified.");p=I.toLowerCase();var d=p==="string"||p==="text";(p==="binarystring"||p==="text")&&(p="string"),w=this._decompressWorker();var _=!this._dataBinary;_&&!d&&(w=w.pipe(new o.Utf8EncodeWorker)),!_&&d&&(w=w.pipe(new o.Utf8DecodeWorker))}catch(T){w=new h("error"),w.error(T)}return new s(w,p,"")},async:function(I,w){return this.internalStream(I).accumulate(w)},nodeStream:function(I,w){return this.internalStream(I||"nodebuffer").toNodejsStream(w)},_compressWorker:function(I,w){if(this._data instanceof l&&this._data.compression.magic===I.magic)return this._data.getCompressedWorker();var p=this._decompressWorker();return this._dataBinary||(p=p.pipe(new o.Utf8EncodeWorker)),l.createWorkerFrom(p,I,w)},_decompressWorker:function(){return this._data instanceof l?this._data.getContentWorker():this._data instanceof h?this._data:new a(this._data)}};for(var c=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],v=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},g=0;g<c.length;g++)u.prototype[c[g]]=v;r.exports=u},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,r,n){(function(s){var a=s.MutationObserver||s.WebKitMutationObserver,o;if(a){var l=0,h=new a(I),u=s.document.createTextNode("");h.observe(u,{characterData:!0}),o=function(){u.data=l=++l%2}}else if(!s.setImmediate&&typeof s.MessageChannel!="undefined"){var c=new s.MessageChannel;c.port1.onmessage=I,o=function(){c.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?o=function(){var p=s.document.createElement("script");p.onreadystatechange=function(){I(),p.onreadystatechange=null,p.parentNode.removeChild(p),p=null},s.document.documentElement.appendChild(p)}:o=function(){setTimeout(I,0)};var v,g=[];function I(){v=!0;for(var p,d,_=g.length;_;){for(d=g,g=[],p=-1;++p<_;)d[p]();_=g.length}v=!1}r.exports=w;function w(p){g.push(p)===1&&!v&&o()}}).call(this,typeof Kt!="undefined"?Kt:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],37:[function(t,r,n){var s=t("immediate");function a(){}var o={},l=["REJECTED"],h=["FULFILLED"],u=["PENDING"];r.exports=c;function c(y){if(typeof y!="function")throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,y!==a&&w(this,y)}c.prototype.finally=function(y){if(typeof y!="function")return this;var S=this.constructor;return this.then(k,z);function k($){function U(){return $}return S.resolve(y()).then(U)}function z($){function U(){throw $}return S.resolve(y()).then(U)}},c.prototype.catch=function(y){return this.then(null,y)},c.prototype.then=function(y,S){if(typeof y!="function"&&this.state===h||typeof S!="function"&&this.state===l)return this;var k=new this.constructor(a);if(this.state!==u){var z=this.state===h?y:S;g(k,z,this.outcome)}else this.queue.push(new v(k,y,S));return k};function v(y,S,k){this.promise=y,typeof S=="function"&&(this.onFulfilled=S,this.callFulfilled=this.otherCallFulfilled),typeof k=="function"&&(this.onRejected=k,this.callRejected=this.otherCallRejected)}v.prototype.callFulfilled=function(y){o.resolve(this.promise,y)},v.prototype.otherCallFulfilled=function(y){g(this.promise,this.onFulfilled,y)},v.prototype.callRejected=function(y){o.reject(this.promise,y)},v.prototype.otherCallRejected=function(y){g(this.promise,this.onRejected,y)};function g(y,S,k){s(function(){var z;try{z=S(k)}catch($){return o.reject(y,$)}z===y?o.reject(y,new TypeError("Cannot resolve promise with itself")):o.resolve(y,z)})}o.resolve=function(y,S){var k=p(I,S);if(k.status==="error")return o.reject(y,k.value);var z=k.value;if(z)w(y,z);else{y.state=h,y.outcome=S;for(var $=-1,U=y.queue.length;++$<U;)y.queue[$].callFulfilled(S)}return y},o.reject=function(y,S){y.state=l,y.outcome=S;for(var k=-1,z=y.queue.length;++k<z;)y.queue[k].callRejected(S);return y};function I(y){var S=y&&y.then;if(y&&(typeof y=="object"||typeof y=="function")&&typeof S=="function")return function(){S.apply(y,arguments)}}function w(y,S){var k=!1;function z(Y){k||(k=!0,o.reject(y,Y))}function $(Y){k||(k=!0,o.resolve(y,Y))}function U(){S($,z)}var J=p(U);J.status==="error"&&z(J.value)}function p(y,S){var k={};try{k.value=y(S),k.status="success"}catch(z){k.status="error",k.value=z}return k}c.resolve=d;function d(y){return y instanceof this?y:o.resolve(new this(a),y)}c.reject=_;function _(y){var S=new this(a);return o.reject(S,y)}c.all=T;function T(y){var S=this;if(Object.prototype.toString.call(y)!=="[object Array]")return this.reject(new TypeError("must be an array"));var k=y.length,z=!1;if(!k)return this.resolve([]);for(var $=new Array(k),U=0,J=-1,Y=new this(a);++J<k;)ce(y[J],J);return Y;function ce(Se,Ee){S.resolve(Se).then(ve,function(he){z||(z=!0,o.reject(Y,he))});function ve(he){$[Ee]=he,++U===k&&!z&&(z=!0,o.resolve(Y,$))}}}c.race=N;function N(y){var S=this;if(Object.prototype.toString.call(y)!=="[object Array]")return this.reject(new TypeError("must be an array"));var k=y.length,z=!1;if(!k)return this.resolve([]);for(var $=-1,U=new this(a);++$<k;)J(y[$]);return U;function J(Y){S.resolve(Y).then(function(ce){z||(z=!0,o.resolve(U,ce))},function(ce){z||(z=!0,o.reject(U,ce))})}}},{immediate:36}],38:[function(t,r,n){var s=t("./lib/utils/common").assign,a=t("./lib/deflate"),o=t("./lib/inflate"),l=t("./lib/zlib/constants"),h={};s(h,a,o,l),r.exports=h},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,r,n){var s=t("./zlib/deflate"),a=t("./utils/common"),o=t("./utils/strings"),l=t("./zlib/messages"),h=t("./zlib/zstream"),u=Object.prototype.toString,c=0,v=4,g=0,I=1,w=2,p=-1,d=0,_=8;function T(k){if(!(this instanceof T))return new T(k);this.options=a.assign({level:p,method:_,chunkSize:16384,windowBits:15,memLevel:8,strategy:d,to:""},k||{});var z=this.options;z.raw&&z.windowBits>0?z.windowBits=-z.windowBits:z.gzip&&z.windowBits>0&&z.windowBits<16&&(z.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var $=s.deflateInit2(this.strm,z.level,z.method,z.windowBits,z.memLevel,z.strategy);if($!==g)throw new Error(l[$]);if(z.header&&s.deflateSetHeader(this.strm,z.header),z.dictionary){var U;if(typeof z.dictionary=="string"?U=o.string2buf(z.dictionary):u.call(z.dictionary)==="[object ArrayBuffer]"?U=new Uint8Array(z.dictionary):U=z.dictionary,$=s.deflateSetDictionary(this.strm,U),$!==g)throw new Error(l[$]);this._dict_set=!0}}T.prototype.push=function(k,z){var $=this.strm,U=this.options.chunkSize,J,Y;if(this.ended)return!1;Y=z===~~z?z:z===!0?v:c,typeof k=="string"?$.input=o.string2buf(k):u.call(k)==="[object ArrayBuffer]"?$.input=new Uint8Array(k):$.input=k,$.next_in=0,$.avail_in=$.input.length;do{if($.avail_out===0&&($.output=new a.Buf8(U),$.next_out=0,$.avail_out=U),J=s.deflate($,Y),J!==I&&J!==g)return this.onEnd(J),this.ended=!0,!1;($.avail_out===0||$.avail_in===0&&(Y===v||Y===w))&&(this.options.to==="string"?this.onData(o.buf2binstring(a.shrinkBuf($.output,$.next_out))):this.onData(a.shrinkBuf($.output,$.next_out)))}while(($.avail_in>0||$.avail_out===0)&&J!==I);return Y===v?(J=s.deflateEnd(this.strm),this.onEnd(J),this.ended=!0,J===g):(Y===w&&(this.onEnd(g),$.avail_out=0),!0)},T.prototype.onData=function(k){this.chunks.push(k)},T.prototype.onEnd=function(k){k===g&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=k,this.msg=this.strm.msg};function N(k,z){var $=new T(z);if($.push(k,!0),$.err)throw $.msg||l[$.err];return $.result}function y(k,z){return z=z||{},z.raw=!0,N(k,z)}function S(k,z){return z=z||{},z.gzip=!0,N(k,z)}n.Deflate=T,n.deflate=N,n.deflateRaw=y,n.gzip=S},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,r,n){var s=t("./zlib/inflate"),a=t("./utils/common"),o=t("./utils/strings"),l=t("./zlib/constants"),h=t("./zlib/messages"),u=t("./zlib/zstream"),c=t("./zlib/gzheader"),v=Object.prototype.toString;function g(p){if(!(this instanceof g))return new g(p);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},p||{});var d=this.options;d.raw&&d.windowBits>=0&&d.windowBits<16&&(d.windowBits=-d.windowBits,d.windowBits===0&&(d.windowBits=-15)),d.windowBits>=0&&d.windowBits<16&&!(p&&p.windowBits)&&(d.windowBits+=32),d.windowBits>15&&d.windowBits<48&&(d.windowBits&15)==0&&(d.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var _=s.inflateInit2(this.strm,d.windowBits);if(_!==l.Z_OK)throw new Error(h[_]);this.header=new c,s.inflateGetHeader(this.strm,this.header)}g.prototype.push=function(p,d){var _=this.strm,T=this.options.chunkSize,N=this.options.dictionary,y,S,k,z,$,U,J=!1;if(this.ended)return!1;S=d===~~d?d:d===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof p=="string"?_.input=o.binstring2buf(p):v.call(p)==="[object ArrayBuffer]"?_.input=new Uint8Array(p):_.input=p,_.next_in=0,_.avail_in=_.input.length;do{if(_.avail_out===0&&(_.output=new a.Buf8(T),_.next_out=0,_.avail_out=T),y=s.inflate(_,l.Z_NO_FLUSH),y===l.Z_NEED_DICT&&N&&(typeof N=="string"?U=o.string2buf(N):v.call(N)==="[object ArrayBuffer]"?U=new Uint8Array(N):U=N,y=s.inflateSetDictionary(this.strm,U)),y===l.Z_BUF_ERROR&&J===!0&&(y=l.Z_OK,J=!1),y!==l.Z_STREAM_END&&y!==l.Z_OK)return this.onEnd(y),this.ended=!0,!1;_.next_out&&(_.avail_out===0||y===l.Z_STREAM_END||_.avail_in===0&&(S===l.Z_FINISH||S===l.Z_SYNC_FLUSH))&&(this.options.to==="string"?(k=o.utf8border(_.output,_.next_out),z=_.next_out-k,$=o.buf2string(_.output,k),_.next_out=z,_.avail_out=T-z,z&&a.arraySet(_.output,_.output,k,z,0),this.onData($)):this.onData(a.shrinkBuf(_.output,_.next_out))),_.avail_in===0&&_.avail_out===0&&(J=!0)}while((_.avail_in>0||_.avail_out===0)&&y!==l.Z_STREAM_END);return y===l.Z_STREAM_END&&(S=l.Z_FINISH),S===l.Z_FINISH?(y=s.inflateEnd(this.strm),this.onEnd(y),this.ended=!0,y===l.Z_OK):(S===l.Z_SYNC_FLUSH&&(this.onEnd(l.Z_OK),_.avail_out=0),!0)},g.prototype.onData=function(p){this.chunks.push(p)},g.prototype.onEnd=function(p){p===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=p,this.msg=this.strm.msg};function I(p,d){var _=new g(d);if(_.push(p,!0),_.err)throw _.msg||h[_.err];return _.result}function w(p,d){return d=d||{},d.raw=!0,I(p,d)}n.Inflate=g,n.inflate=I,n.inflateRaw=w,n.ungzip=I},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,r,n){var s=typeof Uint8Array!="undefined"&&typeof Uint16Array!="undefined"&&typeof Int32Array!="undefined";n.assign=function(l){for(var h=Array.prototype.slice.call(arguments,1);h.length;){var u=h.shift();if(!!u){if(typeof u!="object")throw new TypeError(u+"must be non-object");for(var c in u)u.hasOwnProperty(c)&&(l[c]=u[c])}}return l},n.shrinkBuf=function(l,h){return l.length===h?l:l.subarray?l.subarray(0,h):(l.length=h,l)};var a={arraySet:function(l,h,u,c,v){if(h.subarray&&l.subarray){l.set(h.subarray(u,u+c),v);return}for(var g=0;g<c;g++)l[v+g]=h[u+g]},flattenChunks:function(l){var h,u,c,v,g,I;for(c=0,h=0,u=l.length;h<u;h++)c+=l[h].length;for(I=new Uint8Array(c),v=0,h=0,u=l.length;h<u;h++)g=l[h],I.set(g,v),v+=g.length;return I}},o={arraySet:function(l,h,u,c,v){for(var g=0;g<c;g++)l[v+g]=h[u+g]},flattenChunks:function(l){return[].concat.apply([],l)}};n.setTyped=function(l){l?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,a)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,o))},n.setTyped(s)},{}],42:[function(t,r,n){var s=t("./common"),a=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch{a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{o=!1}for(var l=new s.Buf8(256),h=0;h<256;h++)l[h]=h>=252?6:h>=248?5:h>=240?4:h>=224?3:h>=192?2:1;l[254]=l[254]=1,n.string2buf=function(c){var v,g,I,w,p,d=c.length,_=0;for(w=0;w<d;w++)g=c.charCodeAt(w),(g&64512)==55296&&w+1<d&&(I=c.charCodeAt(w+1),(I&64512)==56320&&(g=65536+(g-55296<<10)+(I-56320),w++)),_+=g<128?1:g<2048?2:g<65536?3:4;for(v=new s.Buf8(_),p=0,w=0;p<_;w++)g=c.charCodeAt(w),(g&64512)==55296&&w+1<d&&(I=c.charCodeAt(w+1),(I&64512)==56320&&(g=65536+(g-55296<<10)+(I-56320),w++)),g<128?v[p++]=g:g<2048?(v[p++]=192|g>>>6,v[p++]=128|g&63):g<65536?(v[p++]=224|g>>>12,v[p++]=128|g>>>6&63,v[p++]=128|g&63):(v[p++]=240|g>>>18,v[p++]=128|g>>>12&63,v[p++]=128|g>>>6&63,v[p++]=128|g&63);return v};function u(c,v){if(v<65537&&(c.subarray&&o||!c.subarray&&a))return String.fromCharCode.apply(null,s.shrinkBuf(c,v));for(var g="",I=0;I<v;I++)g+=String.fromCharCode(c[I]);return g}n.buf2binstring=function(c){return u(c,c.length)},n.binstring2buf=function(c){for(var v=new s.Buf8(c.length),g=0,I=v.length;g<I;g++)v[g]=c.charCodeAt(g);return v},n.buf2string=function(c,v){var g,I,w,p,d=v||c.length,_=new Array(d*2);for(I=0,g=0;g<d;){if(w=c[g++],w<128){_[I++]=w;continue}if(p=l[w],p>4){_[I++]=65533,g+=p-1;continue}for(w&=p===2?31:p===3?15:7;p>1&&g<d;)w=w<<6|c[g++]&63,p--;if(p>1){_[I++]=65533;continue}w<65536?_[I++]=w:(w-=65536,_[I++]=55296|w>>10&1023,_[I++]=56320|w&1023)}return u(_,I)},n.utf8border=function(c,v){var g;for(v=v||c.length,v>c.length&&(v=c.length),g=v-1;g>=0&&(c[g]&192)==128;)g--;return g<0||g===0?v:g+l[c[g]]>v?g:v}},{"./common":41}],43:[function(t,r,n){function s(a,o,l,h){for(var u=a&65535|0,c=a>>>16&65535|0,v=0;l!==0;){v=l>2e3?2e3:l,l-=v;do u=u+o[h++]|0,c=c+u|0;while(--v);u%=65521,c%=65521}return u|c<<16|0}r.exports=s},{}],44:[function(t,r,n){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,r,n){function s(){for(var l,h=[],u=0;u<256;u++){l=u;for(var c=0;c<8;c++)l=l&1?3988292384^l>>>1:l>>>1;h[u]=l}return h}var a=s();function o(l,h,u,c){var v=a,g=c+u;l^=-1;for(var I=c;I<g;I++)l=l>>>8^v[(l^h[I])&255];return l^-1}r.exports=o},{}],46:[function(t,r,n){var s=t("../utils/common"),a=t("./trees"),o=t("./adler32"),l=t("./crc32"),h=t("./messages"),u=0,c=1,v=3,g=4,I=5,w=0,p=1,d=-2,_=-3,T=-5,N=-1,y=1,S=2,k=3,z=4,$=0,U=2,J=8,Y=9,ce=15,Se=8,Ee=29,ve=256,he=ve+1+Ee,ae=30,Ae=19,Ye=2*he+1,Me=15,be=3,Re=258,Be=Re+be+1,ht=32,tt=42,$e=69,Ie=73,it=91,qe=103,Ue=113,Ge=666,A=1,L=2,W=3,G=4,Z=3;function ee(f,j){return f.msg=h[j],j}function ue(f){return(f<<1)-(f>4?9:0)}function te(f){for(var j=f.length;--j>=0;)f[j]=0}function re(f){var j=f.state,H=j.pending;H>f.avail_out&&(H=f.avail_out),H!==0&&(s.arraySet(f.output,j.pending_buf,j.pending_out,H,f.next_out),f.next_out+=H,j.pending_out+=H,f.total_out+=H,f.avail_out-=H,j.pending-=H,j.pending===0&&(j.pending_out=0))}function X(f,j){a._tr_flush_block(f,f.block_start>=0?f.block_start:-1,f.strstart-f.block_start,j),f.block_start=f.strstart,re(f.strm)}function se(f,j){f.pending_buf[f.pending++]=j}function de(f,j){f.pending_buf[f.pending++]=j>>>8&255,f.pending_buf[f.pending++]=j&255}function _e(f,j,H,b){var R=f.avail_in;return R>b&&(R=b),R===0?0:(f.avail_in-=R,s.arraySet(j,f.input,f.next_in,R,H),f.state.wrap===1?f.adler=o(f.adler,j,R,H):f.state.wrap===2&&(f.adler=l(f.adler,j,R,H)),f.next_in+=R,f.total_in+=R,R)}function Te(f,j){var H=f.max_chain_length,b=f.strstart,R,F,we=f.prev_length,ge=f.nice_match,ye=f.strstart>f.w_size-Be?f.strstart-(f.w_size-Be):0,Pe=f.window,Bt=f.w_mask,et=f.prev,Fe=f.strstart+Re,at=Pe[b+we-1],pt=Pe[b+we];f.prev_length>=f.good_match&&(H>>=2),ge>f.lookahead&&(ge=f.lookahead);do if(R=j,!(Pe[R+we]!==pt||Pe[R+we-1]!==at||Pe[R]!==Pe[b]||Pe[++R]!==Pe[b+1])){b+=2,R++;do;while(Pe[++b]===Pe[++R]&&Pe[++b]===Pe[++R]&&Pe[++b]===Pe[++R]&&Pe[++b]===Pe[++R]&&Pe[++b]===Pe[++R]&&Pe[++b]===Pe[++R]&&Pe[++b]===Pe[++R]&&Pe[++b]===Pe[++R]&&b<Fe);if(F=Re-(Fe-b),b=Fe-Re,F>we){if(f.match_start=j,we=F,F>=ge)break;at=Pe[b+we-1],pt=Pe[b+we]}}while((j=et[j&Bt])>ye&&--H!=0);return we<=f.lookahead?we:f.lookahead}function ke(f){var j=f.w_size,H,b,R,F,we;do{if(F=f.window_size-f.lookahead-f.strstart,f.strstart>=j+(j-Be)){s.arraySet(f.window,f.window,j,j,0),f.match_start-=j,f.strstart-=j,f.block_start-=j,b=f.hash_size,H=b;do R=f.head[--H],f.head[H]=R>=j?R-j:0;while(--b);b=j,H=b;do R=f.prev[--H],f.prev[H]=R>=j?R-j:0;while(--b);F+=j}if(f.strm.avail_in===0)break;if(b=_e(f.strm,f.window,f.strstart+f.lookahead,F),f.lookahead+=b,f.lookahead+f.insert>=be)for(we=f.strstart-f.insert,f.ins_h=f.window[we],f.ins_h=(f.ins_h<<f.hash_shift^f.window[we+1])&f.hash_mask;f.insert&&(f.ins_h=(f.ins_h<<f.hash_shift^f.window[we+be-1])&f.hash_mask,f.prev[we&f.w_mask]=f.head[f.ins_h],f.head[f.ins_h]=we,we++,f.insert--,!(f.lookahead+f.insert<be)););}while(f.lookahead<Be&&f.strm.avail_in!==0)}function We(f,j){var H=65535;for(H>f.pending_buf_size-5&&(H=f.pending_buf_size-5);;){if(f.lookahead<=1){if(ke(f),f.lookahead===0&&j===u)return A;if(f.lookahead===0)break}f.strstart+=f.lookahead,f.lookahead=0;var b=f.block_start+H;if((f.strstart===0||f.strstart>=b)&&(f.lookahead=f.strstart-b,f.strstart=b,X(f,!1),f.strm.avail_out===0)||f.strstart-f.block_start>=f.w_size-Be&&(X(f,!1),f.strm.avail_out===0))return A}return f.insert=0,j===g?(X(f,!0),f.strm.avail_out===0?W:G):(f.strstart>f.block_start&&(X(f,!1),f.strm.avail_out===0),A)}function Oe(f,j){for(var H,b;;){if(f.lookahead<Be){if(ke(f),f.lookahead<Be&&j===u)return A;if(f.lookahead===0)break}if(H=0,f.lookahead>=be&&(f.ins_h=(f.ins_h<<f.hash_shift^f.window[f.strstart+be-1])&f.hash_mask,H=f.prev[f.strstart&f.w_mask]=f.head[f.ins_h],f.head[f.ins_h]=f.strstart),H!==0&&f.strstart-H<=f.w_size-Be&&(f.match_length=Te(f,H)),f.match_length>=be)if(b=a._tr_tally(f,f.strstart-f.match_start,f.match_length-be),f.lookahead-=f.match_length,f.match_length<=f.max_lazy_match&&f.lookahead>=be){f.match_length--;do f.strstart++,f.ins_h=(f.ins_h<<f.hash_shift^f.window[f.strstart+be-1])&f.hash_mask,H=f.prev[f.strstart&f.w_mask]=f.head[f.ins_h],f.head[f.ins_h]=f.strstart;while(--f.match_length!=0);f.strstart++}else f.strstart+=f.match_length,f.match_length=0,f.ins_h=f.window[f.strstart],f.ins_h=(f.ins_h<<f.hash_shift^f.window[f.strstart+1])&f.hash_mask;else b=a._tr_tally(f,0,f.window[f.strstart]),f.lookahead--,f.strstart++;if(b&&(X(f,!1),f.strm.avail_out===0))return A}return f.insert=f.strstart<be-1?f.strstart:be-1,j===g?(X(f,!0),f.strm.avail_out===0?W:G):f.last_lit&&(X(f,!1),f.strm.avail_out===0)?A:L}function Ne(f,j){for(var H,b,R;;){if(f.lookahead<Be){if(ke(f),f.lookahead<Be&&j===u)return A;if(f.lookahead===0)break}if(H=0,f.lookahead>=be&&(f.ins_h=(f.ins_h<<f.hash_shift^f.window[f.strstart+be-1])&f.hash_mask,H=f.prev[f.strstart&f.w_mask]=f.head[f.ins_h],f.head[f.ins_h]=f.strstart),f.prev_length=f.match_length,f.prev_match=f.match_start,f.match_length=be-1,H!==0&&f.prev_length<f.max_lazy_match&&f.strstart-H<=f.w_size-Be&&(f.match_length=Te(f,H),f.match_length<=5&&(f.strategy===y||f.match_length===be&&f.strstart-f.match_start>4096)&&(f.match_length=be-1)),f.prev_length>=be&&f.match_length<=f.prev_length){R=f.strstart+f.lookahead-be,b=a._tr_tally(f,f.strstart-1-f.prev_match,f.prev_length-be),f.lookahead-=f.prev_length-1,f.prev_length-=2;do++f.strstart<=R&&(f.ins_h=(f.ins_h<<f.hash_shift^f.window[f.strstart+be-1])&f.hash_mask,H=f.prev[f.strstart&f.w_mask]=f.head[f.ins_h],f.head[f.ins_h]=f.strstart);while(--f.prev_length!=0);if(f.match_available=0,f.match_length=be-1,f.strstart++,b&&(X(f,!1),f.strm.avail_out===0))return A}else if(f.match_available){if(b=a._tr_tally(f,0,f.window[f.strstart-1]),b&&X(f,!1),f.strstart++,f.lookahead--,f.strm.avail_out===0)return A}else f.match_available=1,f.strstart++,f.lookahead--}return f.match_available&&(b=a._tr_tally(f,0,f.window[f.strstart-1]),f.match_available=0),f.insert=f.strstart<be-1?f.strstart:be-1,j===g?(X(f,!0),f.strm.avail_out===0?W:G):f.last_lit&&(X(f,!1),f.strm.avail_out===0)?A:L}function st(f,j){for(var H,b,R,F,we=f.window;;){if(f.lookahead<=Re){if(ke(f),f.lookahead<=Re&&j===u)return A;if(f.lookahead===0)break}if(f.match_length=0,f.lookahead>=be&&f.strstart>0&&(R=f.strstart-1,b=we[R],b===we[++R]&&b===we[++R]&&b===we[++R])){F=f.strstart+Re;do;while(b===we[++R]&&b===we[++R]&&b===we[++R]&&b===we[++R]&&b===we[++R]&&b===we[++R]&&b===we[++R]&&b===we[++R]&&R<F);f.match_length=Re-(F-R),f.match_length>f.lookahead&&(f.match_length=f.lookahead)}if(f.match_length>=be?(H=a._tr_tally(f,1,f.match_length-be),f.lookahead-=f.match_length,f.strstart+=f.match_length,f.match_length=0):(H=a._tr_tally(f,0,f.window[f.strstart]),f.lookahead--,f.strstart++),H&&(X(f,!1),f.strm.avail_out===0))return A}return f.insert=0,j===g?(X(f,!0),f.strm.avail_out===0?W:G):f.last_lit&&(X(f,!1),f.strm.avail_out===0)?A:L}function dt(f,j){for(var H;;){if(f.lookahead===0&&(ke(f),f.lookahead===0)){if(j===u)return A;break}if(f.match_length=0,H=a._tr_tally(f,0,f.window[f.strstart]),f.lookahead--,f.strstart++,H&&(X(f,!1),f.strm.avail_out===0))return A}return f.insert=0,j===g?(X(f,!0),f.strm.avail_out===0?W:G):f.last_lit&&(X(f,!1),f.strm.avail_out===0)?A:L}function rt(f,j,H,b,R){this.good_length=f,this.max_lazy=j,this.nice_length=H,this.max_chain=b,this.func=R}var ft;ft=[new rt(0,0,0,0,We),new rt(4,4,8,4,Oe),new rt(4,5,16,8,Oe),new rt(4,6,32,32,Oe),new rt(4,4,16,16,Ne),new rt(8,16,32,32,Ne),new rt(8,16,128,128,Ne),new rt(8,32,128,256,Ne),new rt(32,128,258,1024,Ne),new rt(32,258,258,4096,Ne)];function Mt(f){f.window_size=2*f.w_size,te(f.head),f.max_lazy_match=ft[f.level].max_lazy,f.good_match=ft[f.level].good_length,f.nice_match=ft[f.level].nice_length,f.max_chain_length=ft[f.level].max_chain,f.strstart=0,f.block_start=0,f.lookahead=0,f.insert=0,f.match_length=f.prev_length=be-1,f.match_available=0,f.ins_h=0}function E(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=J,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new s.Buf16(Ye*2),this.dyn_dtree=new s.Buf16((2*ae+1)*2),this.bl_tree=new s.Buf16((2*Ae+1)*2),te(this.dyn_ltree),te(this.dyn_dtree),te(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new s.Buf16(Me+1),this.heap=new s.Buf16(2*he+1),te(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new s.Buf16(2*he+1),te(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function q(f){var j;return!f||!f.state?ee(f,d):(f.total_in=f.total_out=0,f.data_type=U,j=f.state,j.pending=0,j.pending_out=0,j.wrap<0&&(j.wrap=-j.wrap),j.status=j.wrap?tt:Ue,f.adler=j.wrap===2?0:1,j.last_flush=u,a._tr_init(j),w)}function ne(f){var j=q(f);return j===w&&Mt(f.state),j}function me(f,j){return!f||!f.state||f.state.wrap!==2?d:(f.state.gzhead=j,w)}function D(f,j,H,b,R,F){if(!f)return d;var we=1;if(j===N&&(j=6),b<0?(we=0,b=-b):b>15&&(we=2,b-=16),R<1||R>Y||H!==J||b<8||b>15||j<0||j>9||F<0||F>z)return ee(f,d);b===8&&(b=9);var ge=new E;return f.state=ge,ge.strm=f,ge.wrap=we,ge.gzhead=null,ge.w_bits=b,ge.w_size=1<<ge.w_bits,ge.w_mask=ge.w_size-1,ge.hash_bits=R+7,ge.hash_size=1<<ge.hash_bits,ge.hash_mask=ge.hash_size-1,ge.hash_shift=~~((ge.hash_bits+be-1)/be),ge.window=new s.Buf8(ge.w_size*2),ge.head=new s.Buf16(ge.hash_size),ge.prev=new s.Buf16(ge.w_size),ge.lit_bufsize=1<<R+6,ge.pending_buf_size=ge.lit_bufsize*4,ge.pending_buf=new s.Buf8(ge.pending_buf_size),ge.d_buf=1*ge.lit_bufsize,ge.l_buf=(1+2)*ge.lit_bufsize,ge.level=j,ge.strategy=F,ge.method=H,ne(f)}function V(f,j){return D(f,j,J,ce,Se,$)}function m(f,j){var H,b,R,F;if(!f||!f.state||j>I||j<0)return f?ee(f,d):d;if(b=f.state,!f.output||!f.input&&f.avail_in!==0||b.status===Ge&&j!==g)return ee(f,f.avail_out===0?T:d);if(b.strm=f,H=b.last_flush,b.last_flush=j,b.status===tt)if(b.wrap===2)f.adler=0,se(b,31),se(b,139),se(b,8),b.gzhead?(se(b,(b.gzhead.text?1:0)+(b.gzhead.hcrc?2:0)+(b.gzhead.extra?4:0)+(b.gzhead.name?8:0)+(b.gzhead.comment?16:0)),se(b,b.gzhead.time&255),se(b,b.gzhead.time>>8&255),se(b,b.gzhead.time>>16&255),se(b,b.gzhead.time>>24&255),se(b,b.level===9?2:b.strategy>=S||b.level<2?4:0),se(b,b.gzhead.os&255),b.gzhead.extra&&b.gzhead.extra.length&&(se(b,b.gzhead.extra.length&255),se(b,b.gzhead.extra.length>>8&255)),b.gzhead.hcrc&&(f.adler=l(f.adler,b.pending_buf,b.pending,0)),b.gzindex=0,b.status=$e):(se(b,0),se(b,0),se(b,0),se(b,0),se(b,0),se(b,b.level===9?2:b.strategy>=S||b.level<2?4:0),se(b,Z),b.status=Ue);else{var we=J+(b.w_bits-8<<4)<<8,ge=-1;b.strategy>=S||b.level<2?ge=0:b.level<6?ge=1:b.level===6?ge=2:ge=3,we|=ge<<6,b.strstart!==0&&(we|=ht),we+=31-we%31,b.status=Ue,de(b,we),b.strstart!==0&&(de(b,f.adler>>>16),de(b,f.adler&65535)),f.adler=1}if(b.status===$e)if(b.gzhead.extra){for(R=b.pending;b.gzindex<(b.gzhead.extra.length&65535)&&!(b.pending===b.pending_buf_size&&(b.gzhead.hcrc&&b.pending>R&&(f.adler=l(f.adler,b.pending_buf,b.pending-R,R)),re(f),R=b.pending,b.pending===b.pending_buf_size));)se(b,b.gzhead.extra[b.gzindex]&255),b.gzindex++;b.gzhead.hcrc&&b.pending>R&&(f.adler=l(f.adler,b.pending_buf,b.pending-R,R)),b.gzindex===b.gzhead.extra.length&&(b.gzindex=0,b.status=Ie)}else b.status=Ie;if(b.status===Ie)if(b.gzhead.name){R=b.pending;do{if(b.pending===b.pending_buf_size&&(b.gzhead.hcrc&&b.pending>R&&(f.adler=l(f.adler,b.pending_buf,b.pending-R,R)),re(f),R=b.pending,b.pending===b.pending_buf_size)){F=1;break}b.gzindex<b.gzhead.name.length?F=b.gzhead.name.charCodeAt(b.gzindex++)&255:F=0,se(b,F)}while(F!==0);b.gzhead.hcrc&&b.pending>R&&(f.adler=l(f.adler,b.pending_buf,b.pending-R,R)),F===0&&(b.gzindex=0,b.status=it)}else b.status=it;if(b.status===it)if(b.gzhead.comment){R=b.pending;do{if(b.pending===b.pending_buf_size&&(b.gzhead.hcrc&&b.pending>R&&(f.adler=l(f.adler,b.pending_buf,b.pending-R,R)),re(f),R=b.pending,b.pending===b.pending_buf_size)){F=1;break}b.gzindex<b.gzhead.comment.length?F=b.gzhead.comment.charCodeAt(b.gzindex++)&255:F=0,se(b,F)}while(F!==0);b.gzhead.hcrc&&b.pending>R&&(f.adler=l(f.adler,b.pending_buf,b.pending-R,R)),F===0&&(b.status=qe)}else b.status=qe;if(b.status===qe&&(b.gzhead.hcrc?(b.pending+2>b.pending_buf_size&&re(f),b.pending+2<=b.pending_buf_size&&(se(b,f.adler&255),se(b,f.adler>>8&255),f.adler=0,b.status=Ue)):b.status=Ue),b.pending!==0){if(re(f),f.avail_out===0)return b.last_flush=-1,w}else if(f.avail_in===0&&ue(j)<=ue(H)&&j!==g)return ee(f,T);if(b.status===Ge&&f.avail_in!==0)return ee(f,T);if(f.avail_in!==0||b.lookahead!==0||j!==u&&b.status!==Ge){var ye=b.strategy===S?dt(b,j):b.strategy===k?st(b,j):ft[b.level].func(b,j);if((ye===W||ye===G)&&(b.status=Ge),ye===A||ye===W)return f.avail_out===0&&(b.last_flush=-1),w;if(ye===L&&(j===c?a._tr_align(b):j!==I&&(a._tr_stored_block(b,0,0,!1),j===v&&(te(b.head),b.lookahead===0&&(b.strstart=0,b.block_start=0,b.insert=0))),re(f),f.avail_out===0))return b.last_flush=-1,w}return j!==g?w:b.wrap<=0?p:(b.wrap===2?(se(b,f.adler&255),se(b,f.adler>>8&255),se(b,f.adler>>16&255),se(b,f.adler>>24&255),se(b,f.total_in&255),se(b,f.total_in>>8&255),se(b,f.total_in>>16&255),se(b,f.total_in>>24&255)):(de(b,f.adler>>>16),de(b,f.adler&65535)),re(f),b.wrap>0&&(b.wrap=-b.wrap),b.pending!==0?w:p)}function Q(f){var j;return!f||!f.state?d:(j=f.state.status,j!==tt&&j!==$e&&j!==Ie&&j!==it&&j!==qe&&j!==Ue&&j!==Ge?ee(f,d):(f.state=null,j===Ue?ee(f,_):w))}function Ce(f,j){var H=j.length,b,R,F,we,ge,ye,Pe,Bt;if(!f||!f.state||(b=f.state,we=b.wrap,we===2||we===1&&b.status!==tt||b.lookahead))return d;for(we===1&&(f.adler=o(f.adler,j,H,0)),b.wrap=0,H>=b.w_size&&(we===0&&(te(b.head),b.strstart=0,b.block_start=0,b.insert=0),Bt=new s.Buf8(b.w_size),s.arraySet(Bt,j,H-b.w_size,b.w_size,0),j=Bt,H=b.w_size),ge=f.avail_in,ye=f.next_in,Pe=f.input,f.avail_in=H,f.next_in=0,f.input=j,ke(b);b.lookahead>=be;){R=b.strstart,F=b.lookahead-(be-1);do b.ins_h=(b.ins_h<<b.hash_shift^b.window[R+be-1])&b.hash_mask,b.prev[R&b.w_mask]=b.head[b.ins_h],b.head[b.ins_h]=R,R++;while(--F);b.strstart=R,b.lookahead=be-1,ke(b)}return b.strstart+=b.lookahead,b.block_start=b.strstart,b.insert=b.lookahead,b.lookahead=0,b.match_length=b.prev_length=be-1,b.match_available=0,f.next_in=ye,f.input=Pe,f.avail_in=ge,b.wrap=we,w}n.deflateInit=V,n.deflateInit2=D,n.deflateReset=ne,n.deflateResetKeep=q,n.deflateSetHeader=me,n.deflate=m,n.deflateEnd=Q,n.deflateSetDictionary=Ce,n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,r,n){function s(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}r.exports=s},{}],48:[function(t,r,n){var s=30,a=12;r.exports=function(l,h){var u,c,v,g,I,w,p,d,_,T,N,y,S,k,z,$,U,J,Y,ce,Se,Ee,ve,he,ae;u=l.state,c=l.next_in,he=l.input,v=c+(l.avail_in-5),g=l.next_out,ae=l.output,I=g-(h-l.avail_out),w=g+(l.avail_out-257),p=u.dmax,d=u.wsize,_=u.whave,T=u.wnext,N=u.window,y=u.hold,S=u.bits,k=u.lencode,z=u.distcode,$=(1<<u.lenbits)-1,U=(1<<u.distbits)-1;e:do{S<15&&(y+=he[c++]<<S,S+=8,y+=he[c++]<<S,S+=8),J=k[y&$];t:for(;;){if(Y=J>>>24,y>>>=Y,S-=Y,Y=J>>>16&255,Y===0)ae[g++]=J&65535;else if(Y&16){ce=J&65535,Y&=15,Y&&(S<Y&&(y+=he[c++]<<S,S+=8),ce+=y&(1<<Y)-1,y>>>=Y,S-=Y),S<15&&(y+=he[c++]<<S,S+=8,y+=he[c++]<<S,S+=8),J=z[y&U];i:for(;;){if(Y=J>>>24,y>>>=Y,S-=Y,Y=J>>>16&255,Y&16){if(Se=J&65535,Y&=15,S<Y&&(y+=he[c++]<<S,S+=8,S<Y&&(y+=he[c++]<<S,S+=8)),Se+=y&(1<<Y)-1,Se>p){l.msg="invalid distance too far back",u.mode=s;break e}if(y>>>=Y,S-=Y,Y=g-I,Se>Y){if(Y=Se-Y,Y>_&&u.sane){l.msg="invalid distance too far back",u.mode=s;break e}if(Ee=0,ve=N,T===0){if(Ee+=d-Y,Y<ce){ce-=Y;do ae[g++]=N[Ee++];while(--Y);Ee=g-Se,ve=ae}}else if(T<Y){if(Ee+=d+T-Y,Y-=T,Y<ce){ce-=Y;do ae[g++]=N[Ee++];while(--Y);if(Ee=0,T<ce){Y=T,ce-=Y;do ae[g++]=N[Ee++];while(--Y);Ee=g-Se,ve=ae}}}else if(Ee+=T-Y,Y<ce){ce-=Y;do ae[g++]=N[Ee++];while(--Y);Ee=g-Se,ve=ae}for(;ce>2;)ae[g++]=ve[Ee++],ae[g++]=ve[Ee++],ae[g++]=ve[Ee++],ce-=3;ce&&(ae[g++]=ve[Ee++],ce>1&&(ae[g++]=ve[Ee++]))}else{Ee=g-Se;do ae[g++]=ae[Ee++],ae[g++]=ae[Ee++],ae[g++]=ae[Ee++],ce-=3;while(ce>2);ce&&(ae[g++]=ae[Ee++],ce>1&&(ae[g++]=ae[Ee++]))}}else if((Y&64)==0){J=z[(J&65535)+(y&(1<<Y)-1)];continue i}else{l.msg="invalid distance code",u.mode=s;break e}break}}else if((Y&64)==0){J=k[(J&65535)+(y&(1<<Y)-1)];continue t}else if(Y&32){u.mode=a;break e}else{l.msg="invalid literal/length code",u.mode=s;break e}break}}while(c<v&&g<w);ce=S>>3,c-=ce,S-=ce<<3,y&=(1<<S)-1,l.next_in=c,l.next_out=g,l.avail_in=c<v?5+(v-c):5-(c-v),l.avail_out=g<w?257+(w-g):257-(g-w),u.hold=y,u.bits=S}},{}],49:[function(t,r,n){var s=t("../utils/common"),a=t("./adler32"),o=t("./crc32"),l=t("./inffast"),h=t("./inftrees"),u=0,c=1,v=2,g=4,I=5,w=6,p=0,d=1,_=2,T=-2,N=-3,y=-4,S=-5,k=8,z=1,$=2,U=3,J=4,Y=5,ce=6,Se=7,Ee=8,ve=9,he=10,ae=11,Ae=12,Ye=13,Me=14,be=15,Re=16,Be=17,ht=18,tt=19,$e=20,Ie=21,it=22,qe=23,Ue=24,Ge=25,A=26,L=27,W=28,G=29,Z=30,ee=31,ue=32,te=852,re=592,X=15,se=X;function de(D){return(D>>>24&255)+(D>>>8&65280)+((D&65280)<<8)+((D&255)<<24)}function _e(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Te(D){var V;return!D||!D.state?T:(V=D.state,D.total_in=D.total_out=V.total=0,D.msg="",V.wrap&&(D.adler=V.wrap&1),V.mode=z,V.last=0,V.havedict=0,V.dmax=32768,V.head=null,V.hold=0,V.bits=0,V.lencode=V.lendyn=new s.Buf32(te),V.distcode=V.distdyn=new s.Buf32(re),V.sane=1,V.back=-1,p)}function ke(D){var V;return!D||!D.state?T:(V=D.state,V.wsize=0,V.whave=0,V.wnext=0,Te(D))}function We(D,V){var m,Q;return!D||!D.state||(Q=D.state,V<0?(m=0,V=-V):(m=(V>>4)+1,V<48&&(V&=15)),V&&(V<8||V>15))?T:(Q.window!==null&&Q.wbits!==V&&(Q.window=null),Q.wrap=m,Q.wbits=V,ke(D))}function Oe(D,V){var m,Q;return D?(Q=new _e,D.state=Q,Q.window=null,m=We(D,V),m!==p&&(D.state=null),m):T}function Ne(D){return Oe(D,se)}var st=!0,dt,rt;function ft(D){if(st){var V;for(dt=new s.Buf32(512),rt=new s.Buf32(32),V=0;V<144;)D.lens[V++]=8;for(;V<256;)D.lens[V++]=9;for(;V<280;)D.lens[V++]=7;for(;V<288;)D.lens[V++]=8;for(h(c,D.lens,0,288,dt,0,D.work,{bits:9}),V=0;V<32;)D.lens[V++]=5;h(v,D.lens,0,32,rt,0,D.work,{bits:5}),st=!1}D.lencode=dt,D.lenbits=9,D.distcode=rt,D.distbits=5}function Mt(D,V,m,Q){var Ce,f=D.state;return f.window===null&&(f.wsize=1<<f.wbits,f.wnext=0,f.whave=0,f.window=new s.Buf8(f.wsize)),Q>=f.wsize?(s.arraySet(f.window,V,m-f.wsize,f.wsize,0),f.wnext=0,f.whave=f.wsize):(Ce=f.wsize-f.wnext,Ce>Q&&(Ce=Q),s.arraySet(f.window,V,m-Q,Ce,f.wnext),Q-=Ce,Q?(s.arraySet(f.window,V,m-Q,Q,0),f.wnext=Q,f.whave=f.wsize):(f.wnext+=Ce,f.wnext===f.wsize&&(f.wnext=0),f.whave<f.wsize&&(f.whave+=Ce))),0}function E(D,V){var m,Q,Ce,f,j,H,b,R,F,we,ge,ye,Pe,Bt,et=0,Fe,at,pt,mt,Oi,Ri,nt,Ct,ct=new s.Buf8(4),Ft,Rt,Dr=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!D||!D.state||!D.output||!D.input&&D.avail_in!==0)return T;m=D.state,m.mode===Ae&&(m.mode=Ye),j=D.next_out,Ce=D.output,b=D.avail_out,f=D.next_in,Q=D.input,H=D.avail_in,R=m.hold,F=m.bits,we=H,ge=b,Ct=p;e:for(;;)switch(m.mode){case z:if(m.wrap===0){m.mode=Ye;break}for(;F<16;){if(H===0)break e;H--,R+=Q[f++]<<F,F+=8}if(m.wrap&2&&R===35615){m.check=0,ct[0]=R&255,ct[1]=R>>>8&255,m.check=o(m.check,ct,2,0),R=0,F=0,m.mode=$;break}if(m.flags=0,m.head&&(m.head.done=!1),!(m.wrap&1)||(((R&255)<<8)+(R>>8))%31){D.msg="incorrect header check",m.mode=Z;break}if((R&15)!==k){D.msg="unknown compression method",m.mode=Z;break}if(R>>>=4,F-=4,nt=(R&15)+8,m.wbits===0)m.wbits=nt;else if(nt>m.wbits){D.msg="invalid window size",m.mode=Z;break}m.dmax=1<<nt,D.adler=m.check=1,m.mode=R&512?he:Ae,R=0,F=0;break;case $:for(;F<16;){if(H===0)break e;H--,R+=Q[f++]<<F,F+=8}if(m.flags=R,(m.flags&255)!==k){D.msg="unknown compression method",m.mode=Z;break}if(m.flags&57344){D.msg="unknown header flags set",m.mode=Z;break}m.head&&(m.head.text=R>>8&1),m.flags&512&&(ct[0]=R&255,ct[1]=R>>>8&255,m.check=o(m.check,ct,2,0)),R=0,F=0,m.mode=U;case U:for(;F<32;){if(H===0)break e;H--,R+=Q[f++]<<F,F+=8}m.head&&(m.head.time=R),m.flags&512&&(ct[0]=R&255,ct[1]=R>>>8&255,ct[2]=R>>>16&255,ct[3]=R>>>24&255,m.check=o(m.check,ct,4,0)),R=0,F=0,m.mode=J;case J:for(;F<16;){if(H===0)break e;H--,R+=Q[f++]<<F,F+=8}m.head&&(m.head.xflags=R&255,m.head.os=R>>8),m.flags&512&&(ct[0]=R&255,ct[1]=R>>>8&255,m.check=o(m.check,ct,2,0)),R=0,F=0,m.mode=Y;case Y:if(m.flags&1024){for(;F<16;){if(H===0)break e;H--,R+=Q[f++]<<F,F+=8}m.length=R,m.head&&(m.head.extra_len=R),m.flags&512&&(ct[0]=R&255,ct[1]=R>>>8&255,m.check=o(m.check,ct,2,0)),R=0,F=0}else m.head&&(m.head.extra=null);m.mode=ce;case ce:if(m.flags&1024&&(ye=m.length,ye>H&&(ye=H),ye&&(m.head&&(nt=m.head.extra_len-m.length,m.head.extra||(m.head.extra=new Array(m.head.extra_len)),s.arraySet(m.head.extra,Q,f,ye,nt)),m.flags&512&&(m.check=o(m.check,Q,ye,f)),H-=ye,f+=ye,m.length-=ye),m.length))break e;m.length=0,m.mode=Se;case Se:if(m.flags&2048){if(H===0)break e;ye=0;do nt=Q[f+ye++],m.head&&nt&&m.length<65536&&(m.head.name+=String.fromCharCode(nt));while(nt&&ye<H);if(m.flags&512&&(m.check=o(m.check,Q,ye,f)),H-=ye,f+=ye,nt)break e}else m.head&&(m.head.name=null);m.length=0,m.mode=Ee;case Ee:if(m.flags&4096){if(H===0)break e;ye=0;do nt=Q[f+ye++],m.head&&nt&&m.length<65536&&(m.head.comment+=String.fromCharCode(nt));while(nt&&ye<H);if(m.flags&512&&(m.check=o(m.check,Q,ye,f)),H-=ye,f+=ye,nt)break e}else m.head&&(m.head.comment=null);m.mode=ve;case ve:if(m.flags&512){for(;F<16;){if(H===0)break e;H--,R+=Q[f++]<<F,F+=8}if(R!==(m.check&65535)){D.msg="header crc mismatch",m.mode=Z;break}R=0,F=0}m.head&&(m.head.hcrc=m.flags>>9&1,m.head.done=!0),D.adler=m.check=0,m.mode=Ae;break;case he:for(;F<32;){if(H===0)break e;H--,R+=Q[f++]<<F,F+=8}D.adler=m.check=de(R),R=0,F=0,m.mode=ae;case ae:if(m.havedict===0)return D.next_out=j,D.avail_out=b,D.next_in=f,D.avail_in=H,m.hold=R,m.bits=F,_;D.adler=m.check=1,m.mode=Ae;case Ae:if(V===I||V===w)break e;case Ye:if(m.last){R>>>=F&7,F-=F&7,m.mode=L;break}for(;F<3;){if(H===0)break e;H--,R+=Q[f++]<<F,F+=8}switch(m.last=R&1,R>>>=1,F-=1,R&3){case 0:m.mode=Me;break;case 1:if(ft(m),m.mode=$e,V===w){R>>>=2,F-=2;break e}break;case 2:m.mode=Be;break;case 3:D.msg="invalid block type",m.mode=Z}R>>>=2,F-=2;break;case Me:for(R>>>=F&7,F-=F&7;F<32;){if(H===0)break e;H--,R+=Q[f++]<<F,F+=8}if((R&65535)!=(R>>>16^65535)){D.msg="invalid stored block lengths",m.mode=Z;break}if(m.length=R&65535,R=0,F=0,m.mode=be,V===w)break e;case be:m.mode=Re;case Re:if(ye=m.length,ye){if(ye>H&&(ye=H),ye>b&&(ye=b),ye===0)break e;s.arraySet(Ce,Q,f,ye,j),H-=ye,f+=ye,b-=ye,j+=ye,m.length-=ye;break}m.mode=Ae;break;case Be:for(;F<14;){if(H===0)break e;H--,R+=Q[f++]<<F,F+=8}if(m.nlen=(R&31)+257,R>>>=5,F-=5,m.ndist=(R&31)+1,R>>>=5,F-=5,m.ncode=(R&15)+4,R>>>=4,F-=4,m.nlen>286||m.ndist>30){D.msg="too many length or distance symbols",m.mode=Z;break}m.have=0,m.mode=ht;case ht:for(;m.have<m.ncode;){for(;F<3;){if(H===0)break e;H--,R+=Q[f++]<<F,F+=8}m.lens[Dr[m.have++]]=R&7,R>>>=3,F-=3}for(;m.have<19;)m.lens[Dr[m.have++]]=0;if(m.lencode=m.lendyn,m.lenbits=7,Ft={bits:m.lenbits},Ct=h(u,m.lens,0,19,m.lencode,0,m.work,Ft),m.lenbits=Ft.bits,Ct){D.msg="invalid code lengths set",m.mode=Z;break}m.have=0,m.mode=tt;case tt:for(;m.have<m.nlen+m.ndist;){for(;et=m.lencode[R&(1<<m.lenbits)-1],Fe=et>>>24,at=et>>>16&255,pt=et&65535,!(Fe<=F);){if(H===0)break e;H--,R+=Q[f++]<<F,F+=8}if(pt<16)R>>>=Fe,F-=Fe,m.lens[m.have++]=pt;else{if(pt===16){for(Rt=Fe+2;F<Rt;){if(H===0)break e;H--,R+=Q[f++]<<F,F+=8}if(R>>>=Fe,F-=Fe,m.have===0){D.msg="invalid bit length repeat",m.mode=Z;break}nt=m.lens[m.have-1],ye=3+(R&3),R>>>=2,F-=2}else if(pt===17){for(Rt=Fe+3;F<Rt;){if(H===0)break e;H--,R+=Q[f++]<<F,F+=8}R>>>=Fe,F-=Fe,nt=0,ye=3+(R&7),R>>>=3,F-=3}else{for(Rt=Fe+7;F<Rt;){if(H===0)break e;H--,R+=Q[f++]<<F,F+=8}R>>>=Fe,F-=Fe,nt=0,ye=11+(R&127),R>>>=7,F-=7}if(m.have+ye>m.nlen+m.ndist){D.msg="invalid bit length repeat",m.mode=Z;break}for(;ye--;)m.lens[m.have++]=nt}}if(m.mode===Z)break;if(m.lens[256]===0){D.msg="invalid code -- missing end-of-block",m.mode=Z;break}if(m.lenbits=9,Ft={bits:m.lenbits},Ct=h(c,m.lens,0,m.nlen,m.lencode,0,m.work,Ft),m.lenbits=Ft.bits,Ct){D.msg="invalid literal/lengths set",m.mode=Z;break}if(m.distbits=6,m.distcode=m.distdyn,Ft={bits:m.distbits},Ct=h(v,m.lens,m.nlen,m.ndist,m.distcode,0,m.work,Ft),m.distbits=Ft.bits,Ct){D.msg="invalid distances set",m.mode=Z;break}if(m.mode=$e,V===w)break e;case $e:m.mode=Ie;case Ie:if(H>=6&&b>=258){D.next_out=j,D.avail_out=b,D.next_in=f,D.avail_in=H,m.hold=R,m.bits=F,l(D,ge),j=D.next_out,Ce=D.output,b=D.avail_out,f=D.next_in,Q=D.input,H=D.avail_in,R=m.hold,F=m.bits,m.mode===Ae&&(m.back=-1);break}for(m.back=0;et=m.lencode[R&(1<<m.lenbits)-1],Fe=et>>>24,at=et>>>16&255,pt=et&65535,!(Fe<=F);){if(H===0)break e;H--,R+=Q[f++]<<F,F+=8}if(at&&(at&240)==0){for(mt=Fe,Oi=at,Ri=pt;et=m.lencode[Ri+((R&(1<<mt+Oi)-1)>>mt)],Fe=et>>>24,at=et>>>16&255,pt=et&65535,!(mt+Fe<=F);){if(H===0)break e;H--,R+=Q[f++]<<F,F+=8}R>>>=mt,F-=mt,m.back+=mt}if(R>>>=Fe,F-=Fe,m.back+=Fe,m.length=pt,at===0){m.mode=A;break}if(at&32){m.back=-1,m.mode=Ae;break}if(at&64){D.msg="invalid literal/length code",m.mode=Z;break}m.extra=at&15,m.mode=it;case it:if(m.extra){for(Rt=m.extra;F<Rt;){if(H===0)break e;H--,R+=Q[f++]<<F,F+=8}m.length+=R&(1<<m.extra)-1,R>>>=m.extra,F-=m.extra,m.back+=m.extra}m.was=m.length,m.mode=qe;case qe:for(;et=m.distcode[R&(1<<m.distbits)-1],Fe=et>>>24,at=et>>>16&255,pt=et&65535,!(Fe<=F);){if(H===0)break e;H--,R+=Q[f++]<<F,F+=8}if((at&240)==0){for(mt=Fe,Oi=at,Ri=pt;et=m.distcode[Ri+((R&(1<<mt+Oi)-1)>>mt)],Fe=et>>>24,at=et>>>16&255,pt=et&65535,!(mt+Fe<=F);){if(H===0)break e;H--,R+=Q[f++]<<F,F+=8}R>>>=mt,F-=mt,m.back+=mt}if(R>>>=Fe,F-=Fe,m.back+=Fe,at&64){D.msg="invalid distance code",m.mode=Z;break}m.offset=pt,m.extra=at&15,m.mode=Ue;case Ue:if(m.extra){for(Rt=m.extra;F<Rt;){if(H===0)break e;H--,R+=Q[f++]<<F,F+=8}m.offset+=R&(1<<m.extra)-1,R>>>=m.extra,F-=m.extra,m.back+=m.extra}if(m.offset>m.dmax){D.msg="invalid distance too far back",m.mode=Z;break}m.mode=Ge;case Ge:if(b===0)break e;if(ye=ge-b,m.offset>ye){if(ye=m.offset-ye,ye>m.whave&&m.sane){D.msg="invalid distance too far back",m.mode=Z;break}ye>m.wnext?(ye-=m.wnext,Pe=m.wsize-ye):Pe=m.wnext-ye,ye>m.length&&(ye=m.length),Bt=m.window}else Bt=Ce,Pe=j-m.offset,ye=m.length;ye>b&&(ye=b),b-=ye,m.length-=ye;do Ce[j++]=Bt[Pe++];while(--ye);m.length===0&&(m.mode=Ie);break;case A:if(b===0)break e;Ce[j++]=m.length,b--,m.mode=Ie;break;case L:if(m.wrap){for(;F<32;){if(H===0)break e;H--,R|=Q[f++]<<F,F+=8}if(ge-=b,D.total_out+=ge,m.total+=ge,ge&&(D.adler=m.check=m.flags?o(m.check,Ce,ge,j-ge):a(m.check,Ce,ge,j-ge)),ge=b,(m.flags?R:de(R))!==m.check){D.msg="incorrect data check",m.mode=Z;break}R=0,F=0}m.mode=W;case W:if(m.wrap&&m.flags){for(;F<32;){if(H===0)break e;H--,R+=Q[f++]<<F,F+=8}if(R!==(m.total&4294967295)){D.msg="incorrect length check",m.mode=Z;break}R=0,F=0}m.mode=G;case G:Ct=d;break e;case Z:Ct=N;break e;case ee:return y;case ue:default:return T}return D.next_out=j,D.avail_out=b,D.next_in=f,D.avail_in=H,m.hold=R,m.bits=F,(m.wsize||ge!==D.avail_out&&m.mode<Z&&(m.mode<L||V!==g))&&Mt(D,D.output,D.next_out,ge-D.avail_out),we-=D.avail_in,ge-=D.avail_out,D.total_in+=we,D.total_out+=ge,m.total+=ge,m.wrap&&ge&&(D.adler=m.check=m.flags?o(m.check,Ce,ge,D.next_out-ge):a(m.check,Ce,ge,D.next_out-ge)),D.data_type=m.bits+(m.last?64:0)+(m.mode===Ae?128:0)+(m.mode===$e||m.mode===be?256:0),(we===0&&ge===0||V===g)&&Ct===p&&(Ct=S),Ct}function q(D){if(!D||!D.state)return T;var V=D.state;return V.window&&(V.window=null),D.state=null,p}function ne(D,V){var m;return!D||!D.state||(m=D.state,(m.wrap&2)==0)?T:(m.head=V,V.done=!1,p)}function me(D,V){var m=V.length,Q,Ce,f;return!D||!D.state||(Q=D.state,Q.wrap!==0&&Q.mode!==ae)?T:Q.mode===ae&&(Ce=1,Ce=a(Ce,V,m,0),Ce!==Q.check)?N:(f=Mt(D,V,m,m),f?(Q.mode=ee,y):(Q.havedict=1,p))}n.inflateReset=ke,n.inflateReset2=We,n.inflateResetKeep=Te,n.inflateInit=Ne,n.inflateInit2=Oe,n.inflate=E,n.inflateEnd=q,n.inflateGetHeader=ne,n.inflateSetDictionary=me,n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,r,n){var s=t("../utils/common"),a=15,o=852,l=592,h=0,u=1,c=2,v=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],g=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],I=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],w=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(d,_,T,N,y,S,k,z){var $=z.bits,U=0,J=0,Y=0,ce=0,Se=0,Ee=0,ve=0,he=0,ae=0,Ae=0,Ye,Me,be,Re,Be,ht=null,tt=0,$e,Ie=new s.Buf16(a+1),it=new s.Buf16(a+1),qe=null,Ue=0,Ge,A,L;for(U=0;U<=a;U++)Ie[U]=0;for(J=0;J<N;J++)Ie[_[T+J]]++;for(Se=$,ce=a;ce>=1&&Ie[ce]===0;ce--);if(Se>ce&&(Se=ce),ce===0)return y[S++]=1<<24|64<<16|0,y[S++]=1<<24|64<<16|0,z.bits=1,0;for(Y=1;Y<ce&&Ie[Y]===0;Y++);for(Se<Y&&(Se=Y),he=1,U=1;U<=a;U++)if(he<<=1,he-=Ie[U],he<0)return-1;if(he>0&&(d===h||ce!==1))return-1;for(it[1]=0,U=1;U<a;U++)it[U+1]=it[U]+Ie[U];for(J=0;J<N;J++)_[T+J]!==0&&(k[it[_[T+J]]++]=J);if(d===h?(ht=qe=k,$e=19):d===u?(ht=v,tt-=257,qe=g,Ue-=257,$e=256):(ht=I,qe=w,$e=-1),Ae=0,J=0,U=Y,Be=S,Ee=Se,ve=0,be=-1,ae=1<<Se,Re=ae-1,d===u&&ae>o||d===c&&ae>l)return 1;for(;;){Ge=U-ve,k[J]<$e?(A=0,L=k[J]):k[J]>$e?(A=qe[Ue+k[J]],L=ht[tt+k[J]]):(A=32+64,L=0),Ye=1<<U-ve,Me=1<<Ee,Y=Me;do Me-=Ye,y[Be+(Ae>>ve)+Me]=Ge<<24|A<<16|L|0;while(Me!==0);for(Ye=1<<U-1;Ae&Ye;)Ye>>=1;if(Ye!==0?(Ae&=Ye-1,Ae+=Ye):Ae=0,J++,--Ie[U]==0){if(U===ce)break;U=_[T+k[J]]}if(U>Se&&(Ae&Re)!==be){for(ve===0&&(ve=Se),Be+=Y,Ee=U-ve,he=1<<Ee;Ee+ve<ce&&(he-=Ie[Ee+ve],!(he<=0));)Ee++,he<<=1;if(ae+=1<<Ee,d===u&&ae>o||d===c&&ae>l)return 1;be=Ae&Re,y[be]=Se<<24|Ee<<16|Be-S|0}}return Ae!==0&&(y[Be+Ae]=U-ve<<24|64<<16|0),z.bits=Se,0}},{"../utils/common":41}],51:[function(t,r,n){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,r,n){var s=t("../utils/common"),a=4,o=0,l=1,h=2;function u(E){for(var q=E.length;--q>=0;)E[q]=0}var c=0,v=1,g=2,I=3,w=258,p=29,d=256,_=d+1+p,T=30,N=19,y=2*_+1,S=15,k=16,z=7,$=256,U=16,J=17,Y=18,ce=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Se=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Ee=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ve=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],he=512,ae=new Array((_+2)*2);u(ae);var Ae=new Array(T*2);u(Ae);var Ye=new Array(he);u(Ye);var Me=new Array(w-I+1);u(Me);var be=new Array(p);u(be);var Re=new Array(T);u(Re);function Be(E,q,ne,me,D){this.static_tree=E,this.extra_bits=q,this.extra_base=ne,this.elems=me,this.max_length=D,this.has_stree=E&&E.length}var ht,tt,$e;function Ie(E,q){this.dyn_tree=E,this.max_code=0,this.stat_desc=q}function it(E){return E<256?Ye[E]:Ye[256+(E>>>7)]}function qe(E,q){E.pending_buf[E.pending++]=q&255,E.pending_buf[E.pending++]=q>>>8&255}function Ue(E,q,ne){E.bi_valid>k-ne?(E.bi_buf|=q<<E.bi_valid&65535,qe(E,E.bi_buf),E.bi_buf=q>>k-E.bi_valid,E.bi_valid+=ne-k):(E.bi_buf|=q<<E.bi_valid&65535,E.bi_valid+=ne)}function Ge(E,q,ne){Ue(E,ne[q*2],ne[q*2+1])}function A(E,q){var ne=0;do ne|=E&1,E>>>=1,ne<<=1;while(--q>0);return ne>>>1}function L(E){E.bi_valid===16?(qe(E,E.bi_buf),E.bi_buf=0,E.bi_valid=0):E.bi_valid>=8&&(E.pending_buf[E.pending++]=E.bi_buf&255,E.bi_buf>>=8,E.bi_valid-=8)}function W(E,q){var ne=q.dyn_tree,me=q.max_code,D=q.stat_desc.static_tree,V=q.stat_desc.has_stree,m=q.stat_desc.extra_bits,Q=q.stat_desc.extra_base,Ce=q.stat_desc.max_length,f,j,H,b,R,F,we=0;for(b=0;b<=S;b++)E.bl_count[b]=0;for(ne[E.heap[E.heap_max]*2+1]=0,f=E.heap_max+1;f<y;f++)j=E.heap[f],b=ne[ne[j*2+1]*2+1]+1,b>Ce&&(b=Ce,we++),ne[j*2+1]=b,!(j>me)&&(E.bl_count[b]++,R=0,j>=Q&&(R=m[j-Q]),F=ne[j*2],E.opt_len+=F*(b+R),V&&(E.static_len+=F*(D[j*2+1]+R)));if(we!==0){do{for(b=Ce-1;E.bl_count[b]===0;)b--;E.bl_count[b]--,E.bl_count[b+1]+=2,E.bl_count[Ce]--,we-=2}while(we>0);for(b=Ce;b!==0;b--)for(j=E.bl_count[b];j!==0;)H=E.heap[--f],!(H>me)&&(ne[H*2+1]!==b&&(E.opt_len+=(b-ne[H*2+1])*ne[H*2],ne[H*2+1]=b),j--)}}function G(E,q,ne){var me=new Array(S+1),D=0,V,m;for(V=1;V<=S;V++)me[V]=D=D+ne[V-1]<<1;for(m=0;m<=q;m++){var Q=E[m*2+1];Q!==0&&(E[m*2]=A(me[Q]++,Q))}}function Z(){var E,q,ne,me,D,V=new Array(S+1);for(ne=0,me=0;me<p-1;me++)for(be[me]=ne,E=0;E<1<<ce[me];E++)Me[ne++]=me;for(Me[ne-1]=me,D=0,me=0;me<16;me++)for(Re[me]=D,E=0;E<1<<Se[me];E++)Ye[D++]=me;for(D>>=7;me<T;me++)for(Re[me]=D<<7,E=0;E<1<<Se[me]-7;E++)Ye[256+D++]=me;for(q=0;q<=S;q++)V[q]=0;for(E=0;E<=143;)ae[E*2+1]=8,E++,V[8]++;for(;E<=255;)ae[E*2+1]=9,E++,V[9]++;for(;E<=279;)ae[E*2+1]=7,E++,V[7]++;for(;E<=287;)ae[E*2+1]=8,E++,V[8]++;for(G(ae,_+1,V),E=0;E<T;E++)Ae[E*2+1]=5,Ae[E*2]=A(E,5);ht=new Be(ae,ce,d+1,_,S),tt=new Be(Ae,Se,0,T,S),$e=new Be(new Array(0),Ee,0,N,z)}function ee(E){var q;for(q=0;q<_;q++)E.dyn_ltree[q*2]=0;for(q=0;q<T;q++)E.dyn_dtree[q*2]=0;for(q=0;q<N;q++)E.bl_tree[q*2]=0;E.dyn_ltree[$*2]=1,E.opt_len=E.static_len=0,E.last_lit=E.matches=0}function ue(E){E.bi_valid>8?qe(E,E.bi_buf):E.bi_valid>0&&(E.pending_buf[E.pending++]=E.bi_buf),E.bi_buf=0,E.bi_valid=0}function te(E,q,ne,me){ue(E),me&&(qe(E,ne),qe(E,~ne)),s.arraySet(E.pending_buf,E.window,q,ne,E.pending),E.pending+=ne}function re(E,q,ne,me){var D=q*2,V=ne*2;return E[D]<E[V]||E[D]===E[V]&&me[q]<=me[ne]}function X(E,q,ne){for(var me=E.heap[ne],D=ne<<1;D<=E.heap_len&&(D<E.heap_len&&re(q,E.heap[D+1],E.heap[D],E.depth)&&D++,!re(q,me,E.heap[D],E.depth));)E.heap[ne]=E.heap[D],ne=D,D<<=1;E.heap[ne]=me}function se(E,q,ne){var me,D,V=0,m,Q;if(E.last_lit!==0)do me=E.pending_buf[E.d_buf+V*2]<<8|E.pending_buf[E.d_buf+V*2+1],D=E.pending_buf[E.l_buf+V],V++,me===0?Ge(E,D,q):(m=Me[D],Ge(E,m+d+1,q),Q=ce[m],Q!==0&&(D-=be[m],Ue(E,D,Q)),me--,m=it(me),Ge(E,m,ne),Q=Se[m],Q!==0&&(me-=Re[m],Ue(E,me,Q)));while(V<E.last_lit);Ge(E,$,q)}function de(E,q){var ne=q.dyn_tree,me=q.stat_desc.static_tree,D=q.stat_desc.has_stree,V=q.stat_desc.elems,m,Q,Ce=-1,f;for(E.heap_len=0,E.heap_max=y,m=0;m<V;m++)ne[m*2]!==0?(E.heap[++E.heap_len]=Ce=m,E.depth[m]=0):ne[m*2+1]=0;for(;E.heap_len<2;)f=E.heap[++E.heap_len]=Ce<2?++Ce:0,ne[f*2]=1,E.depth[f]=0,E.opt_len--,D&&(E.static_len-=me[f*2+1]);for(q.max_code=Ce,m=E.heap_len>>1;m>=1;m--)X(E,ne,m);f=V;do m=E.heap[1],E.heap[1]=E.heap[E.heap_len--],X(E,ne,1),Q=E.heap[1],E.heap[--E.heap_max]=m,E.heap[--E.heap_max]=Q,ne[f*2]=ne[m*2]+ne[Q*2],E.depth[f]=(E.depth[m]>=E.depth[Q]?E.depth[m]:E.depth[Q])+1,ne[m*2+1]=ne[Q*2+1]=f,E.heap[1]=f++,X(E,ne,1);while(E.heap_len>=2);E.heap[--E.heap_max]=E.heap[1],W(E,q),G(ne,Ce,E.bl_count)}function _e(E,q,ne){var me,D=-1,V,m=q[0*2+1],Q=0,Ce=7,f=4;for(m===0&&(Ce=138,f=3),q[(ne+1)*2+1]=65535,me=0;me<=ne;me++)V=m,m=q[(me+1)*2+1],!(++Q<Ce&&V===m)&&(Q<f?E.bl_tree[V*2]+=Q:V!==0?(V!==D&&E.bl_tree[V*2]++,E.bl_tree[U*2]++):Q<=10?E.bl_tree[J*2]++:E.bl_tree[Y*2]++,Q=0,D=V,m===0?(Ce=138,f=3):V===m?(Ce=6,f=3):(Ce=7,f=4))}function Te(E,q,ne){var me,D=-1,V,m=q[0*2+1],Q=0,Ce=7,f=4;for(m===0&&(Ce=138,f=3),me=0;me<=ne;me++)if(V=m,m=q[(me+1)*2+1],!(++Q<Ce&&V===m)){if(Q<f)do Ge(E,V,E.bl_tree);while(--Q!=0);else V!==0?(V!==D&&(Ge(E,V,E.bl_tree),Q--),Ge(E,U,E.bl_tree),Ue(E,Q-3,2)):Q<=10?(Ge(E,J,E.bl_tree),Ue(E,Q-3,3)):(Ge(E,Y,E.bl_tree),Ue(E,Q-11,7));Q=0,D=V,m===0?(Ce=138,f=3):V===m?(Ce=6,f=3):(Ce=7,f=4)}}function ke(E){var q;for(_e(E,E.dyn_ltree,E.l_desc.max_code),_e(E,E.dyn_dtree,E.d_desc.max_code),de(E,E.bl_desc),q=N-1;q>=3&&E.bl_tree[ve[q]*2+1]===0;q--);return E.opt_len+=3*(q+1)+5+5+4,q}function We(E,q,ne,me){var D;for(Ue(E,q-257,5),Ue(E,ne-1,5),Ue(E,me-4,4),D=0;D<me;D++)Ue(E,E.bl_tree[ve[D]*2+1],3);Te(E,E.dyn_ltree,q-1),Te(E,E.dyn_dtree,ne-1)}function Oe(E){var q=4093624447,ne;for(ne=0;ne<=31;ne++,q>>>=1)if(q&1&&E.dyn_ltree[ne*2]!==0)return o;if(E.dyn_ltree[9*2]!==0||E.dyn_ltree[10*2]!==0||E.dyn_ltree[13*2]!==0)return l;for(ne=32;ne<d;ne++)if(E.dyn_ltree[ne*2]!==0)return l;return o}var Ne=!1;function st(E){Ne||(Z(),Ne=!0),E.l_desc=new Ie(E.dyn_ltree,ht),E.d_desc=new Ie(E.dyn_dtree,tt),E.bl_desc=new Ie(E.bl_tree,$e),E.bi_buf=0,E.bi_valid=0,ee(E)}function dt(E,q,ne,me){Ue(E,(c<<1)+(me?1:0),3),te(E,q,ne,!0)}function rt(E){Ue(E,v<<1,3),Ge(E,$,ae),L(E)}function ft(E,q,ne,me){var D,V,m=0;E.level>0?(E.strm.data_type===h&&(E.strm.data_type=Oe(E)),de(E,E.l_desc),de(E,E.d_desc),m=ke(E),D=E.opt_len+3+7>>>3,V=E.static_len+3+7>>>3,V<=D&&(D=V)):D=V=ne+5,ne+4<=D&&q!==-1?dt(E,q,ne,me):E.strategy===a||V===D?(Ue(E,(v<<1)+(me?1:0),3),se(E,ae,Ae)):(Ue(E,(g<<1)+(me?1:0),3),We(E,E.l_desc.max_code+1,E.d_desc.max_code+1,m+1),se(E,E.dyn_ltree,E.dyn_dtree)),ee(E),me&&ue(E)}function Mt(E,q,ne){return E.pending_buf[E.d_buf+E.last_lit*2]=q>>>8&255,E.pending_buf[E.d_buf+E.last_lit*2+1]=q&255,E.pending_buf[E.l_buf+E.last_lit]=ne&255,E.last_lit++,q===0?E.dyn_ltree[ne*2]++:(E.matches++,q--,E.dyn_ltree[(Me[ne]+d+1)*2]++,E.dyn_dtree[it(q)*2]++),E.last_lit===E.lit_bufsize-1}n._tr_init=st,n._tr_stored_block=dt,n._tr_flush_block=ft,n._tr_tally=Mt,n._tr_align=rt},{"../utils/common":41}],53:[function(t,r,n){function s(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}r.exports=s},{}],54:[function(t,r,n){r.exports=typeof setImmediate=="function"?setImmediate:function(){var a=[].slice.apply(arguments);a.splice(1,0,0),setTimeout.apply(null,a)}},{}]},{},[10])(10)})})(sh);var Qp=sh.exports;class ev{constructor(){this.zip=void 0,this.urlCache={},this.checkRequirements()}checkRequirements(){try{this.zip=new Qp}catch{throw new Error("JSZip lib not loaded")}}open(e,t){return this.zip.loadAsync(e,{base64:t})}openUrl(e,t){return Ir(e,"binary").then(function(r){return this.zip.loadAsync(r,{base64:t})}.bind(this))}request(e,t){var r=new je,n,s=new ai(e);return t||(t=s.extension),t=="blob"?n=this.getBlob(e):n=this.getText(e),n?n.then(function(a){let o=this.handleResponse(a,t);r.resolve(o)}.bind(this)):r.reject({message:"File not found in the epub: "+e,stack:new Error().stack}),r.promise}handleResponse(e,t){var r;return t=="json"?r=JSON.parse(e):mn(t)?r=si(e,"text/xml"):t=="xhtml"?r=si(e,"application/xhtml+xml"):t=="html"||t=="htm"?r=si(e,"text/html"):r=e,r}getBlob(e,t){var r=window.decodeURIComponent(e.substr(1)),n=this.zip.file(r);if(n)return t=t||tr.lookup(n.name),n.async("uint8array").then(function(s){return new Blob([s],{type:t})})}getText(e,t){var r=window.decodeURIComponent(e.substr(1)),n=this.zip.file(r);if(n)return n.async("string").then(function(s){return s})}getBase64(e,t){var r=window.decodeURIComponent(e.substr(1)),n=this.zip.file(r);if(n)return t=t||tr.lookup(n.name),n.async("base64").then(function(s){return"data:"+t+";base64,"+s})}createUrl(e,t){var r=new je,n=window.URL||window.webkitURL||window.mozURL,s,a,o=t&&t.base64;return e in this.urlCache?(r.resolve(this.urlCache[e]),r.promise):(o?(a=this.getBase64(e),a&&a.then(function(l){this.urlCache[e]=l,r.resolve(l)}.bind(this))):(a=this.getBlob(e),a&&a.then(function(l){s=n.createObjectURL(l),this.urlCache[e]=s,r.resolve(s)}.bind(this))),a||r.reject({message:"File not found in the epub: "+e,stack:new Error().stack}),r.promise)}revokeUrl(e){var t=window.URL||window.webkitURL||window.mozURL,r=this.urlCache[e];r&&t.revokeObjectURL(r)}destroy(){var e=window.URL||window.webkitURL||window.mozURL;for(let t in this.urlCache)e.revokeObjectURL(t);this.zip=void 0,this.urlCache={}}}var ah={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(i,e){(function(t){i.exports=t()})(function(){return function t(r,n,s){function a(h,u){if(!n[h]){if(!r[h]){var c=typeof di=="function"&&di;if(!u&&c)return c(h,!0);if(o)return o(h,!0);var v=new Error("Cannot find module '"+h+"'");throw v.code="MODULE_NOT_FOUND",v}var g=n[h]={exports:{}};r[h][0].call(g.exports,function(I){var w=r[h][1][I];return a(w||I)},g,g.exports,t,r,n,s)}return n[h].exports}for(var o=typeof di=="function"&&di,l=0;l<s.length;l++)a(s[l]);return a}({1:[function(t,r,n){(function(s){var a=s.MutationObserver||s.WebKitMutationObserver,o;if(a){var l=0,h=new a(I),u=s.document.createTextNode("");h.observe(u,{characterData:!0}),o=function(){u.data=l=++l%2}}else if(!s.setImmediate&&typeof s.MessageChannel!="undefined"){var c=new s.MessageChannel;c.port1.onmessage=I,o=function(){c.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?o=function(){var p=s.document.createElement("script");p.onreadystatechange=function(){I(),p.onreadystatechange=null,p.parentNode.removeChild(p),p=null},s.document.documentElement.appendChild(p)}:o=function(){setTimeout(I,0)};var v,g=[];function I(){v=!0;for(var p,d,_=g.length;_;){for(d=g,g=[],p=-1;++p<_;)d[p]();_=g.length}v=!1}r.exports=w;function w(p){g.push(p)===1&&!v&&o()}}).call(this,typeof Kt!="undefined"?Kt:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],2:[function(t,r,n){var s=t(1);function a(){}var o={},l=["REJECTED"],h=["FULFILLED"],u=["PENDING"];r.exports=c;function c(y){if(typeof y!="function")throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,y!==a&&w(this,y)}c.prototype.catch=function(y){return this.then(null,y)},c.prototype.then=function(y,S){if(typeof y!="function"&&this.state===h||typeof S!="function"&&this.state===l)return this;var k=new this.constructor(a);if(this.state!==u){var z=this.state===h?y:S;g(k,z,this.outcome)}else this.queue.push(new v(k,y,S));return k};function v(y,S,k){this.promise=y,typeof S=="function"&&(this.onFulfilled=S,this.callFulfilled=this.otherCallFulfilled),typeof k=="function"&&(this.onRejected=k,this.callRejected=this.otherCallRejected)}v.prototype.callFulfilled=function(y){o.resolve(this.promise,y)},v.prototype.otherCallFulfilled=function(y){g(this.promise,this.onFulfilled,y)},v.prototype.callRejected=function(y){o.reject(this.promise,y)},v.prototype.otherCallRejected=function(y){g(this.promise,this.onRejected,y)};function g(y,S,k){s(function(){var z;try{z=S(k)}catch($){return o.reject(y,$)}z===y?o.reject(y,new TypeError("Cannot resolve promise with itself")):o.resolve(y,z)})}o.resolve=function(y,S){var k=p(I,S);if(k.status==="error")return o.reject(y,k.value);var z=k.value;if(z)w(y,z);else{y.state=h,y.outcome=S;for(var $=-1,U=y.queue.length;++$<U;)y.queue[$].callFulfilled(S)}return y},o.reject=function(y,S){y.state=l,y.outcome=S;for(var k=-1,z=y.queue.length;++k<z;)y.queue[k].callRejected(S);return y};function I(y){var S=y&&y.then;if(y&&(typeof y=="object"||typeof y=="function")&&typeof S=="function")return function(){S.apply(y,arguments)}}function w(y,S){var k=!1;function z(Y){k||(k=!0,o.reject(y,Y))}function $(Y){k||(k=!0,o.resolve(y,Y))}function U(){S($,z)}var J=p(U);J.status==="error"&&z(J.value)}function p(y,S){var k={};try{k.value=y(S),k.status="success"}catch(z){k.status="error",k.value=z}return k}c.resolve=d;function d(y){return y instanceof this?y:o.resolve(new this(a),y)}c.reject=_;function _(y){var S=new this(a);return o.reject(S,y)}c.all=T;function T(y){var S=this;if(Object.prototype.toString.call(y)!=="[object Array]")return this.reject(new TypeError("must be an array"));var k=y.length,z=!1;if(!k)return this.resolve([]);for(var $=new Array(k),U=0,J=-1,Y=new this(a);++J<k;)ce(y[J],J);return Y;function ce(Se,Ee){S.resolve(Se).then(ve,function(he){z||(z=!0,o.reject(Y,he))});function ve(he){$[Ee]=he,++U===k&&!z&&(z=!0,o.resolve(Y,$))}}}c.race=N;function N(y){var S=this;if(Object.prototype.toString.call(y)!=="[object Array]")return this.reject(new TypeError("must be an array"));var k=y.length,z=!1;if(!k)return this.resolve([]);for(var $=-1,U=new this(a);++$<k;)J(y[$]);return U;function J(Y){S.resolve(Y).then(function(ce){z||(z=!0,o.resolve(U,ce))},function(ce){z||(z=!0,o.reject(U,ce))})}}},{"1":1}],3:[function(t,r,n){(function(s){typeof s.Promise!="function"&&(s.Promise=t(2))}).call(this,typeof Kt!="undefined"?Kt:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"2":2}],4:[function(t,r,n){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x};function a(x,O){if(!(x instanceof O))throw new TypeError("Cannot call a class as a function")}function o(){try{if(typeof indexedDB!="undefined")return indexedDB;if(typeof webkitIndexedDB!="undefined")return webkitIndexedDB;if(typeof mozIndexedDB!="undefined")return mozIndexedDB;if(typeof OIndexedDB!="undefined")return OIndexedDB;if(typeof msIndexedDB!="undefined")return msIndexedDB}catch{return}}var l=o();function h(){try{if(!l||!l.open)return!1;var x=typeof openDatabase!="undefined"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),O=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!x||O)&&typeof indexedDB!="undefined"&&typeof IDBKeyRange!="undefined"}catch{return!1}}function u(x,O){x=x||[],O=O||{};try{return new Blob(x,O)}catch(P){if(P.name!=="TypeError")throw P;for(var C=typeof BlobBuilder!="undefined"?BlobBuilder:typeof MSBlobBuilder!="undefined"?MSBlobBuilder:typeof MozBlobBuilder!="undefined"?MozBlobBuilder:WebKitBlobBuilder,M=new C,B=0;B<x.length;B+=1)M.append(x[B]);return M.getBlob(O.type)}}typeof Promise=="undefined"&&t(3);var c=Promise;function v(x,O){O&&x.then(function(C){O(null,C)},function(C){O(C)})}function g(x,O,C){typeof O=="function"&&x.then(O),typeof C=="function"&&x.catch(C)}function I(x){return typeof x!="string"&&(console.warn(x+" used as a key, but it is not a string."),x=String(x)),x}function w(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var p="local-forage-detect-blob-support",d=void 0,_={},T=Object.prototype.toString,N="readonly",y="readwrite";function S(x){for(var O=x.length,C=new ArrayBuffer(O),M=new Uint8Array(C),B=0;B<O;B++)M[B]=x.charCodeAt(B);return C}function k(x){return new c(function(O){var C=x.transaction(p,y),M=u([""]);C.objectStore(p).put(M,"key"),C.onabort=function(B){B.preventDefault(),B.stopPropagation(),O(!1)},C.oncomplete=function(){var B=navigator.userAgent.match(/Chrome\/(\d+)/),P=navigator.userAgent.match(/Edge\//);O(P||!B||parseInt(B[1],10)>=43)}}).catch(function(){return!1})}function z(x){return typeof d=="boolean"?c.resolve(d):k(x).then(function(O){return d=O,d})}function $(x){var O=_[x.name],C={};C.promise=new c(function(M,B){C.resolve=M,C.reject=B}),O.deferredOperations.push(C),O.dbReady?O.dbReady=O.dbReady.then(function(){return C.promise}):O.dbReady=C.promise}function U(x){var O=_[x.name],C=O.deferredOperations.pop();if(C)return C.resolve(),C.promise}function J(x,O){var C=_[x.name],M=C.deferredOperations.pop();if(M)return M.reject(O),M.promise}function Y(x,O){return new c(function(C,M){if(_[x.name]=_[x.name]||be(),x.db)if(O)$(x),x.db.close();else return C(x.db);var B=[x.name];O&&B.push(x.version);var P=l.open.apply(l,B);O&&(P.onupgradeneeded=function(K){var ie=P.result;try{ie.createObjectStore(x.storeName),K.oldVersion<=1&&ie.createObjectStore(p)}catch(oe){if(oe.name==="ConstraintError")console.warn('The database "'+x.name+'" has been upgraded from version '+K.oldVersion+" to version "+K.newVersion+', but the storage "'+x.storeName+'" already exists.');else throw oe}}),P.onerror=function(K){K.preventDefault(),M(P.error)},P.onsuccess=function(){var K=P.result;K.onversionchange=function(ie){ie.target.close()},C(K),U(x)}})}function ce(x){return Y(x,!1)}function Se(x){return Y(x,!0)}function Ee(x,O){if(!x.db)return!0;var C=!x.db.objectStoreNames.contains(x.storeName),M=x.version<x.db.version,B=x.version>x.db.version;if(M&&(x.version!==O&&console.warn('The database "'+x.name+`" can't be downgraded from version `+x.db.version+" to version "+x.version+"."),x.version=x.db.version),B||C){if(C){var P=x.db.version+1;P>x.version&&(x.version=P)}return!0}return!1}function ve(x){return new c(function(O,C){var M=new FileReader;M.onerror=C,M.onloadend=function(B){var P=btoa(B.target.result||"");O({__local_forage_encoded_blob:!0,data:P,type:x.type})},M.readAsBinaryString(x)})}function he(x){var O=S(atob(x.data));return u([O],{type:x.type})}function ae(x){return x&&x.__local_forage_encoded_blob}function Ae(x){var O=this,C=O._initReady().then(function(){var M=_[O._dbInfo.name];if(M&&M.dbReady)return M.dbReady});return g(C,x,x),C}function Ye(x){$(x);for(var O=_[x.name],C=O.forages,M=0;M<C.length;M++){var B=C[M];B._dbInfo.db&&(B._dbInfo.db.close(),B._dbInfo.db=null)}return x.db=null,ce(x).then(function(P){return x.db=P,Ee(x)?Se(x):P}).then(function(P){x.db=O.db=P;for(var K=0;K<C.length;K++)C[K]._dbInfo.db=P}).catch(function(P){throw J(x,P),P})}function Me(x,O,C,M){M===void 0&&(M=1);try{var B=x.db.transaction(x.storeName,O);C(null,B)}catch(P){if(M>0&&(!x.db||P.name==="InvalidStateError"||P.name==="NotFoundError"))return c.resolve().then(function(){if(!x.db||P.name==="NotFoundError"&&!x.db.objectStoreNames.contains(x.storeName)&&x.version<=x.db.version)return x.db&&(x.version=x.db.version+1),Se(x)}).then(function(){return Ye(x).then(function(){Me(x,O,C,M-1)})}).catch(C);C(P)}}function be(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function Re(x){var O=this,C={db:null};if(x)for(var M in x)C[M]=x[M];var B=_[C.name];B||(B=be(),_[C.name]=B),B.forages.push(O),O._initReady||(O._initReady=O.ready,O.ready=Ae);var P=[];function K(){return c.resolve()}for(var ie=0;ie<B.forages.length;ie++){var oe=B.forages[ie];oe!==O&&P.push(oe._initReady().catch(K))}var le=B.forages.slice(0);return c.all(P).then(function(){return C.db=B.db,ce(C)}).then(function(fe){return C.db=fe,Ee(C,O._defaultConfig.version)?Se(C):fe}).then(function(fe){C.db=B.db=fe,O._dbInfo=C;for(var xe=0;xe<le.length;xe++){var Le=le[xe];Le!==O&&(Le._dbInfo.db=C.db,Le._dbInfo.version=C.version)}})}function Be(x,O){var C=this;x=I(x);var M=new c(function(B,P){C.ready().then(function(){Me(C._dbInfo,N,function(K,ie){if(K)return P(K);try{var oe=ie.objectStore(C._dbInfo.storeName),le=oe.get(x);le.onsuccess=function(){var fe=le.result;fe===void 0&&(fe=null),ae(fe)&&(fe=he(fe)),B(fe)},le.onerror=function(){P(le.error)}}catch(fe){P(fe)}})}).catch(P)});return v(M,O),M}function ht(x,O){var C=this,M=new c(function(B,P){C.ready().then(function(){Me(C._dbInfo,N,function(K,ie){if(K)return P(K);try{var oe=ie.objectStore(C._dbInfo.storeName),le=oe.openCursor(),fe=1;le.onsuccess=function(){var xe=le.result;if(xe){var Le=xe.value;ae(Le)&&(Le=he(Le));var Xe=x(Le,xe.key,fe++);Xe!==void 0?B(Xe):xe.continue()}else B()},le.onerror=function(){P(le.error)}}catch(xe){P(xe)}})}).catch(P)});return v(M,O),M}function tt(x,O,C){var M=this;x=I(x);var B=new c(function(P,K){var ie;M.ready().then(function(){return ie=M._dbInfo,T.call(O)==="[object Blob]"?z(ie.db).then(function(oe){return oe?O:ve(O)}):O}).then(function(oe){Me(M._dbInfo,y,function(le,fe){if(le)return K(le);try{var xe=fe.objectStore(M._dbInfo.storeName);oe===null&&(oe=void 0);var Le=xe.put(oe,x);fe.oncomplete=function(){oe===void 0&&(oe=null),P(oe)},fe.onabort=fe.onerror=function(){var Xe=Le.error?Le.error:Le.transaction.error;K(Xe)}}catch(Xe){K(Xe)}})}).catch(K)});return v(B,C),B}function $e(x,O){var C=this;x=I(x);var M=new c(function(B,P){C.ready().then(function(){Me(C._dbInfo,y,function(K,ie){if(K)return P(K);try{var oe=ie.objectStore(C._dbInfo.storeName),le=oe.delete(x);ie.oncomplete=function(){B()},ie.onerror=function(){P(le.error)},ie.onabort=function(){var fe=le.error?le.error:le.transaction.error;P(fe)}}catch(fe){P(fe)}})}).catch(P)});return v(M,O),M}function Ie(x){var O=this,C=new c(function(M,B){O.ready().then(function(){Me(O._dbInfo,y,function(P,K){if(P)return B(P);try{var ie=K.objectStore(O._dbInfo.storeName),oe=ie.clear();K.oncomplete=function(){M()},K.onabort=K.onerror=function(){var le=oe.error?oe.error:oe.transaction.error;B(le)}}catch(le){B(le)}})}).catch(B)});return v(C,x),C}function it(x){var O=this,C=new c(function(M,B){O.ready().then(function(){Me(O._dbInfo,N,function(P,K){if(P)return B(P);try{var ie=K.objectStore(O._dbInfo.storeName),oe=ie.count();oe.onsuccess=function(){M(oe.result)},oe.onerror=function(){B(oe.error)}}catch(le){B(le)}})}).catch(B)});return v(C,x),C}function qe(x,O){var C=this,M=new c(function(B,P){if(x<0){B(null);return}C.ready().then(function(){Me(C._dbInfo,N,function(K,ie){if(K)return P(K);try{var oe=ie.objectStore(C._dbInfo.storeName),le=!1,fe=oe.openKeyCursor();fe.onsuccess=function(){var xe=fe.result;if(!xe){B(null);return}x===0||le?B(xe.key):(le=!0,xe.advance(x))},fe.onerror=function(){P(fe.error)}}catch(xe){P(xe)}})}).catch(P)});return v(M,O),M}function Ue(x){var O=this,C=new c(function(M,B){O.ready().then(function(){Me(O._dbInfo,N,function(P,K){if(P)return B(P);try{var ie=K.objectStore(O._dbInfo.storeName),oe=ie.openKeyCursor(),le=[];oe.onsuccess=function(){var fe=oe.result;if(!fe){M(le);return}le.push(fe.key),fe.continue()},oe.onerror=function(){B(oe.error)}}catch(fe){B(fe)}})}).catch(B)});return v(C,x),C}function Ge(x,O){O=w.apply(this,arguments);var C=this.config();x=typeof x!="function"&&x||{},x.name||(x.name=x.name||C.name,x.storeName=x.storeName||C.storeName);var M=this,B;if(!x.name)B=c.reject("Invalid arguments");else{var P=x.name===C.name&&M._dbInfo.db,K=P?c.resolve(M._dbInfo.db):ce(x).then(function(ie){var oe=_[x.name],le=oe.forages;oe.db=ie;for(var fe=0;fe<le.length;fe++)le[fe]._dbInfo.db=ie;return ie});x.storeName?B=K.then(function(ie){if(!!ie.objectStoreNames.contains(x.storeName)){var oe=ie.version+1;$(x);var le=_[x.name],fe=le.forages;ie.close();for(var xe=0;xe<fe.length;xe++){var Le=fe[xe];Le._dbInfo.db=null,Le._dbInfo.version=oe}var Xe=new c(function(Ke,ut){var ot=l.open(x.name,oe);ot.onerror=function(Lt){var rr=ot.result;rr.close(),ut(Lt)},ot.onupgradeneeded=function(){var Lt=ot.result;Lt.deleteObjectStore(x.storeName)},ot.onsuccess=function(){var Lt=ot.result;Lt.close(),Ke(Lt)}});return Xe.then(function(Ke){le.db=Ke;for(var ut=0;ut<fe.length;ut++){var ot=fe[ut];ot._dbInfo.db=Ke,U(ot._dbInfo)}}).catch(function(Ke){throw(J(x,Ke)||c.resolve()).catch(function(){}),Ke})}}):B=K.then(function(ie){$(x);var oe=_[x.name],le=oe.forages;ie.close();for(var fe=0;fe<le.length;fe++){var xe=le[fe];xe._dbInfo.db=null}var Le=new c(function(Xe,Ke){var ut=l.deleteDatabase(x.name);ut.onerror=function(){var ot=ut.result;ot&&ot.close(),Ke(ut.error)},ut.onblocked=function(){console.warn('dropInstance blocked for database "'+x.name+'" until all open connections are closed')},ut.onsuccess=function(){var ot=ut.result;ot&&ot.close(),Xe(ot)}});return Le.then(function(Xe){oe.db=Xe;for(var Ke=0;Ke<le.length;Ke++){var ut=le[Ke];U(ut._dbInfo)}}).catch(function(Xe){throw(J(x,Xe)||c.resolve()).catch(function(){}),Xe})})}return v(B,O),B}var A={_driver:"asyncStorage",_initStorage:Re,_support:h(),iterate:ht,getItem:Be,setItem:tt,removeItem:$e,clear:Ie,length:it,key:qe,keys:Ue,dropInstance:Ge};function L(){return typeof openDatabase=="function"}var W="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",G="~~local_forage_type~",Z=/^~~local_forage_type~([^~]+)~/,ee="__lfsc__:",ue=ee.length,te="arbf",re="blob",X="si08",se="ui08",de="uic8",_e="si16",Te="si32",ke="ur16",We="ui32",Oe="fl32",Ne="fl64",st=ue+te.length,dt=Object.prototype.toString;function rt(x){var O=x.length*.75,C=x.length,M,B=0,P,K,ie,oe;x[x.length-1]==="="&&(O--,x[x.length-2]==="="&&O--);var le=new ArrayBuffer(O),fe=new Uint8Array(le);for(M=0;M<C;M+=4)P=W.indexOf(x[M]),K=W.indexOf(x[M+1]),ie=W.indexOf(x[M+2]),oe=W.indexOf(x[M+3]),fe[B++]=P<<2|K>>4,fe[B++]=(K&15)<<4|ie>>2,fe[B++]=(ie&3)<<6|oe&63;return le}function ft(x){var O=new Uint8Array(x),C="",M;for(M=0;M<O.length;M+=3)C+=W[O[M]>>2],C+=W[(O[M]&3)<<4|O[M+1]>>4],C+=W[(O[M+1]&15)<<2|O[M+2]>>6],C+=W[O[M+2]&63];return O.length%3==2?C=C.substring(0,C.length-1)+"=":O.length%3==1&&(C=C.substring(0,C.length-2)+"=="),C}function Mt(x,O){var C="";if(x&&(C=dt.call(x)),x&&(C==="[object ArrayBuffer]"||x.buffer&&dt.call(x.buffer)==="[object ArrayBuffer]")){var M,B=ee;x instanceof ArrayBuffer?(M=x,B+=te):(M=x.buffer,C==="[object Int8Array]"?B+=X:C==="[object Uint8Array]"?B+=se:C==="[object Uint8ClampedArray]"?B+=de:C==="[object Int16Array]"?B+=_e:C==="[object Uint16Array]"?B+=ke:C==="[object Int32Array]"?B+=Te:C==="[object Uint32Array]"?B+=We:C==="[object Float32Array]"?B+=Oe:C==="[object Float64Array]"?B+=Ne:O(new Error("Failed to get type for BinaryArray"))),O(B+ft(M))}else if(C==="[object Blob]"){var P=new FileReader;P.onload=function(){var K=G+x.type+"~"+ft(this.result);O(ee+re+K)},P.readAsArrayBuffer(x)}else try{O(JSON.stringify(x))}catch(K){console.error("Couldn't convert value into a JSON string: ",x),O(null,K)}}function E(x){if(x.substring(0,ue)!==ee)return JSON.parse(x);var O=x.substring(st),C=x.substring(ue,st),M;if(C===re&&Z.test(O)){var B=O.match(Z);M=B[1],O=O.substring(B[0].length)}var P=rt(O);switch(C){case te:return P;case re:return u([P],{type:M});case X:return new Int8Array(P);case se:return new Uint8Array(P);case de:return new Uint8ClampedArray(P);case _e:return new Int16Array(P);case ke:return new Uint16Array(P);case Te:return new Int32Array(P);case We:return new Uint32Array(P);case Oe:return new Float32Array(P);case Ne:return new Float64Array(P);default:throw new Error("Unkown type: "+C)}}var q={serialize:Mt,deserialize:E,stringToBuffer:rt,bufferToString:ft};function ne(x,O,C,M){x.executeSql("CREATE TABLE IF NOT EXISTS "+O.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],C,M)}function me(x){var O=this,C={db:null};if(x)for(var M in x)C[M]=typeof x[M]!="string"?x[M].toString():x[M];var B=new c(function(P,K){try{C.db=openDatabase(C.name,String(C.version),C.description,C.size)}catch(ie){return K(ie)}C.db.transaction(function(ie){ne(ie,C,function(){O._dbInfo=C,P()},function(oe,le){K(le)})},K)});return C.serializer=q,B}function D(x,O,C,M,B,P){x.executeSql(C,M,B,function(K,ie){ie.code===ie.SYNTAX_ERR?K.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[O.storeName],function(oe,le){le.rows.length?P(oe,ie):ne(oe,O,function(){oe.executeSql(C,M,B,P)},P)},P):P(K,ie)},P)}function V(x,O){var C=this;x=I(x);var M=new c(function(B,P){C.ready().then(function(){var K=C._dbInfo;K.db.transaction(function(ie){D(ie,K,"SELECT * FROM "+K.storeName+" WHERE key = ? LIMIT 1",[x],function(oe,le){var fe=le.rows.length?le.rows.item(0).value:null;fe&&(fe=K.serializer.deserialize(fe)),B(fe)},function(oe,le){P(le)})})}).catch(P)});return v(M,O),M}function m(x,O){var C=this,M=new c(function(B,P){C.ready().then(function(){var K=C._dbInfo;K.db.transaction(function(ie){D(ie,K,"SELECT * FROM "+K.storeName,[],function(oe,le){for(var fe=le.rows,xe=fe.length,Le=0;Le<xe;Le++){var Xe=fe.item(Le),Ke=Xe.value;if(Ke&&(Ke=K.serializer.deserialize(Ke)),Ke=x(Ke,Xe.key,Le+1),Ke!==void 0){B(Ke);return}}B()},function(oe,le){P(le)})})}).catch(P)});return v(M,O),M}function Q(x,O,C,M){var B=this;x=I(x);var P=new c(function(K,ie){B.ready().then(function(){O===void 0&&(O=null);var oe=O,le=B._dbInfo;le.serializer.serialize(O,function(fe,xe){xe?ie(xe):le.db.transaction(function(Le){D(Le,le,"INSERT OR REPLACE INTO "+le.storeName+" (key, value) VALUES (?, ?)",[x,fe],function(){K(oe)},function(Xe,Ke){ie(Ke)})},function(Le){if(Le.code===Le.QUOTA_ERR){if(M>0){K(Q.apply(B,[x,oe,C,M-1]));return}ie(Le)}})})}).catch(ie)});return v(P,C),P}function Ce(x,O,C){return Q.apply(this,[x,O,C,1])}function f(x,O){var C=this;x=I(x);var M=new c(function(B,P){C.ready().then(function(){var K=C._dbInfo;K.db.transaction(function(ie){D(ie,K,"DELETE FROM "+K.storeName+" WHERE key = ?",[x],function(){B()},function(oe,le){P(le)})})}).catch(P)});return v(M,O),M}function j(x){var O=this,C=new c(function(M,B){O.ready().then(function(){var P=O._dbInfo;P.db.transaction(function(K){D(K,P,"DELETE FROM "+P.storeName,[],function(){M()},function(ie,oe){B(oe)})})}).catch(B)});return v(C,x),C}function H(x){var O=this,C=new c(function(M,B){O.ready().then(function(){var P=O._dbInfo;P.db.transaction(function(K){D(K,P,"SELECT COUNT(key) as c FROM "+P.storeName,[],function(ie,oe){var le=oe.rows.item(0).c;M(le)},function(ie,oe){B(oe)})})}).catch(B)});return v(C,x),C}function b(x,O){var C=this,M=new c(function(B,P){C.ready().then(function(){var K=C._dbInfo;K.db.transaction(function(ie){D(ie,K,"SELECT key FROM "+K.storeName+" WHERE id = ? LIMIT 1",[x+1],function(oe,le){var fe=le.rows.length?le.rows.item(0).key:null;B(fe)},function(oe,le){P(le)})})}).catch(P)});return v(M,O),M}function R(x){var O=this,C=new c(function(M,B){O.ready().then(function(){var P=O._dbInfo;P.db.transaction(function(K){D(K,P,"SELECT key FROM "+P.storeName,[],function(ie,oe){for(var le=[],fe=0;fe<oe.rows.length;fe++)le.push(oe.rows.item(fe).key);M(le)},function(ie,oe){B(oe)})})}).catch(B)});return v(C,x),C}function F(x){return new c(function(O,C){x.transaction(function(M){M.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(B,P){for(var K=[],ie=0;ie<P.rows.length;ie++)K.push(P.rows.item(ie).name);O({db:x,storeNames:K})},function(B,P){C(P)})},function(M){C(M)})})}function we(x,O){O=w.apply(this,arguments);var C=this.config();x=typeof x!="function"&&x||{},x.name||(x.name=x.name||C.name,x.storeName=x.storeName||C.storeName);var M=this,B;return x.name?B=new c(function(P){var K;x.name===C.name?K=M._dbInfo.db:K=openDatabase(x.name,"","",0),x.storeName?P({db:K,storeNames:[x.storeName]}):P(F(K))}).then(function(P){return new c(function(K,ie){P.db.transaction(function(oe){function le(Xe){return new c(function(Ke,ut){oe.executeSql("DROP TABLE IF EXISTS "+Xe,[],function(){Ke()},function(ot,Lt){ut(Lt)})})}for(var fe=[],xe=0,Le=P.storeNames.length;xe<Le;xe++)fe.push(le(P.storeNames[xe]));c.all(fe).then(function(){K()}).catch(function(Xe){ie(Xe)})},function(oe){ie(oe)})})}):B=c.reject("Invalid arguments"),v(B,O),B}var ge={_driver:"webSQLStorage",_initStorage:me,_support:L(),iterate:m,getItem:V,setItem:Ce,removeItem:f,clear:j,length:H,key:b,keys:R,dropInstance:we};function ye(){try{return typeof localStorage!="undefined"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function Pe(x,O){var C=x.name+"/";return x.storeName!==O.storeName&&(C+=x.storeName+"/"),C}function Bt(){var x="_localforage_support_test";try{return localStorage.setItem(x,!0),localStorage.removeItem(x),!1}catch{return!0}}function et(){return!Bt()||localStorage.length>0}function Fe(x){var O=this,C={};if(x)for(var M in x)C[M]=x[M];return C.keyPrefix=Pe(x,O._defaultConfig),et()?(O._dbInfo=C,C.serializer=q,c.resolve()):c.reject()}function at(x){var O=this,C=O.ready().then(function(){for(var M=O._dbInfo.keyPrefix,B=localStorage.length-1;B>=0;B--){var P=localStorage.key(B);P.indexOf(M)===0&&localStorage.removeItem(P)}});return v(C,x),C}function pt(x,O){var C=this;x=I(x);var M=C.ready().then(function(){var B=C._dbInfo,P=localStorage.getItem(B.keyPrefix+x);return P&&(P=B.serializer.deserialize(P)),P});return v(M,O),M}function mt(x,O){var C=this,M=C.ready().then(function(){for(var B=C._dbInfo,P=B.keyPrefix,K=P.length,ie=localStorage.length,oe=1,le=0;le<ie;le++){var fe=localStorage.key(le);if(fe.indexOf(P)===0){var xe=localStorage.getItem(fe);if(xe&&(xe=B.serializer.deserialize(xe)),xe=x(xe,fe.substring(K),oe++),xe!==void 0)return xe}}});return v(M,O),M}function Oi(x,O){var C=this,M=C.ready().then(function(){var B=C._dbInfo,P;try{P=localStorage.key(x)}catch{P=null}return P&&(P=P.substring(B.keyPrefix.length)),P});return v(M,O),M}function Ri(x){var O=this,C=O.ready().then(function(){for(var M=O._dbInfo,B=localStorage.length,P=[],K=0;K<B;K++){var ie=localStorage.key(K);ie.indexOf(M.keyPrefix)===0&&P.push(ie.substring(M.keyPrefix.length))}return P});return v(C,x),C}function nt(x){var O=this,C=O.keys().then(function(M){return M.length});return v(C,x),C}function Ct(x,O){var C=this;x=I(x);var M=C.ready().then(function(){var B=C._dbInfo;localStorage.removeItem(B.keyPrefix+x)});return v(M,O),M}function ct(x,O,C){var M=this;x=I(x);var B=M.ready().then(function(){O===void 0&&(O=null);var P=O;return new c(function(K,ie){var oe=M._dbInfo;oe.serializer.serialize(O,function(le,fe){if(fe)ie(fe);else try{localStorage.setItem(oe.keyPrefix+x,le),K(P)}catch(xe){(xe.name==="QuotaExceededError"||xe.name==="NS_ERROR_DOM_QUOTA_REACHED")&&ie(xe),ie(xe)}})})});return v(B,C),B}function Ft(x,O){if(O=w.apply(this,arguments),x=typeof x!="function"&&x||{},!x.name){var C=this.config();x.name=x.name||C.name,x.storeName=x.storeName||C.storeName}var M=this,B;return x.name?B=new c(function(P){x.storeName?P(Pe(x,M._defaultConfig)):P(x.name+"/")}).then(function(P){for(var K=localStorage.length-1;K>=0;K--){var ie=localStorage.key(K);ie.indexOf(P)===0&&localStorage.removeItem(ie)}}):B=c.reject("Invalid arguments"),v(B,O),B}var Rt={_driver:"localStorageWrapper",_initStorage:Fe,_support:ye(),iterate:mt,getItem:pt,setItem:ct,removeItem:Ct,clear:at,length:nt,key:Oi,keys:Ri,dropInstance:Ft},Dr=function(O,C){return O===C||typeof O=="number"&&typeof C=="number"&&isNaN(O)&&isNaN(C)},ch=function(O,C){for(var M=O.length,B=0;B<M;){if(Dr(O[B],C))return!0;B++}return!1},oa=Array.isArray||function(x){return Object.prototype.toString.call(x)==="[object Array]"},ir={},la={},Li={INDEXEDDB:A,WEBSQL:ge,LOCALSTORAGE:Rt},dh=[Li.INDEXEDDB._driver,Li.WEBSQL._driver,Li.LOCALSTORAGE._driver],Pr=["dropInstance"],Cn=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Pr),ph={description:"",driver:dh.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function vh(x,O){x[O]=function(){var C=arguments;return x.ready().then(function(){return x[O].apply(x,C)})}}function kn(){for(var x=1;x<arguments.length;x++){var O=arguments[x];if(O)for(var C in O)O.hasOwnProperty(C)&&(oa(O[C])?arguments[0][C]=O[C].slice():arguments[0][C]=O[C])}return arguments[0]}var gh=function(){function x(O){a(this,x);for(var C in Li)if(Li.hasOwnProperty(C)){var M=Li[C],B=M._driver;this[C]=B,ir[B]||this.defineDriver(M)}this._defaultConfig=kn({},ph),this._config=kn({},this._defaultConfig,O),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return x.prototype.config=function(C){if((typeof C=="undefined"?"undefined":s(C))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var M in C){if(M==="storeName"&&(C[M]=C[M].replace(/\W/g,"_")),M==="version"&&typeof C[M]!="number")return new Error("Database version must be a number.");this._config[M]=C[M]}return"driver"in C&&C.driver?this.setDriver(this._config.driver):!0}else return typeof C=="string"?this._config[C]:this._config},x.prototype.defineDriver=function(C,M,B){var P=new c(function(K,ie){try{var oe=C._driver,le=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!C._driver){ie(le);return}for(var fe=Cn.concat("_initStorage"),xe=0,Le=fe.length;xe<Le;xe++){var Xe=fe[xe],Ke=!ch(Pr,Xe);if((Ke||C[Xe])&&typeof C[Xe]!="function"){ie(le);return}}var ut=function(){for(var rr=function(_h){return function(){var bh=new Error("Method "+_h+" is not implemented by the current driver"),ha=c.reject(bh);return v(ha,arguments[arguments.length-1]),ha}},An=0,yh=Pr.length;An<yh;An++){var In=Pr[An];C[In]||(C[In]=rr(In))}};ut();var ot=function(rr){ir[oe]&&console.info("Redefining LocalForage driver: "+oe),ir[oe]=C,la[oe]=rr,K()};"_support"in C?C._support&&typeof C._support=="function"?C._support().then(ot,ie):ot(!!C._support):ot(!0)}catch(Lt){ie(Lt)}});return g(P,M,B),P},x.prototype.driver=function(){return this._driver||null},x.prototype.getDriver=function(C,M,B){var P=ir[C]?c.resolve(ir[C]):c.reject(new Error("Driver not found."));return g(P,M,B),P},x.prototype.getSerializer=function(C){var M=c.resolve(q);return g(M,C),M},x.prototype.ready=function(C){var M=this,B=M._driverSet.then(function(){return M._ready===null&&(M._ready=M._initDriver()),M._ready});return g(B,C,C),B},x.prototype.setDriver=function(C,M,B){var P=this;oa(C)||(C=[C]);var K=this._getSupportedDrivers(C);function ie(){P._config.driver=P.driver()}function oe(xe){return P._extend(xe),ie(),P._ready=P._initStorage(P._config),P._ready}function le(xe){return function(){var Le=0;function Xe(){for(;Le<xe.length;){var Ke=xe[Le];return Le++,P._dbInfo=null,P._ready=null,P.getDriver(Ke).then(oe).catch(Xe)}ie();var ut=new Error("No available storage method found.");return P._driverSet=c.reject(ut),P._driverSet}return Xe()}}var fe=this._driverSet!==null?this._driverSet.catch(function(){return c.resolve()}):c.resolve();return this._driverSet=fe.then(function(){var xe=K[0];return P._dbInfo=null,P._ready=null,P.getDriver(xe).then(function(Le){P._driver=Le._driver,ie(),P._wrapLibraryMethodsWithReady(),P._initDriver=le(K)})}).catch(function(){ie();var xe=new Error("No available storage method found.");return P._driverSet=c.reject(xe),P._driverSet}),g(this._driverSet,M,B),this._driverSet},x.prototype.supports=function(C){return!!la[C]},x.prototype._extend=function(C){kn(this,C)},x.prototype._getSupportedDrivers=function(C){for(var M=[],B=0,P=C.length;B<P;B++){var K=C[B];this.supports(K)&&M.push(K)}return M},x.prototype._wrapLibraryMethodsWithReady=function(){for(var C=0,M=Cn.length;C<M;C++)vh(this,Cn[C])},x.prototype.createInstance=function(C){return new x(C)},x}(),mh=new gh;r.exports=mh},{"3":3}]},{},[4])(4)})})(ah);var oh=ah.exports;class lh{constructor(e,t,r){this.urlCache={},this.storage=void 0,this.name=e,this.requester=t||Ir,this.resolver=r,this.online=!0,this.checkRequirements(),this.addListeners()}checkRequirements(){try{let e;typeof oh=="undefined"&&(e=oh),this.storage=e.createInstance({name:this.name})}catch{throw new Error("localForage lib not loaded")}}addListeners(){this._status=this.status.bind(this),window.addEventListener("online",this._status),window.addEventListener("offline",this._status)}removeListeners(){window.removeEventListener("online",this._status),window.removeEventListener("offline",this._status),this._status=void 0}status(e){let t=navigator.onLine;this.online=t,t?this.emit("online",this):this.emit("offline",this)}add(e,t){let r=e.resources.map(n=>{let{href:s}=n,a=this.resolver(s),o=window.encodeURIComponent(a);return this.storage.getItem(o).then(l=>!l||t?this.requester(a,"binary").then(h=>this.storage.setItem(o,h)):l)});return Promise.all(r)}put(e,t,r){let n=window.encodeURIComponent(e);return this.storage.getItem(n).then(s=>s||this.requester(e,"binary",t,r).then(a=>this.storage.setItem(n,a)))}request(e,t,r,n){return this.online?this.requester(e,t,r,n).then(s=>(this.put(e),s)):this.retrieve(e,t)}retrieve(e,t){new je;var r,n=new ai(e);return t||(t=n.extension),t=="blob"?r=this.getBlob(e):r=this.getText(e),r.then(s=>{var a=new je,o;return s?(o=this.handleResponse(s,t),a.resolve(o)):a.reject({message:"File not found in storage: "+e,stack:new Error().stack}),a.promise})}handleResponse(e,t){var r;return t=="json"?r=JSON.parse(e):mn(t)?r=si(e,"text/xml"):t=="xhtml"?r=si(e,"application/xhtml+xml"):t=="html"||t=="htm"?r=si(e,"text/html"):r=e,r}getBlob(e,t){let r=window.encodeURIComponent(e);return this.storage.getItem(r).then(function(n){if(!!n)return t=t||tr.lookup(e),new Blob([n],{type:t})})}getText(e,t){let r=window.encodeURIComponent(e);return t=t||tr.lookup(e),this.storage.getItem(r).then(function(n){var s=new je,a=new FileReader,o;if(!!n)return o=new Blob([n],{type:t}),a.addEventListener("loadend",()=>{s.resolve(a.result)}),a.readAsText(o,t),s.promise})}getBase64(e,t){let r=window.encodeURIComponent(e);return t=t||tr.lookup(e),this.storage.getItem(r).then(n=>{var s=new je,a=new FileReader,o;if(!!n)return o=new Blob([n],{type:t}),a.addEventListener("loadend",()=>{s.resolve(a.result)}),a.readAsDataURL(o,t),s.promise})}createUrl(e,t){var r=new je,n=window.URL||window.webkitURL||window.mozURL,s,a,o=t&&t.base64;return e in this.urlCache?(r.resolve(this.urlCache[e]),r.promise):(o?(a=this.getBase64(e),a&&a.then(function(l){this.urlCache[e]=l,r.resolve(l)}.bind(this))):(a=this.getBlob(e),a&&a.then(function(l){s=n.createObjectURL(l),this.urlCache[e]=s,r.resolve(s)}.bind(this))),a||r.reject({message:"File not found in storage: "+e,stack:new Error().stack}),r.promise)}revokeUrl(e){var t=window.URL||window.webkitURL||window.mozURL,r=this.urlCache[e];r&&t.revokeObjectURL(r)}destroy(){var e=window.URL||window.webkitURL||window.mozURL;for(let t in this.urlCache)e.revokeObjectURL(t);this.urlCache={},this.removeListeners()}}Gt(lh.prototype);class aa{constructor(e){this.interactive="",this.fixedLayout="",this.openToSpread="",this.orientationLock="",e&&this.parse(e)}parse(e){if(!e)return this;const t=Qe(e,"display_options");return t?(gi(t,"option").forEach(n=>{let s="";switch(n.childNodes.length&&(s=n.childNodes[0].nodeValue),n.attributes.name.value){case"interactive":this.interactive=s;break;case"fixed-layout":this.fixedLayout=s;break;case"open-to-spread":this.openToSpread=s;break;case"orientation-lock":this.orientationLock=s;break}}),this):this}destroy(){this.interactive=void 0,this.fixedLayout=void 0,this.openToSpread=void 0,this.orientationLock=void 0}}const hh="META-INF/container.xml",tv="META-INF/com.apple.ibooks.display-options.xml",Zt={BINARY:"binary",BASE64:"base64",EPUB:"epub",OPF:"opf",MANIFEST:"json",DIRECTORY:"directory"};class iv{constructor(e,t){typeof t=="undefined"&&typeof e!="string"&&!(e instanceof Blob)&&!(e instanceof ArrayBuffer)&&(t=e,e=void 0),this.settings=xt(this.settings||{},{requestMethod:void 0,requestCredentials:void 0,requestHeaders:void 0,encoding:void 0,replacements:void 0,canonical:void 0,openAs:void 0,store:void 0}),xt(this.settings,t),this.opening=new je,this.opened=this.opening.promise,this.isOpen=!1,this.loading={manifest:new je,spine:new je,metadata:new je,cover:new je,navigation:new je,pageList:new je,resources:new je,displayOptions:new je},this.loaded={manifest:this.loading.manifest.promise,spine:this.loading.spine.promise,metadata:this.loading.metadata.promise,cover:this.loading.cover.promise,navigation:this.loading.navigation.promise,pageList:this.loading.pageList.promise,resources:this.loading.resources.promise,displayOptions:this.loading.displayOptions.promise},this.ready=Promise.all([this.loaded.manifest,this.loaded.spine,this.loaded.metadata,this.loaded.cover,this.loaded.navigation,this.loaded.resources,this.loaded.displayOptions]),this.isRendered=!1,this.request=this.settings.requestMethod||Ir,this.spine=new Ed,this.locations=new Ll(this.spine,this.load.bind(this)),this.navigation=void 0,this.pageList=void 0,this.url=void 0,this.path=void 0,this.archived=!1,this.archive=void 0,this.storage=void 0,this.resources=void 0,this.rendition=void 0,this.container=void 0,this.packaging=void 0,this.displayOptions=void 0,this.settings.store&&this.store(this.settings.store),e&&this.open(e,this.settings.openAs).catch(r=>{var n=new Error("Cannot load book at "+e);this.emit(pe.BOOK.OPEN_FAILED,n)})}open(e,t){var r,n=t||this.determineType(e);return n===Zt.BINARY?(this.archived=!0,this.url=new Ht("/",""),r=this.openEpub(e)):n===Zt.BASE64?(this.archived=!0,this.url=new Ht("/",""),r=this.openEpub(e,n)):n===Zt.EPUB?(this.archived=!0,this.url=new Ht("/",""),r=this.request(e,"binary",this.settings.requestCredentials,this.settings.requestHeaders).then(this.openEpub.bind(this))):n==Zt.OPF?(this.url=new Ht(e),r=this.openPackaging(this.url.Path.toString())):n==Zt.MANIFEST?(this.url=new Ht(e),r=this.openManifest(this.url.Path.toString())):(this.url=new Ht(e),r=this.openContainer(hh).then(this.openPackaging.bind(this))),r}openEpub(e,t){return this.unarchive(e,t||this.settings.encoding).then(()=>this.openContainer(hh)).then(r=>this.openPackaging(r))}openContainer(e){return this.load(e).then(t=>(this.container=new Td(t),this.resolve(this.container.packagePath)))}openPackaging(e){return this.path=new ai(e),this.load(e).then(t=>(this.packaging=new Dl(t),this.unpack(this.packaging)))}openManifest(e){return this.path=new ai(e),this.load(e).then(t=>(this.packaging=new Dl,this.packaging.load(t),this.unpack(this.packaging)))}load(e){var t=this.resolve(e);return this.archived?this.archive.request(t):this.request(t,null,this.settings.requestCredentials,this.settings.requestHeaders)}resolve(e,t){if(!!e){var r=e,n=e.indexOf("://")>-1;return n?e:(this.path&&(r=this.path.resolve(e)),t!=!1&&this.url&&(r=this.url.resolve(r)),r)}}canonical(e){var t=e;return e?(this.settings.canonical?t=this.settings.canonical(e):t=this.resolve(e,!0),t):""}determineType(e){var t,r,n;if(this.settings.encoding==="base64")return Zt.BASE64;if(typeof e!="string")return Zt.BINARY;if(t=new Ht(e),r=t.path(),n=r.extension,n&&(n=n.replace(/\?.*$/,"")),!n)return Zt.DIRECTORY;if(n==="epub")return Zt.EPUB;if(n==="opf")return Zt.OPF;if(n==="json")return Zt.MANIFEST}unpack(e){this.package=e,this.packaging.metadata.layout===""?this.load(this.url.resolve(tv)).then(t=>{this.displayOptions=new aa(t),this.loading.displayOptions.resolve(this.displayOptions)}).catch(t=>{this.displayOptions=new aa,this.loading.displayOptions.resolve(this.displayOptions)}):(this.displayOptions=new aa,this.loading.displayOptions.resolve(this.displayOptions)),this.spine.unpack(this.packaging,this.resolve.bind(this),this.canonical.bind(this)),this.resources=new Ad(this.packaging.manifest,{archive:this.archive,resolver:this.resolve.bind(this),request:this.request.bind(this),replacements:this.settings.replacements||(this.archived?"blobUrl":"base64")}),this.loadNavigation(this.packaging).then(()=>{this.loading.navigation.resolve(this.navigation)}),this.packaging.coverPath&&(this.cover=this.resolve(this.packaging.coverPath)),this.loading.manifest.resolve(this.packaging.manifest),this.loading.metadata.resolve(this.packaging.metadata),this.loading.spine.resolve(this.spine),this.loading.cover.resolve(this.cover),this.loading.resources.resolve(this.resources),this.loading.pageList.resolve(this.pageList),this.isOpen=!0,this.archived||this.settings.replacements&&this.settings.replacements!="none"?this.replacements().then(()=>{this.loaded.displayOptions.then(()=>{this.opening.resolve(this)})}).catch(t=>{console.error(t)}):this.loaded.displayOptions.then(()=>{this.opening.resolve(this)})}loadNavigation(e){let t=e.navPath||e.ncxPath,r=e.toc;return r?new Promise((n,s)=>{this.navigation=new ea(r),e.pageList&&(this.pageList=new ta(e.pageList)),n(this.navigation)}):t?this.load(t,"xml").then(n=>(this.navigation=new ea(n),this.pageList=new ta(n),this.navigation)):new Promise((n,s)=>{this.navigation=new ea,this.pageList=new ta,n(this.navigation)})}section(e){return this.spine.get(e)}renderTo(e,t){return this.rendition=new nh(this,t),this.rendition.attachTo(e),this.rendition}setRequestCredentials(e){this.settings.requestCredentials=e}setRequestHeaders(e){this.settings.requestHeaders=e}unarchive(e,t){return this.archive=new ev,this.archive.open(e,t)}store(e){let t=this.settings.replacements&&this.settings.replacements!=="none",r=this.url,n=this.settings.requestMethod||Ir.bind(this);return this.storage=new lh(e,n,this.resolve.bind(this)),this.request=this.storage.request.bind(this.storage),this.opened.then(()=>{this.archived&&(this.storage.requester=this.archive.request.bind(this.archive));let s=(a,o)=>{o.output=this.resources.substitute(a,o.url)};this.resources.settings.replacements=t||"blobUrl",this.resources.replacements().then(()=>this.resources.replaceCss()),this.storage.on("offline",()=>{this.url=new Ht("/",""),this.spine.hooks.serialize.register(s)}),this.storage.on("online",()=>{this.url=r,this.spine.hooks.serialize.deregister(s)})}),this.storage}coverUrl(){return this.loaded.cover.then(()=>this.cover?this.archived?this.archive.createUrl(this.cover):this.cover:null)}replacements(){return this.spine.hooks.serialize.register((e,t)=>{t.output=this.resources.substitute(e,t.url)}),this.resources.replacements().then(()=>this.resources.replaceCss())}getRange(e){var t=new He(e),r=this.spine.get(t.spinePos),n=this.load.bind(this);return r?r.load(n).then(function(s){var a=t.toRange(r.document);return a}):new Promise((s,a)=>{a("CFI could not be found")})}key(e){var t=e||this.packaging.metadata.identifier||this.url.filename;return`epubjs:${Qs}:${t}`}destroy(){this.opened=void 0,this.loading=void 0,this.loaded=void 0,this.ready=void 0,this.isOpen=!1,this.isRendered=!1,this.spine&&this.spine.destroy(),this.locations&&this.locations.destroy(),this.pageList&&this.pageList.destroy(),this.archive&&this.archive.destroy(),this.resources&&this.resources.destroy(),this.container&&this.container.destroy(),this.packaging&&this.packaging.destroy(),this.rendition&&this.rendition.destroy(),this.displayOptions&&this.displayOptions.destroy(),this.spine=void 0,this.locations=void 0,this.pageList=void 0,this.archive=void 0,this.resources=void 0,this.container=void 0,this.packaging=void 0,this.rendition=void 0,this.navigation=void 0,this.url=void 0,this.path=void 0,this.archived=!1}}Gt(iv.prototype);typeof global!="undefined"&&(global.EPUBJS_VERSION=Qs);function fh(i){return i.type.indexOf("mouse")!==-1?i.clientX:i.touches[0].clientX}function uh(i){return i.type.indexOf("mouse")!==-1?i.clientY:i.touches[0].clientY}var rv=function(){var i=!1;try{var e=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("test",null,e)}catch{}return i}(),uv={install:function(i,e){var t=Object.assign({},{disableClick:!1,tapTolerance:10,swipeTolerance:30,touchHoldTolerance:400,longTapTimeInterval:400,touchClass:"",dragFrequency:100,rollOverFrequency:100},e);function r(w){var p=this.$$touchObj,d=w.type.indexOf("touch")>=0,_=w.type.indexOf("mouse")>=0,T=this;d&&(p.lastTouchStartTime=w.timeStamp),!(_&&p.lastTouchStartTime&&w.timeStamp-p.lastTouchStartTime<350)&&(p.touchStarted||(c(this),p.touchStarted=!0,p.touchMoved=!1,p.swipeOutBounded=!1,p.startX=fh(w),p.startY=uh(w),p.currentX=0,p.currentY=0,p.touchStartTime=w.timeStamp,p.hasSwipe=h(this,"swipe")||h(this,"swipe.left")||h(this,"swipe.right")||h(this,"swipe.top")||h(this,"swipe.bottom"),h(this,"hold")&&(p.touchHoldTimer=setTimeout(function(){p.touchHoldTimer=null,u(w,T,"hold")},p.options.touchHoldTolerance)),u(w,this,"press")))}function n(w){var p=this.$$touchObj,d=fh(w),_=uh(w),T=p.currentX!=d||p.currentY!=_;if(p.currentX=d,p.currentY=_,p.touchMoved){if(p.hasSwipe&&!p.swipeOutBounded){var y=p.options.swipeTolerance;p.swipeOutBounded=Math.abs(p.startX-p.currentX)>y&&Math.abs(p.startY-p.currentY)>y}}else{var N=p.options.tapTolerance;p.touchMoved=Math.abs(p.startX-p.currentX)>N||Math.abs(p.startY-p.currentY)>N,p.touchMoved&&(g(p),u(w,this,"drag.once"))}if(h(this,"rollover")&&T){var S=w.timeStamp,k=p.options.rollOverFrequency;(p.touchRollTime==null||S>p.touchRollTime+k)&&(p.touchRollTime=S,u(w,this,"rollover"))}if(h(this,"drag")&&p.touchStarted&&p.touchMoved&&T){var S=w.timeStamp,k=p.options.dragFrequency;(p.touchDragTime==null||S>p.touchDragTime+k)&&(p.touchDragTime=S,u(w,this,"drag"))}}function s(){var w=this.$$touchObj;g(w),v(this),w.touchStarted=w.touchMoved=!1,w.startX=w.startY=0}function a(w){var p=this.$$touchObj,d=w.type.indexOf("touch")>=0,_=w.type.indexOf("mouse")>=0;d&&(p.lastTouchEndTime=w.timeStamp);var T=d&&!p.touchHoldTimer;if(g(p),p.touchStarted=!1,v(this),!(_&&p.lastTouchEndTime&&w.timeStamp-p.lastTouchEndTime<350))if(u(w,this,"release"),p.touchMoved){if(p.hasSwipe&&!p.swipeOutBounded){var N=p.options.swipeTolerance,y,S=Math.abs(p.startY-p.currentY),k=Math.abs(p.startX-p.currentX);(S>N||k>N)&&(S>N?y=p.startY>p.currentY?"top":"bottom":y=p.startX>p.currentX?"left":"right",h(this,"swipe."+y)?u(w,this,"swipe."+y,y):u(w,this,"swipe",y))}}else if(h(this,"longtap")&&w.timeStamp-p.touchStartTime>p.options.longTapTimeInterval)w.cancelable&&w.preventDefault(),u(w,this,"longtap");else if(h(this,"hold")&&T){w.cancelable&&w.preventDefault();return}else u(w,this,"tap")}function o(){c(this)}function l(){v(this)}function h(w,p){var d=w.$$touchObj.callbacks[p];return d!=null&&d.length>0}function u(w,p,d,_){var T=p.$$touchObj,N=T.callbacks[d];if(N==null||N.length===0)return null;for(var y=0;y<N.length;y++){var S=N[y];S.modifiers.stop&&w.stopPropagation(),S.modifiers.prevent&&w.preventDefault(),!(S.modifiers.self&&w.target!==w.currentTarget)&&typeof S.value=="function"&&(_?S.value(_,w):S.value(w))}}function c(w){var p=w.$$touchObj.options.touchClass;p&&w.classList.add(p)}function v(w){var p=w.$$touchObj.options.touchClass;p&&w.classList.remove(p)}function g(w){w.touchHoldTimer&&(clearTimeout(w.touchHoldTimer),w.touchHoldTimer=null)}function I(w,p){var d=w.$$touchObj||{callbacks:{},hasBindTouchEvents:!1,options:t};return p&&(d.options=Object.assign({},d.options,p)),w.$$touchObj=d,w.$$touchObj}i.directive("touch",{beforeMount:function(w,p){var d=I(w),_=rv?{passive:!0}:!1,T=p.arg||"tap";switch(T){case"swipe":var N=p.modifiers;if(N.left||N.right||N.top||N.bottom){for(var y in p.modifiers)if(["left","right","top","bottom"].indexOf(y)>=0){var S="swipe."+y;d.callbacks[S]=d.callbacks[S]||[],d.callbacks[S].push(p)}}else d.callbacks.swipe=d.callbacks.swipe||[],d.callbacks.swipe.push(p);break;case"press":case"drag":p.modifiers.disablePassive&&(_=!1);default:d.callbacks[T]=d.callbacks[T]||[],d.callbacks[T].push(p)}d.hasBindTouchEvents||(w.addEventListener("touchstart",r,_),w.addEventListener("touchmove",n,_),w.addEventListener("touchcancel",s),w.addEventListener("touchend",a),d.options.disableClick||(w.addEventListener("mousedown",r),w.addEventListener("mousemove",n),w.addEventListener("mouseup",a),w.addEventListener("mouseenter",o),w.addEventListener("mouseleave",l)),d.hasBindTouchEvents=!0)},unmounted:function(w){w.removeEventListener("touchstart",r),w.removeEventListener("touchmove",n),w.removeEventListener("touchcancel",s),w.removeEventListener("touchend",a),w.$$touchObj&&!w.$$touchObj.options.disableClick&&(w.removeEventListener("mousedown",r),w.removeEventListener("mousemove",n),w.removeEventListener("mouseup",a),w.removeEventListener("mouseenter",o),w.removeEventListener("mouseleave",l)),delete w.$$touchObj}}),i.directive("touch-class",{beforeMount:function(w,p){I(w,{touchClass:p.value})}}),i.directive("touch-options",{beforeMount:function(w,p){I(w,p.value)}})}};export{iv as B,vf as a,nu as b,ov as c,av as d,lv as e,sv as f,ho as g,os as h,au as i,fv as j,On as n,as as o,qn as r,hv as u,uv as v,ws as w};
